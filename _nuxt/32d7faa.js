(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{919:function(e,t,n){"use strict";n.r(t);n(58),n(188);var o=n(5),r=(n(59),n(38),n(207),n(237),n(238),n(34),{name:"NewSubZone",props:{activeModal:{default:!1,type:Boolean}},data:function(){return{isLoading:!1,form:{},legalZones:[],text:"",options:[]}},mounted:function(){this.getZones()},methods:{createZone:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,e.$store.dispatch("modules/zones/createOrUpdateSubZone",e.form);case 4:e.form={},e.text="",e.isLoading=!1,e.$buefy.toast.open({message:"Zona guardada!",type:"is-success"}),e.$emit("create"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.$buefy.toast.open({message:"Ocurri贸 un error, intente nuevamente",type:"is-danger"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getZones:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/zones/getZones");case 3:n=t.sent,e.legalZones=n,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},filteredDataArray:function(){var e=this;this.options=this.legalZones.filter((function(option){return option.description.toString().toLowerCase().includes(e.text.toLowerCase())}))},selectZone:function(option){option&&""!==option&&(this.form.idzoning=option.idzoning)}}}),c=n(89),component=Object(c.a)(r,(function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{"destroy-on-hide":!1},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[t("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),e._v(" "),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("p",{staticClass:"card-header-title"},[e._v("\n        Nueva subzonificaci贸n PM\n      ")])]),e._v(" "),t("div",{staticClass:"card-content"},[t("div",{staticClass:"content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("b-field",{attrs:{horizontal:"",label:"Descripci贸n breve"}},[t("b-input",{attrs:{name:"Nombre de indentificaci贸n",type:"text",required:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),t("b-field",{attrs:{horizontal:"",label:"Zona legal relacionada"}},[t("b-autocomplete",{attrs:{data:e.options,icon:"magnify",clearable:"",field:"description"},on:{typing:e.filteredDataArray,select:e.selectZone},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v("\n                No hay resultados\n              ")]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1)]),e._v(" "),t("div",{staticClass:"card-footer"},[t("div",{staticClass:"card-footer-item"},[t("b-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("\n            Cancelar\n          ")])],1),e._v(" "),t("div",{staticClass:"card-footer-item"},[t("b-button",{attrs:{type:"is-success"},on:{click:e.createZone}},[e._v("\n            Guardar\n          ")])],1)])])])],1)}),[],!1,null,null,null);t.default=component.exports}}]);