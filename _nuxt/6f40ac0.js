(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1290:function(e,t,n){"use strict";n.r(t);n(128),n(58),n(188),n(61),n(70),n(71);var r=n(26),o=n(5),c=(n(138),n(38),n(60),n(59),n(207),n(238),n(239),n(392),n(117),n(129),n(501),n(393),n(34),n(154)),l=n(755);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}n(698);var f={name:"EditBinnacle",props:{activeModal:{default:!1,type:Boolean},idPlan:{default:"",type:String},idBinnacle:{default:"",type:String},objectBinnacle:{default:{},type:Object},isExtraordinary:{default:!1,type:Boolean},type:{default:"",type:String}},data:function(){return{form:{status:"sin-revisar",date:new Date,hour_init:new Date,list_vehicles_deleted:[]},isLoading:!1,filteredParticipants:[],filteredVehicles:[],filteredVegetation:[],filteredLegalZones:[],filteredOpZones:[],filteredSubZones:[],participants:[],options:[],participant:"",vehicles:[],vegetation:[],legalZones:[],subZones:[],opZones:[],list_vegetable_affected:[],plan:{},binnacles:[],zoom:12,center:[0,0],point:[-89.60984537598705,20.85610769792424],rotation:0,files:[],formCoord:{},points:[],idPoints:[],idEvidences:[],pointsMap:[[-89.60984537598705,20.85610769792424]],temporalFiles:[],typeBinnacle:null,temporalFile:null,buttonDisabled:!1,imageUrl:n(506)}},watch:{objectBinnacle:function(e,t){},idBinnacle:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,n.getBinnacle(e);case 3:(r=t.sent).date=new Date(r.date),r.hour_init?r.hour_init=new Date(r.hour_init):delete r.hour_init,r.hour_end?r.hour_end=new Date(r.hour_end):delete r.hour_end,n.form=r;case 8:case"end":return t.stop()}}),t)})))()},form:function(e,t){},point:function(e,t){e&&this.convertCoordinatesToUtm(e)}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.b)(["user"])),created:function(){},mounted:function(){this.center=this.point?this.point:[0,0],this.form.idusers=this.user.idusers,this.form.idplanification=this.idPlan,this.isExtraordinary?(this.form.isextraordinary=!0,this.form.type=this.type):this.getPlan(),this.getVehicles(),this.getParticipants(),this.getVeg(),this.getLegalZones(),this.getSubZones(),this.getOpZones(),this.filteredParticipants=this.participants},methods:{kmlFormatFactory:function(){return new l.a},getPlan:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/plans/readPlan",e.idPlan);case 3:n=t.sent,e.plan=n,e.binnacles=n.binnacles?n.binnacles:[],t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},createOrUpdateBinnacle:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoading=!0,e.buttonDisabled=!0,"revisado"!==(n=JSON.parse(JSON.stringify(e.form))).status){t.next=7;break}e.$swal.fire({title:"¿Qué tipo de bitácora es?",text:"Selecciona una opción",showDenyButton:!0,showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Opinión técnica",denyButtonText:"Denuncia",cancelButtonText:"Programada"}).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isConfirmed){t.next=8;break}return n.type="techOp",t.next=4,e.createOrUpdate(n);case 4:e.isLoading=!1,e.buttonDisabled=!1,t.next=22;break;case 8:if(!r.isDenied){t.next=16;break}return n.type="complaint",t.next=12,e.createOrUpdate(n);case 12:e.isLoading=!1,e.buttonDisabled=!1,t.next=22;break;case 16:if(!r.isDismissed){t.next=22;break}return n.type="programmed",t.next=20,e.createOrUpdate(n);case 20:e.isLoading=!1,e.buttonDisabled=!1;case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=12;break;case 7:return t.next=9,e.createOrUpdate(n);case 9:e.isLoading=!1,e.buttonDisabled=!1,e.$emit("update");case 12:case"end":return t.stop()}}),t)})))()},createOrUpdate:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!t.idBinnacle){n.next=10;break}return o=t.idBinnacle,n.next=5,t.updateBinnacle(e);case 5:return n.next=7,t.getBinnacle(o);case 7:r=n.sent,n.next=16;break;case 10:return n.next=12,t.$store.dispatch("modules/binnacles/createOrUpdateBinnacle",e);case 12:return o=n.sent,n.next=15,t.getBinnacle(o);case 15:r=n.sent;case 16:if(!(t.list_vegetable_affected.length>0)){n.next=20;break}return r.list_vegetable_affected=t.list_vegetable_affected.map((function(e){return e.idbinnacle=o,e})),n.next=20,t.updateBinnacle(r);case 20:if(!(t.points.length>0)){n.next=27;break}return t.points.map((function(e){var t=e;return t.idbinnacle=o,t})),n.next=24,t.createPoints(t.points,o);case 24:return r.list_coordinates=t.idPoints,n.next=27,t.updateBinnacle(r);case 27:if(!(t.files.length>0)){n.next=38;break}return c=new FormData,t.files.map((function(e){c.append("binnacle_photo[]",e)})),t.files.forEach((function(e,n){t.temporalFiles.push({description:"evidencia "+(n+1),idbinnacle:o,position:n+1})})),r.list_image=t.temporalFiles,n.next=34,t.updateBinnacle(r);case 34:return l=n.sent,t.temporalFiles.forEach((function(e,t){c.append("idimages["+t+"]",l[t])})),n.next=38,t.uploadEvidences(c);case 38:t.form={},t.temporalFiles=[],t.files=[],t.idPoints=[],t.points=[],t.pointsMap=[[-89.60984537598705,20.85610769792424]],t.$buefy.toast.open({message:"¡Bitácora guardada!",type:"is-success"}),n.next=49;break;case 47:n.prev=47,n.t0=n.catch(0);case 49:return n.prev=49,t.buttonDisabled=!1,t.isLoading=!1,n.finish(49);case 53:case"end":return n.stop()}}),n,null,[[0,47,49,53]])})))()},readFile:function(){this.temporalFile=this.$refs.file.files[0]},convertCoordinatesToUtm:function(e){},convertCoordinatesFromUtm:function(e){},closeModal:function(){this.form={},this.temporalFiles=[],this.files=[],this.points=[],this.$emit("close")},createPoints:function(e,t){var n=this,r=e;try{r.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("modules/coordinates/createOrUpdateCoordinate",r);case 2:o=e.sent,n.idPoints.push({idcoordinates:o,idbinnacle:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){this.$buefy.toast.open({message:"Ocurrió un error, intente nuevamente",type:"is-danger"})}},uploadEvidences:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("modules/binnacles/uploadEvidences",e);case 3:r=n.sent,t.idEvidences=r,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.$buefy.toast.open({message:"Ocurrió un error, intente nuevamente",type:"is-danger"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},updateBinnacle:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("modules/binnacles/createOrUpdateBinnacle",e);case 3:return r=n.sent,n.abrupt("return",r);case 7:n.prev=7,n.t0=n.catch(0),t.$buefy.toast.open({message:"Ocurrió un error, intente nuevamente",type:"is-danger"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getVehicles:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/vehicles/getVehicles");case 3:n=t.sent,e.vehicles=n,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getVeg:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/vegetation/getVegetations");case 3:n=t.sent,e.vegetation=n,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getLegalZones:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/zones/getZones");case 3:e.legalZones=t.sent,e.filteredLegalZones=e.legalZones,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getSubZones:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/zones/getSubZones");case 3:e.subZones=t.sent,e.filteredSubZones=e.subZones,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getOpZones:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/operativeZones/getZones");case 3:e.opZones=t.sent,e.filteredOpZones=e.opZones,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getParticipants:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/participants/getParticipants");case 3:n=t.sent,e.options=n,e.participants=n,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},filterData:function(text){this.filteredParticipants=this.participants.filter((function(option){if(option.name&&option.name.toString().toLowerCase().includes(text.toLowerCase()))return option}))},addPoint:function(){if(this.formCoord.name&&""!==this.formCoord.name){if(0===this.points.length){var e=[[this.point[0],this.point[1]]];this.pointsMap=e}else this.pointsMap.push([this.point[0],this.point[1]]);this.formCoord.x=this.point[0],this.formCoord.y=this.point[1],this.points.push(this.formCoord),this.formCoord={name:"",x:0,y:0},this.point=[-89.60984537598705,20.85610769792424]}else this.$buefy.toast.open({duration:4e3,message:"Es necesario asignar un nombre a las coordenadas",position:"is-bottom",type:"is-danger"})},getBinnacle:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("modules/binnacles/getBinnacle",e);case 3:return r=n.sent,n.abrupt("return",r);case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})))()},viewPoint:function(e){this.formCoord.name=e.name,this.point[0]=e.x,this.point[1]=e.y,this.center=this.point},deletePoint:function(e){this.points.splice(e,1),this.pointsMap.splice(e,1)},removeParticipant:function(e){this.form.participants.splice(e,1)},viewIamge:function(image){this.imageUrl=URL.createObjectURL(image)},deleteDropFile:function(e){this.files.splice(e,1)},createCoord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.formCoord.x=e.point[0],e.formCoord.y=e.point[1],t.prev=2,t.next=5,e.$store.dispatch("/modules/coordinates/createOrUpdateCoordinate",e.formCoord);case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,null,[[2,7]])})))()},filterVehicles:function(text){this.filteredVehicles=this.vehicles.filter((function(option){if(option.plates&&option.plates.toString().toLowerCase().includes(text.toLowerCase())||option.number&&option.number.toString().toLowerCase().includes(text.toLowerCase()))return option}))},filterVegetation:function(text){this.filteredVegetation=this.vegetation.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},filterPart:function(text){this.filteredVegetation=this.vegetation.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},filterZones:function(text){this.filteredLegalZones=this.legalZones.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},filterSubZones:function(text){this.filteredSubZones=this.subZones.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},filterOpZone:function(text){this.filteredOpZones=this.opZones.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},filterPersonRecorrido:function(){var e=this;this.options=this.participants.filter((function(option){return option.name.toString().toLowerCase().includes(e.participant.toLowerCase())}))},deleteVehicles:function(object){this.form.list_vehicles_deleted.push(object)},deleteOpZone:function(object){this.form.list_operative_zones_deleted.push(object)},deleteSubzoning:function(object){this.form.list_subzoning_deleted.push(object)},deleteVa:function(object){this.form.list_va_deleted.push(object)}}},h=f,v=n(76),component=Object(v.a)(h,(function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{"can-cancel":!1,"destroy-on-hide":!1},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[t("div",{staticClass:"card"},[t("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!1},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),e._v(" "),t("div",{staticClass:"card-header"},[t("p",{staticClass:"card-header-title"},[e._v("\n        Editar bitácora "+e._s(e.isExtraordinary?" - Extraordinaria":"")+"\n      ")])]),e._v(" "),t("div",{staticClass:"card-content"},[t("div",{staticClass:"content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"divider"},[t("strong",[e._v("Estado de la bítacora")])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Estado actual de la bitácora"}},[t("b-select",{attrs:{placeholder:"Selecciona una opción"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("option",{attrs:{value:"sin-revisar"}},[e._v("\n                    Sin revisar\n                  ")]),e._v(" "),t("option",{attrs:{value:"en-revision"}},[e._v("\n                    En revisión\n                  ")]),e._v(" "),t("option",{attrs:{value:"revisado"}},[e._v("\n                    Revisado\n                  ")])])],1)],1),e._v(" "),t("div",{staticClass:"column"})]),e._v(" "),t("div",{staticClass:"divider"},[t("strong",[e._v("Relatoría")])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Escriba aquí la relatoría"}},[t("b-input",{attrs:{type:"textarea"},model:{value:e.form.rapporteur,callback:function(t){e.$set(e.form,"rapporteur",t)},expression:"form.rapporteur"}})],1)],1)]),e._v(" "),t("div",{staticClass:"divider"},[t("strong",[e._v("Datos generales")])]),e._v(" "),t("div",{staticClass:"columns has-text-centered"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Fecha"}},[t("b-datepicker",{attrs:{inline:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),e._v(" "),t("div",{staticClass:"column"},[t("div",{staticClass:"container m-2"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Hora de inicio"}},[t("b-timepicker",{attrs:{inline:""},model:{value:e.form.hour_init,callback:function(t){e.$set(e.form,"hour_init",t)},expression:"form.hour_init"}})],1)],1),e._v(" "),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Hora de finalización"}},[t("b-timepicker",{attrs:{inline:""},model:{value:e.form.hour_end,callback:function(t){e.$set(e.form,"hour_end",t)},expression:"form.hour_end"}})],1)],1)])]),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"container m-2"},[t("b-field",{attrs:{label:"Vehículos"}},[t("b-taginput",{attrs:{data:e.filteredVehicles,field:"number",autocomplete:"","open-on-focus":!0},on:{typing:e.filterVehicles,remove:e.deleteVehicles},scopedSlots:e._u([{key:"default",fn:function(n){return[t("strong",[e._v(e._s(n.option.number)+" -\n                        "+e._s(n.option.plates?n.option.plates:"sin placas reigstradas"))])]}},{key:"empty",fn:function(){return[e._v("\n                      Sin resultados\n                    ")]},proxy:!0}]),model:{value:e.form.list_vehicle,callback:function(t){e.$set(e.form,"list_vehicle",t)},expression:"form.list_vehicle"}})],1),e._v(" "),t("b-field",{attrs:{label:"Participantes"}},[t("b-taginput",{attrs:{data:e.filteredParticipants,field:"name",autocomplete:"","open-on-focus":!0},on:{typing:e.filterData},scopedSlots:e._u([{key:"default",fn:function(n){return[t("strong",[e._v(e._s(n.option.name)+"\n                        "+e._s(n.option.lastname))])]}},{key:"empty",fn:function(){return[e._v("\n                      Sin resultados\n                    ")]},proxy:!0},{key:"selected",fn:function(){return e._l(e.form.participants,(function(n,r){return t("b-tag",{key:r,attrs:{closable:""},on:{close:function(t){return e.removeParticipant(r)}}},[e._v("\n                        "+e._s(n.name)+" "+e._s(n.lastname)+"\n                      ")])}))},proxy:!0}]),model:{value:e.form.participants,callback:function(t){e.$set(e.form,"participants",t)},expression:"form.participants"}})],1),e._v(" "),t("b-field",{attrs:{label:"Persona que realizó el recorrido"}},[t("b-autocomplete",{attrs:{data:e.options,icon:"magnify",clearable:"",field:"name"},on:{typing:e.filterPersonRecorrido,select:function(option){return e.form.idparticipants=option.idparticipants}},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v("\n                      No hay resultados\n                    ")]},proxy:!0}]),model:{value:e.participant,callback:function(t){e.participant=t},expression:"participant"}})],1)],1)])]),e._v(" "),t("div",{staticClass:"divider"},[t("strong",[e._v("Zonas y vegetación")])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Zonas de vigilancia"}},[t("b-taginput",{attrs:{data:e.filteredOpZones,autocomplete:"",field:"description","open-on-focus":!0},on:{typing:e.filterOpZone},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v("\n                    Sin resultados\n                  ")]},proxy:!0}]),model:{value:e.form.list_operative_zones,callback:function(t){e.$set(e.form,"list_operative_zones",t)},expression:"form.list_operative_zones"}})],1)],1)]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Subzonas"}},[t("b-taginput",{attrs:{data:e.filteredSubZones,field:"description",autocomplete:"","open-on-focus":!0},on:{typing:e.filterSubZones},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v("\n                    Sin resultados\n                  ")]},proxy:!0}]),model:{value:e.form.list_subzoning,callback:function(t){e.$set(e.form,"list_subzoning",t)},expression:"form.list_subzoning"}})],1)],1)]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Vegetación"}},[t("b-taginput",{attrs:{data:e.filteredVegetation,field:"description",autocomplete:""},on:{typing:e.filterVegetation},scopedSlots:e._u([{key:"default",fn:function(n){return[t("strong",[e._v(e._s(n.option.description))])]}},{key:"empty",fn:function(){return[e._v("\n                    Sin resultados\n                  ")]},proxy:!0}]),model:{value:e.list_vegetable_affected,callback:function(t){e.list_vegetable_affected=t},expression:"list_vegetable_affected"}})],1)],1)]),e._v(" "),t("div",{staticClass:"divider"},[t("strong",[e._v("Coordenadas")])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("div",{staticClass:"container"},[t("b-field",{attrs:{label:"Descripción breve de la coordenada"}},[t("b-input",{model:{value:e.formCoord.name,callback:function(t){e.$set(e.formCoord,"name",t)},expression:"formCoord.name"}})],1),e._v(" "),t("b-field",{attrs:{label:"Latitud"}},[t("b-numberinput",{attrs:{step:"0.000000000000000001",controls:!1},model:{value:e.point[0],callback:function(t){e.$set(e.point,0,t)},expression:"point[0]"}})],1),e._v(" "),t("b-field",{attrs:{label:"Longitud"}},[t("b-numberinput",{attrs:{step:"0.000000000000000001",controls:!1},model:{value:e.point[1],callback:function(t){e.$set(e.point,1,t)},expression:"point[1]"}})],1)],1),e._v(" "),t("div",{staticClass:"container m-3 has-text-centered"},[t("b-button",{attrs:{type:"is-success is-light"},on:{click:e.addPoint}},[e._v("\n                  Agregar coordenada\n                ")])],1),e._v(" "),e._l(e.form.list_coordinates,(function(n){return t("div",{key:n.name,staticClass:"container m-3"},[t("div",{staticClass:"control"},[t("b-tag",{attrs:{type:"is-primary",attached:"","aria-close-label":"Close tag",closable:""},on:{close:e.deletePoint,click:function(t){return e.viewPoint(n)}}},[e._v("\n                    "+e._s(n.name)+"\n                  ")])],1)])}))],2),e._v(" "),t("div",{staticClass:"column is-8"},[t("vl-map",{staticStyle:{height:"400px"},attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326"}},[t("vl-view",{attrs:{zoom:e.zoom,center:e.point,rotation:e.rotation},on:{"update:zoom":function(t){e.zoom=t},"update:center":function(t){e.point=t},"update:rotation":function(t){e.rotation=t}}}),e._v(" "),t("vl-layer-tile",[t("vl-source-osm")],1),e._v(" "),t("vl-feature",[t("vl-geom-multi-point",{attrs:{coordinates:e.pointsMap}})],1)],1)],1)]),e._v(" "),t("div",{staticClass:"divider"},[t("strong",[e._v("Evidencias")])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("section",[t("b-field",[t("b-upload",{attrs:{multiple:"","drag-drop":""},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[t("section",{staticClass:"section"},[t("div",{staticClass:"content has-text-centered"},[t("p",[t("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),e._v(" "),t("p",[e._v("\n                          Arrastra aquí tus imágenes o has click aquí para\n                          subirlas.\n                        ")])])])])],1),e._v(" "),e._l(e.files,(function(n,r){return t("div",{key:n,staticClass:"tags"},[t("b-tag",{attrs:{type:"is-primary",attached:"","aria-close-label":"Borrar elemento",closable:""},on:{close:function(t){return e.deleteDropFile(r)},click:function(t){return e.viewIamge(n)}}},[e._v("\n                    "+e._s(r+1)+" - "+e._s(n.name)+"\n                  ")])],1)}))],2)]),e._v(" "),t("div",{staticClass:"column is-6"},[t("b-image",{attrs:{src:e.imageUrl,alt:"The Buefy Logo",ratio:"601by235"}})],1)])])]),e._v(" "),t("div",{staticClass:"card-footer"},[t("div",{staticClass:"card-footer-item"},[t("b-button",{attrs:{disabled:e.buttonDisabled},on:{click:e.closeModal}},[e._v("\n            Cancelar\n          ")])],1),e._v(" "),t("div",{staticClass:"card-footer-item"},[t("b-button",{attrs:{type:"is-success",disabled:e.buttonDisabled},on:{click:e.createOrUpdateBinnacle}},[e._v("\n            Guardar\n          ")])],1)])])],1)])}),[],!1,null,null,null);t.default=component.exports},698:function(e,t){var n=o.prototype,r="WGS 84";function o(e){void 0!==e&&(r=e),this.setEllipsoid(r)}function c(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}n.convertLatLngToUtm=function(e,t,n){var o;if(this.status)return"No ecclipsoid data associated with unknown datum: "+r;if(!Number.isInteger(n))return"Precision is not integer number.";e=parseFloat(e);var l=t=parseFloat(t),d=this.toRadians(e),f=this.toRadians(l);l>=8&&l<=13&&e>54.5&&e<58||e>=56&&e<64&&l>=3&&l<12?o=32:(o=(l+180)/6+1,e>=72&&e<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37)));var h=6*((o=parseInt(o))-1)-180+3,v=this.toRadians(h),m=this.getUtmLetterDesignator(e),_=this.eccSquared/(1-this.eccSquared),S=this.a/Math.sqrt(1-this.eccSquared*Math.sin(d)*Math.sin(d)),x=Math.tan(d)*Math.tan(d),k=_*Math.cos(d)*Math.cos(d),y=Math.cos(d)*(f-v),C=this.a*((1-this.eccSquared/4-3*this.eccSquared*this.eccSquared/64-5*this.eccSquared*this.eccSquared*this.eccSquared/256)*d-(3*this.eccSquared/8+3*this.eccSquared*this.eccSquared/32+45*this.eccSquared*this.eccSquared*this.eccSquared/1024)*Math.sin(2*d)+(15*this.eccSquared*this.eccSquared/256+45*this.eccSquared*this.eccSquared*this.eccSquared/1024)*Math.sin(4*d)-35*this.eccSquared*this.eccSquared*this.eccSquared/3072*Math.sin(6*d)),w=parseFloat(.9996*S*(y+(1-x+k)*y*y*y/6+(5-18*x+x*x+72*k-58*_)*y*y*y*y*y/120)+5e5),O=parseFloat(.9996*(C+S*Math.tan(d)*(y*y/2+(5-x+9*k+4*k*k)*y*y*y*y/24+(61-58*x+x*x+600*k-330*_)*y*y*y*y*y*y/720)));return e<0&&(O+=1e7),O=c(O,n),{Easting:w=c(w,n),Northing:O,ZoneNumber:parseInt(o),ZoneLetter:m}},n.convertUtmToLatLng=function(e,t,n,r){var o=(1-Math.sqrt(1-this.eccSquared))/(1+Math.sqrt(1-this.eccSquared)),c=e-5e5,l=t,d=n;if(void 0===e)return"Please pass the UTMEasting!";if(void 0===t)return"Please pass the UTMNorthing!";if(void 0===n)return"Please pass the UTMZoneNumber!";if(void 0===r)return"Please pass the UTMZoneLetter!";-1!==["N","P","Q","R","S","T","U","V","W","X","Y","Z"].indexOf(r)||(0,l-=1e7);var f=6*(d-1)-180+3,h=this.eccSquared/(1-this.eccSquared),v=l/.9996/(this.a*(1-this.eccSquared/4-3*this.eccSquared*this.eccSquared/64-5*this.eccSquared*this.eccSquared*this.eccSquared/256)),m=v+(3*o/2-27*o*o*o/32)*Math.sin(2*v)+(21*o*o/16-55*o*o*o*o/32)*Math.sin(4*v)+151*o*o*o/96*Math.sin(6*v),_=(this.toDegrees(m),this.a/Math.sqrt(1-this.eccSquared*Math.sin(m)*Math.sin(m))),S=Math.tan(m)*Math.tan(m),x=h*Math.cos(m)*Math.cos(m),k=this.a*(1-this.eccSquared)/Math.pow(1-this.eccSquared*Math.sin(m)*Math.sin(m),1.5),y=c/(.9996*_),C=m-_*Math.tan(m)/k*(y*y/2-(5+3*S+10*x-4*x*x-9*h)*y*y*y*y/24+(61+90*S+298*x+45*S*S-252*h-3*x*x)*y*y*y*y*y*y/720);C=this.toDegrees(C);var w=(y-(1+2*S+x)*y*y*y/6+(5-2*x+28*S-3*x*x+8*h+24*S*S)*y*y*y*y*y/120)/Math.cos(m);return{lat:C,lng:w=f+this.toDegrees(w)}},n.getUtmLetterDesignator=function(e){return 84>=(e=parseFloat(e))&&e>=72?"X":72>e&&e>=64?"W":64>e&&e>=56?"V":56>e&&e>=48?"U":48>e&&e>=40?"T":40>e&&e>=32?"S":32>e&&e>=24?"R":24>e&&e>=16?"Q":16>e&&e>=8?"P":8>e&&e>=0?"N":0>e&&e>=-8?"M":-8>e&&e>=-16?"L":-16>e&&e>=-24?"K":-24>e&&e>=-32?"J":-32>e&&e>=-40?"H":-40>e&&e>=-48?"G":-48>e&&e>=-56?"F":-56>e&&e>=-64?"E":-64>e&&e>=-72?"D":-72>e&&e>=-80?"C":"Z"},n.setEllipsoid=function(e){switch(e){case"Airy":this.a=6377563,this.eccSquared=.00667054;break;case"Australian National":case"South American 1969":this.a=6378160,this.eccSquared=.006694542;break;case"Bessel 1841":this.a=6377397,this.eccSquared=.006674372;break;case"Bessel 1841 Nambia":this.a=6377484,this.eccSquared=.006674372;break;case"Clarke 1866":this.a=6378206,this.eccSquared=.006768658;break;case"Clarke 1880":this.a=6378249,this.eccSquared=.006803511;break;case"Everest":this.a=6377276,this.eccSquared=.006637847;break;case"Fischer 1960 Mercury":this.a=6378166,this.eccSquared=.006693422;break;case"Fischer 1968":this.a=6378150,this.eccSquared=.006693422;break;case"GRS 1967":this.a=6378160,this.eccSquared=.006694605;break;case"GRS 1980":case"WGS 84":case"EUREF89":case"ETRS89":this.a=6378137,this.eccSquared=.00669438;break;case"Helmert 1906":this.a=6378200,this.eccSquared=.006693422;break;case"Hough":this.a=6378270,this.eccSquared=.00672267;break;case"International":case"ED50":this.a=6378388,this.eccSquared=.00672267;break;case"Krassovsky":this.a=6378245,this.eccSquared=.006693422;break;case"Modified Airy":this.a=6377340,this.eccSquared=.00667054;break;case"Modified Everest":this.a=6377304,this.eccSquared=.006637847;break;case"Modified Fischer 1960":this.a=6378155,this.eccSquared=.006693422;break;case"WGS 60":this.a=6378165,this.eccSquared=.006693422;break;case"WGS 66":this.a=6378145,this.eccSquared=.006694542;break;case"WGS 72":this.a=6378135,this.eccSquared=.006694318;break;default:this.status=!0}},n.toDegrees=function(e){return e/Math.PI*180},n.toRadians=function(e){return e*Math.PI/180},e.exports=o}}]);