(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{1183:function(e,t,r){"use strict";r(894)},1184:function(e,t,r){var n=r(166),o=r(494),c=r(679),l=n((function(i){return i[1]})),d=o(c);l.push([e.i,".card{background:#fff}#home{background-color:rgba(4,3,3,.604);background-image:url("+d+");background-origin:content-box;background-position:50%;background-repeat:repeat;background-size:100%;width:100%}",""]),l.locals={},e.exports=l},1252:function(e,t,r){"use strict";r.r(t);var n=r(5),o=(r(498),r(38),r(116),r(59),r(117),r(129),r(34),{name:"Concentrado",data:function(){return{isLoading:!1,optionsMetas:[],selectYear:{},formMeta:{},planifications:[],optionsPlanification:{labels:["En proceso","Finalizado","Por comenzar"],chart:{toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:"recorridos-por-año",columnDelimiter:",",headerCategory:"Estado",headerValue:"Recorridos",dateFormatter:function(e){return new Date(e).toDateString()}},svg:{filename:"recorridos-por-año"},png:{filename:"recorridos-por-año"}}}}},seriesPlanification:[],optionsPlansPerMonth:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],yaxis:{labels:{formatter:function(e){return parseInt(e)}}},tooltip:{y:{formatter:function(e){return parseInt(e)+" recorridos"}}},noData:{text:"Cargando..."},chart:{toolbar:{export:{csv:{filename:"recorridos-por-mes",columnDelimiter:",",headerCategory:"Mes",headerValue:"Recorridos",dateFormatter:function(e){return new Date(e).toDateString()}},svg:{filename:"recorridos-por-mes"},png:{filename:"recorridos-por-mes"}}}}},seriesPlansPerMoth:[{name:"Recorridos",data:[]}],seriesBinnacles:[],optionsBinnacle:{labels:["Revisado","En revisión","Por revisar"]},binnacles:[]}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetas();case 2:return t.next=4,e.viewYearData();case 4:case"end":return t.stop()}}),t)})))()},methods:{getMetas:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("modules/plans/getMetas");case 3:r=t.sent,e.optionsMetas=r,n=new Date,r.find((function(e){return Number(e.fecha_captura)===n.getFullYear()}))?e.selectYear=r.find((function(e){return Number(e.fecha_captura)===n.getFullYear()})):e.selectYear=null,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},editMeta:function(){this.formMeta=this.selectYear},createMeta:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formMeta.idmeta||!e.optionsMetas.find((function(t){return t.fecha_captura===e.formMeta.fecha_captura}))){t.next=4;break}e.$buefy.toast.open({duration:5e3,message:"Ya existe un registro con ese año",type:"is-danger"}),t.next=14;break;case 4:return t.prev=4,t.next=7,e.$store.dispatch("modules/plans/createOrUpdateMeta",e.formMeta);case 7:e.formMeta={},e.getMetas(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},viewYearData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.seriesPlansPerMoth[0].data=[],t.next=4,e.getBinnacles(e.selectYear.fecha_captura);case 4:return t.next=6,e.getPlanifications(e.selectYear.fecha_captura);case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getBinnacles:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch("modules/binnacles/getBinnacles");case 3:n=r.sent,o=new Date,t.binnacles=n.filter((function(t){var r=new Date(t.date);if(e){if(r.getFullYear()===Number(e))return t}else if(r.getFullYear()===o.getFullYear())return t})),c=t.binnacles.filter((function(e){return"revisado"===e.status})),l=t.binnacles.filter((function(e){return"en-revision"===e.status})),d=t.binnacles.filter((function(e){return"por-revisar"===e.status})),t.seriesBinnacles=[Number(c.length),Number(l.length),Number(d.length)],r.next=14;break;case 12:r.prev=12,r.t0=r.catch(0);case 14:case"end":return r.stop()}}),r,null,[[0,12]])})))()},getPlanifications:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d,f,i,v,m,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new Date,o=n.getFullYear(),c="",l="",e?(c=new Date(e,0,1),l=new Date(e,11,31)):(c=new Date(o,0,1),l=new Date(o,11,31)),r.prev=5,r.next=8,t.$store.dispatch("modules/plans/getPlans",[c,l]);case 8:d=r.sent,t.planifications=d,t.seriesPlansPerMoth[0].data=[],f=regeneratorRuntime.mark((function e(i){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.filter((function(e){if(new Date(e.start_date).getMonth()===i)return e})),t.seriesPlansPerMoth[0].data.push(parseInt(r.length));case 2:case"end":return e.stop()}}),e)})),i=0;case 13:if(!(i<12)){r.next=18;break}return r.delegateYield(f(i),"t0",15);case 15:i++,r.next=13;break;case 18:v=d.filter((function(e){return"process"===e.estatus})),m=d.filter((function(e){return"finally"===e.estatus})),h=d.filter((function(e){return"active"===e.estatus})),t.seriesPlanification=[Number(v.length),Number(m.length),Number(h.length)],r.next=26;break;case 24:r.prev=24,r.t1=r.catch(5);case 26:case"end":return r.stop()}}),r,null,[[5,24]])})))()}},head:function(){return{title:"Concentrado - Cuxtal"}}}),c=(r(1183),r(89)),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"home"}},[t("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),e._v(" "),t("div",{staticClass:"columns mt-2"},[t("div",{staticClass:"column"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-content"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{horizontal:"",label:"Año"}},[t("b-select",{attrs:{placeholder:"Seleccione un año"},model:{value:e.selectYear,callback:function(t){e.selectYear=t},expression:"selectYear"}},e._l(e.optionsMetas,(function(option){return t("option",{key:option.idmeta,domProps:{value:option}},[e._v("\n                    "+e._s(option.fecha_captura)+" - "+e._s(option.dato)+"\n                  ")])})),0)],1)],1),e._v(" "),t("div",{staticClass:"column"},[t("b-button",{attrs:{type:"is-info is-light"},on:{click:e.viewYearData}},[e._v("\n                Visualizar\n              ")]),e._v(" "),t("b-button",{attrs:{type:"is-warning is-light"},on:{click:e.editMeta}},[e._v("\n                Editar\n              ")])],1)])])])]),e._v(" "),t("div",{staticClass:"column"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-content"},[t("b-field",{attrs:{horizontal:"",label:"Nuevo registro"}},[t("b-input",{attrs:{placeholder:"Año",expanded:""},model:{value:e.formMeta.fecha_captura,callback:function(t){e.$set(e.formMeta,"fecha_captura",t)},expression:"formMeta.fecha_captura"}}),e._v(" "),t("b-input",{attrs:{placeholder:"Meta",type:"text",expanded:""},model:{value:e.formMeta.dato,callback:function(t){e.$set(e.formMeta,"dato",t)},expression:"formMeta.dato"}}),e._v(" "),t("b-button",{attrs:{type:"is-success is-light"},on:{click:e.createMeta}},[e._v("\n              Guardar\n            ")])],1)],1)])])]),e._v(" "),t("div",[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"card"},[e._m(0),e._v(" "),t("div",{staticClass:"card-content"},[e.seriesPlanification.length>0?t("div",{staticClass:"card-content is-flex is-justify-content-center"},[t("apexchart",{attrs:{width:"380",type:"donut",options:e.optionsPlanification,series:e.seriesPlanification}})],1):t("div",{staticClass:"card-content has-text-centered"},[t("p",[e._v("No hay datos por mostrar")])])])])]),e._v(" "),t("div",{staticClass:"column"},[t("div",{staticClass:"card"},[e._m(1),e._v(" "),t("div",{staticClass:"card-content"},[e.seriesPlansPerMoth[0].data.length>0?t("div",{staticClass:"card-content is-flex is-justify-content-center"},[t("apexchart",{attrs:{width:"380",type:"bar",options:e.optionsPlansPerMonth,series:e.seriesPlansPerMoth}})],1):t("div",{staticClass:"card-content has-text-centered"},[t("p",[e._v("No hay datos por mostrar")])])])])])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"card"},[e._m(2),e._v(" "),t("div",{staticClass:"card-content"},[e.seriesBinnacles.length>0?t("div",{staticClass:"card-content is-flex is-justify-content-center"},[t("apexchart",{attrs:{width:"380",type:"donut",options:e.optionsBinnacle,series:e.seriesBinnacles}})],1):t("div",{staticClass:"card-content has-text-centered"},[t("p",[e._v("No hay datos por mostrar")])])])])])])]),e._v(" "),t("div")],1)}),[function(){var e=this._self._c;return e("header",{staticClass:"card-header"},[e("p",{staticClass:"card-header-title"},[this._v("\n              Recorridos al año\n            ")])])},function(){var e=this._self._c;return e("header",{staticClass:"card-header"},[e("p",{staticClass:"card-header-title"},[this._v("\n              Recorridos por mes\n            ")])])},function(){var e=this._self._c;return e("header",{staticClass:"card-header"},[e("p",{staticClass:"card-header-title"},[this._v("\n              Bitácoras\n            ")])])}],!1,null,null,null);t.default=component.exports},679:function(e,t,r){e.exports=r.p+"img/background.461462f.jpg"},894:function(e,t,r){var content=r(1184);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(167).default)("ddd41a5e",content,!0,{sourceMap:!1})}}]);