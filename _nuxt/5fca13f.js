(window.webpackJsonp=window.webpackJsonp||[]).push([[1,22,25,33,36,94],{694:function(t,e){t.exports={props:{value:{type:null}},data:function(){return{innerValue:""}},watch:{innerValue:function(t){this.$emit("input",t)},value:function(t){this.innerValue=t}},created:function(){this.value&&(this.innerValue=this.value)}}},695:function(t,e,n){"use strict";n.r(e);n(128);var input=n(694),r={mixins:[n.n(input).a],props:{vid:{type:String},rules:{type:[Object,String],default:""},normal:Boolean,margin:{type:String,default:"mb-3"}},methods:{getMessage:function(t,e,n){return t[0]?t[0]:n}}},o=n(76),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("ValidationProvider",{attrs:{vid:t.vid,name:t.$attrs.name||t.$attrs.label,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.errors,o=n.valid;return[e("b-field",t._b({class:t.margin,attrs:{type:{"is-danger":r[0],"is-success":o&&!t.$attrs.readonly},message:t.getMessage(r,o,t.$attrs.message)}},"b-field",t.$attrs,!1),[t._t("input",(function(){return[t.normal?e("b-input",t._b({model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}},"b-input",t.$attrs,!1)):e("b-input",t._b({on:{input:function(e){t.innerValue=t.innerValue.toUpperCase()}},model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}},"b-input",t.$attrs,!1))]}))],2)]}}],null,!0)})}),[],!1,null,null,null);e.default=component.exports},701:function(t,e,n){"use strict";n.r(e);n(61),n(58),n(59),n(38),n(70),n(60),n(71);var r=n(26),o=n(154);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={props:{handleSubmit:Function,saving:Boolean,firstStep:Boolean,saveLabel:{type:String,default:"Guardar"},saveType:{type:String,default:"is-success"},cancel:{type:Boolean,default:!0}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["buttonLoading"])),methods:{save:function(){this.$emit("save")},previous:function(){this.$emit("previous")},next:function(){this.$emit("next")}}},d=c,f=n(76),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column buttons"},[t.saving?e("b-field",{attrs:{position:"is-right"}},[e("b-button",{attrs:{type:"is-danger","native-type":"submit",outlined:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n        Cancelar\n      ")]),t._v(" "),e("b-button",{attrs:{type:t.saveType,"native-type":"submit",outlined:"",loading:t.buttonLoading},on:{click:function(e){return e.preventDefault(),t.handleSubmit(t.save)}}},[t._v("\n        "+t._s(t.saveLabel)+"\n      ")])],1):e("b-field",{attrs:{position:"is-right"}},[e("b-button",{attrs:{disabled:t.firstStep,type:"is-dark","native-type":"submit",outlined:""},on:{click:t.previous}},[t._v("\n        Anterior\n      ")]),t._v(" "),e("b-button",{attrs:{type:"is-info","native-type":"submit",outlined:""},on:{click:function(e){return t.handleSubmit(t.next)}}},[t._v("\n        Siguiente\n      ")])],1)],1)])}),[],!1,null,null,null);e.default=component.exports},794:function(t,e,n){"use strict";n.r(e);n(128),n(58),n(188);var r=n(5),o=(n(138),n(96),n(155),n(38),n(60),n(59),n(207),n(238),n(239),n(392),n(117),n(129),n(501),n(393),n(34),n(697)),l=(n(698),n(696)),c={name:"NewBinnacle",props:{plannification:{type:String,default:null},activeModal:{type:Boolean,default:!1},isExtraordinary:{type:Boolean,default:!1}},data:function(){return{form:{date:new Date,status:"por-revisar",isprocessed:"No"},activeAddParticipant:!1,formParticipant:{},isLoadingParticipant:!1,isLoading:!1,hourInit:new Date,hourEnd:new Date,isSwitched:!0,validateHours:!1,formCoord:{},temporalPoint:[224190.791,2311022.379],ViewPoint:[-89.60984537598705,20.85610769792424],viewActive:!1,pointsMap:[[-89.60984537598705,20.85610769792424]],points:[],idPoints:[],zoom:12,center:[-89.60984537598705,20.85610769792424],rotation:0,vehicles:[],vehiclesFilter:[],vegetation:[],vegetationFilter:[],legalZones:[],legalZonesFilter:[],subZones:[],subZonesFilter:[],opZones:[],opZonesFilter:[],participants:[],participantsFilter:[],files:[],vegetableAffected:[],temporalFiles:[],features:[{type:"Feature",geometry:{type:"Polygon",coordinates:o}}],estados:[{label:"Revisado",value:"revisado"},{label:"En revisión",value:"en-revision"},{label:"Por revisar",value:"por-revisar"}],incidents:[],incidentsFilter:[]}},watch:{isActive:function(t,e){t&&!this.isExtraordinary?this.form.idplanification=this.plannification:this.isExtraordinary&&(this.form.isextraordinary=!0)}},mounted:function(){this.hourEnd.setHours(this.hourEnd.getHours()+1),this.center=this.point?this.point:[0,0],this.plannification&&(this.form.idplanification=this.plannification),this.getUser(),this.getVehicles(),this.getParticipants(),this.getVegetation(),this.getSubZones(),this.getOpZones(),this.getIncidents()},methods:{close:function(){this.form={date:new Date,status:"por-revisar",isprocessed:"No",idplanification:this.plannification?this.plannification:null},this.viewActive=!1,this.files=[],this.vegetableAffected=[],this.temporalPoint=[224190.791,2311022.379],this.ViewPoint=[-89.60984537598705,20.85610769792424],this.pointsMap=[[-89.60984537598705,20.85610769792424]],this.points=[],this.idPoints=[],this.vehiclesFilter=this.vehicles,this.vegetationFilter=this.vegetation,this.legalZonesFilter=this.legalZones,this.subZonesFilter=this.subZones,this.opZonesFilter=this.opZones,this.participantsFilter=this.participants,this.temporalFiles=[],this.$emit("close")},getUser:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/users/getData");case 3:n=e.sent,t.form.iduser=n.idusers,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},createOrUpdate:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,c,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.form.hour_init=t.hourInit,t.form.hour_end=t.hourEnd,t.form.isprocessed="Si"===t.form.isprocessed?1:0,e.prev=4,e.next=7,t.$store.dispatch("modules/binnacles/createOrUpdateBinnacle",t.form);case 7:if(n=e.sent,!(t.points.length>0)){e.next=18;break}return e.next=11,t.getBinnacle(n);case 11:return r=e.sent,t.points.map((function(t){var e=t;return e.idbinnacle=n,e})),e.next=15,t.createPoints(t.points,n);case 15:return r.list_coordinates=t.idPoints,e.next=18,t.updateBinnacle(r);case 18:if(!(t.files.length>0)){e.next=40;break}return e.next=21,t.getBinnacle(n);case 21:return o=e.sent,l=new FormData,c=o.number.replace("/","-"),t.files.map((function(t,e){if("image/png"===t.type){var n=new File([t],"evidencia_"+(e+1)+"_bitacora_"+c+".png",{type:"image/png"});l.append("binnacle_photo[]",n)}else if("image/jpeg"===t.type){var r=new File([t],"evidencia_"+(e+1)+"_bitacora_"+c+".jpg",{type:"image/jpeg"});l.append("binnacle_photo[]",r)}})),t.files.forEach((function(e,r){t.temporalFiles.push({description:"evidencia_"+(r+1)+"_"+c,idbinnacle:n,position:r+1})})),o.list_image=t.temporalFiles,e.next=29,t.updateBinnacle(o);case 29:return d=e.sent,t.temporalFiles.forEach((function(t,e){l.append("idimages["+e+"]",d[e])})),e.next=33,t.uploadEvidences(l);case 33:if(!(t.vegetableAffected.length>0)){e.next=40;break}return e.next=36,t.getBinnacle(n);case 36:return(f=e.sent).list_vegetable_affected=t.vegetableAffected.map((function(t){return t.idbinnacle=n,t.description="",t})),e.next=40,t.updateBinnacle(f);case 40:t.form={date:new Date,status:"por-revisar",isprocessed:!1,idplanification:t.plannification?t.plannification:null},t.viewActive=!1,t.files=[],t.vegetableAffected=[],t.temporalPoint=[224190.791,2311022.379],t.ViewPoint=[-89.60984537598705,20.85610769792424],t.pointsMap=[[-89.60984537598705,20.85610769792424]],t.points=[],t.idPoints=[],t.vehiclesFilter=t.vehicles,t.vegetationFilter=t.vegetation,t.legalZonesFilter=t.legalZones,t.subZonesFilter=t.subZones,t.opZones=t.opZonesFilter,t.participantsFilter=t.participants,t.temporalFiles=[],t.$buefy.toast.open({message:"¡Bitácora guardada!",type:"is-success"}),t.buttonDisabled=!1,t.isLoading=!1,t.$emit("save"),e.next=65;break;case 62:e.prev=62,e.t0=e.catch(4),t.isLoading=!1;case 65:return e.prev=65,t.buttonDisabled=!1,t.isLoading=!1,e.finish(65);case 69:case"end":return e.stop()}}),e,null,[[4,62,65,69]])})))()},getBinnacle:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("modules/binnacles/getBinnacle",t);case 3:return r=n.sent,n.abrupt("return",r);case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})))()},updateBinnacle:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("modules/binnacles/createOrUpdateBinnacle",t);case 3:return r=n.sent,n.abrupt("return",r);case 7:n.prev=7,n.t0=n.catch(0),e.$buefy.toast.open({message:"Ocurrió un error, intente nuevamente",type:"is-danger"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getVehicles:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/vehicles/getVehicles");case 3:n=e.sent,t.vehicles=n,t.vehiclesFilter=n,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},filterVehicles:function(text){this.vehiclesFilter=this.vehicles.filter((function(option){if(option.number&&option.number.toString().toLowerCase().includes(text.toLowerCase()))return option}))},getParticipants:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/participants/getParticipants");case 3:n=e.sent,t.participants=n,t.participantsFilter=n,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},selectParticipant:function(option){this.form.idparticipants=option?option.idparticipants:null},removeParticipant:function(t){this.form.participants.splice(t,1)},filterParticipant:function(text){this.participantsFilter=this.participants.filter((function(option){if(option.name&&option.name.toString().toLowerCase().includes(text.toLowerCase()))return option}))},getOpZones:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/operativeZones/getZones");case 3:n=e.sent,t.opZonesFilter=n,t.opZones=n,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},filterOpZone:function(text){this.opZonesFilter=this.opZones.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},getSubZones:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/zones/getSubZones");case 3:n=e.sent,t.subZones=n,t.subZonesFilter=n,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},filterSubZones:function(text){this.subZonesFilter=this.subZones.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},getVegetation:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/vegetation/getVegetations");case 3:n=e.sent,t.vegetation=n,t.vegetationFilter=n,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},filterVegetation:function(text){this.vegetationFilter=this.vegetation.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},viewIamge:function(image){this.imageUrl=URL.createObjectURL(image)},deleteDropFile:function(t){this.files.splice(t,1)},uploadEvidences:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("modules/binnacles/uploadEvidences",t);case 3:r=n.sent,e.idEvidences=r,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.$buefy.toast.open({message:"Ocurrió un error, intente nuevamente",type:"is-danger"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},addPoint:function(){if(this.viewActive=!1,this.formCoord.name&&""!==this.formCoord.name){if(0===this.points.length){var t=this.convertCoordinatesToUtm([this.temporalPoint[0],this.temporalPoint[1]]);this.pointsMap=[t]}else{var e=this.convertCoordinatesToUtm([this.temporalPoint[0],this.temporalPoint[1]]);this.pointsMap.push(e)}this.formCoord.x=this.temporalPoint[0],this.formCoord.y=this.temporalPoint[1],this.points.push(this.formCoord),this.formCoord={name:"",x:0,y:0},this.temporalPoint=[224190.791,2311022.379]}else this.$buefy.toast.open({duration:4e3,message:"Es necesario asignar un nombre a las coordenadas",position:"is-bottom",type:"is-danger"})},deletePoint:function(t){1===this.pointsMap.length?(this.points=[],this.pointsMap=[[-89.60984537598705,20.85610769792424]]):(this.points.splice(t,1),this.pointsMap.splice(t,1))},createPoints:function(t,e){var n=this,o=t;try{o.forEach(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("modules/coordinates/createOrUpdateCoordinate",r);case 2:o=t.sent,n.idPoints.push({idcoordinates:o,idbinnacle:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$buefy.toast.open({message:"No se pudieron agregar las coordenadas, intente nuevamente",type:"is-danger"})}},convertCoordinatesToUtm:function(t){var e=l.toLatLon(t[0],t[1],"16","T");return[e.longitude,e.latitude]},convertCoordinatesFromUtm:function(t){},viewPoint:function(){this.ViewPoint=this.convertCoordinatesToUtm(this.temporalPoint),this.viewActive=!0},getIncidents:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/incidents/getIncidents");case 3:n=e.sent,t.incidents=n,t.incidentsFilter=n,console.log(t.incidents),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},filterIncident:function(text){this.incidentsFilter=this.incidents.filter((function(option){if(option.description&&option.description.toString().toLowerCase().includes(text.toLowerCase()))return option}))},createParticipant:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoadingParticipant=!0,e.next=4,t.$store.dispatch("modules/participants/createOrUpdateParticipant",t.formParticipant);case 4:t.$buefy.toast.open({message:"¡Ciudadano guardado!",type:"is-success"}),t.getParticipants(),t.formParticipant={},t.isLoadingParticipant=!1,t.activeAddParticipant=!1,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))()},cancelParticipant:function(){this.formParticipant={},this.activeAddParticipant=!1}}},d=c,f=n(76),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{"has-modal-card":"","can-cancel":!1,"full-screen":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[e("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!1},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}}),t._v(" "),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("\n        "+t._s(t.isExtraordinary?"Nueva bitácora extraordinaria":"Nueva bitácora")+"\n      ")])]),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(n){var r=n.handleSubmit;return[e("form",{on:{submit:function(t){return t.preventDefault(),r.apply(null,arguments)}}},[e("div",{staticClass:"divider"},[e("strong",[t._v("Estado de la bítacora")])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"Estado de la bitácora"}},[e("b-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.estados,(function(option){return e("option",{key:option.value,domProps:{value:option.value}},[t._v("\n                    "+t._s(option.label)+"\n                  ")])})),0)],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"¿Fue procesado?"}},[e("b-checkbox",{attrs:{"true-value":"Si","false-value":"No"},model:{value:t.form.isprocessed,callback:function(e){t.$set(t.form,"isprocessed",e)},expression:"form.isprocessed"}},[t._v("\n                  "+t._s(t.form.isprocessed)+"\n                ")])],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("BInputWithValidation",{attrs:{label:"Area (Ha)",name:"area","label-position":"inside",rules:"required",normal:""},model:{value:t.form.ha,callback:function(e){t.$set(t.form,"ha",e)},expression:"form.ha"}})],1)]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("BInputWithValidation",{attrs:{label:"Relatoría",name:"relatoría","label-position":"on-border",rules:"required",type:"textarea",normal:""},model:{value:t.form.rapporteur,callback:function(e){t.$set(t.form,"rapporteur",e)},expression:"form.rapporteur"}})],1)]),t._v(" "),e("div",{staticClass:"divider"},[e("strong",[t._v("Datos generales")])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4"},[e("b-field",{attrs:{label:"Fecha"}},[e("b-datepicker",{attrs:{inline:""},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),t._v(" "),e("div",{staticClass:"column is-3 is-flex is-flex-direction-column is-justify-content-center has-text-centered"},[e("b-notification",{attrs:{"aria-close-label":"Close notification"},model:{value:t.validateHours,callback:function(e){t.validateHours=e},expression:"validateHours"}},[t._v("\n                Es necesario que ingreses una hora de inicio y una hora de\n                fin.\n              ")]),t._v(" "),e("div",[e("b-field",{attrs:{label:"Hora de inicio"}},[e("b-timepicker",{attrs:{inline:""},model:{value:t.hourInit,callback:function(e){t.hourInit=e},expression:"hourInit"}})],1)],1),t._v(" "),e("br"),t._v(" "),e("div",[e("b-field",{attrs:{label:"Hora de finalización"}},[e("b-timepicker",{attrs:{inline:""},model:{value:t.hourEnd,callback:function(e){t.hourEnd=e},expression:"hourEnd"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"divider"},[e("strong",[t._v("Personal y vehiculos")])]),t._v(" "),e("br"),t._v(" "),e("b-field",{attrs:{label:"Responsable"}},[e("b-autocomplete",{attrs:{data:t.participantsFilter,icon:"magnify",clearable:"",field:"name","open-on-focus":""},on:{typing:t.filterParticipant,select:t.selectParticipant},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v("\n                    No hay resultados\n                  ")]},proxy:!0}],null,!0)})],1),t._v(" "),e("b-field",{attrs:{label:"Vehículos utilizados"}},[e("b-taginput",{attrs:{data:t.vehiclesFilter,field:"number",autocomplete:"","open-on-focus":!0},on:{typing:t.filterVehicles},scopedSlots:t._u([{key:"default",fn:function(n){return[e("strong",[t._v(t._s(n.option.number)+" -\n                      "+t._s(n.option.plates?n.option.plates:"sin placas reigstradas"))])]}},{key:"empty",fn:function(){return[t._v("\n                    Sin resultados\n                  ")]},proxy:!0}],null,!0),model:{value:t.form.list_vehicle,callback:function(e){t.$set(t.form,"list_vehicle",e)},expression:"form.list_vehicle"}})],1),t._v(" "),e("b-field",{attrs:{label:"Ciudadanos"}},[e("b-taginput",{attrs:{data:t.participantsFilter,field:"name",autocomplete:"","open-on-focus":!0},on:{typing:t.filterParticipant},scopedSlots:t._u([{key:"default",fn:function(n){return[e("strong",[t._v(t._s(n.option.name)+"\n                      "+t._s(n.option.lastname))])]}},{key:"empty",fn:function(){return[t._v("\n                    Sin resultados\n                  ")]},proxy:!0},{key:"selected",fn:function(){return t._l(t.form.participants,(function(n,r){return e("b-tag",{key:r,attrs:{closable:""},on:{close:function(e){return t.removeParticipant(r)}}},[t._v("\n                      "+t._s(n.name)+" "+t._s(n.lastname)+"\n                    ")])}))},proxy:!0}],null,!0),model:{value:t.form.participants,callback:function(e){t.$set(t.form,"participants",e)},expression:"form.participants"}})],1),t._v(" "),t.activeAddParticipant?t._e():e("b-button",{attrs:{type:"is-primary is-ligth"},on:{click:function(e){t.activeAddParticipant=!0}}},[t._v("\n                Agregar ciudadano\n              ")]),t._v(" "),t.activeAddParticipant?e("div",{staticClass:"card"},[e("header",{staticClass:"card-header"},[e("p",{staticClass:"card-header-title"},[e("strong",[t._v("Agregar Ciudadano")])])]),t._v(" "),e("div",{staticClass:"card-content"},[e("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!1},model:{value:t.isLoadingParticipant,callback:function(e){t.isLoadingParticipant=e},expression:"isLoadingParticipant"}}),t._v(" "),e("form",[e("b-field",{attrs:{horizontal:"",label:"Nombre"}},[e("b-input",{attrs:{name:"Nombre",type:"text"},model:{value:t.formParticipant.name,callback:function(e){t.$set(t.formParticipant,"name",e)},expression:"formParticipant.name"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Apellido"}},[e("b-input",{attrs:{name:"Nombre",type:"text"},model:{value:t.formParticipant.lastname,callback:function(e){t.$set(t.formParticipant,"lastname",e)},expression:"formParticipant.lastname"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Calle"}},[e("b-input",{attrs:{name:"Calle",type:"text"},model:{value:t.formParticipant.street,callback:function(e){t.$set(t.formParticipant,"street",e)},expression:"formParticipant.street"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Número"}},[e("b-input",{attrs:{name:"Número",type:"text"},model:{value:t.formParticipant.number,callback:function(e){t.$set(t.formParticipant,"number",e)},expression:"formParticipant.number"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Colonia"}},[e("b-input",{attrs:{name:"Colonia",type:"text"},model:{value:t.formParticipant.settle,callback:function(e){t.$set(t.formParticipant,"settle",e)},expression:"formParticipant.settle"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Municipio"}},[e("b-input",{attrs:{name:"Municipio",type:"text"},model:{value:t.formParticipant.municipality,callback:function(e){t.$set(t.formParticipant,"municipality",e)},expression:"formParticipant.municipality"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Estado"}},[e("b-input",{attrs:{name:"Estado",type:"text"},model:{value:t.formParticipant.state,callback:function(e){t.$set(t.formParticipant,"state",e)},expression:"formParticipant.state"}})],1),t._v(" "),e("b-field",{attrs:{horizontal:"",label:"Código postal"}},[e("b-input",{attrs:{name:"Código postal",type:"text"},model:{value:t.formParticipant.zip_code,callback:function(e){t.$set(t.formParticipant,"zip_code",e)},expression:"formParticipant.zip_code"}})],1)],1)],1),t._v(" "),e("footer",{staticClass:"card-footer"},[e("div",{staticClass:"card-footer-item"},[e("b-button",{attrs:{type:"is-danger is-light"},on:{click:t.cancelParticipant}},[t._v("\n                      Cancelar\n                    ")])],1),t._v(" "),e("div",{staticClass:"card-footer-item"},[e("b-button",{attrs:{type:"is-success is-light"},on:{click:t.createParticipant}},[t._v("\n                      Agregar\n                    ")])],1)])]):t._e()],1)]),t._v(" "),e("div",{staticClass:"divider"},[e("strong",[t._v("Vegetación y zonas")])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"Vegetación"}},[e("b-taginput",{attrs:{data:t.vegetationFilter,field:"description",autocomplete:"","open-on-focus":!0},on:{typing:t.filterVegetation},scopedSlots:t._u([{key:"default",fn:function(n){return[e("strong",[t._v(t._s(n.option.description))])]}},{key:"empty",fn:function(){return[t._v("\n                    Sin resultados\n                  ")]},proxy:!0}],null,!0),model:{value:t.vegetableAffected,callback:function(e){t.vegetableAffected=e},expression:"vegetableAffected"}})],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"Ilícitos"}},[e("b-taginput",{attrs:{data:t.incidentsFilter,field:"description",autocomplete:"","open-on-focus":!0},on:{typing:t.filterIncident},scopedSlots:t._u([{key:"default",fn:function(n){return[e("strong",[t._v(t._s(n.option.description))])]}},{key:"empty",fn:function(){return[t._v("\n                    Sin resultados\n                  ")]},proxy:!0}],null,!0),model:{value:t.form.list_incidents,callback:function(e){t.$set(t.form,"list_incidents",e)},expression:"form.list_incidents"}})],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"Zonas operativas"}},[e("b-taginput",{attrs:{data:t.opZonesFilter,field:"description",autocomplete:"","open-on-focus":!0},on:{typing:t.filterOpZone},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v("\n                    Sin resultados\n                  ")]},proxy:!0}],null,!0),model:{value:t.form.list_operative_zones,callback:function(e){t.$set(t.form,"list_operative_zones",e)},expression:"form.list_operative_zones"}})],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"Subzonificación PM"}},[e("b-taginput",{attrs:{data:t.subZonesFilter,field:"description",autocomplete:"","open-on-focus":!0},on:{typing:t.filterSubZones},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v("\n                    Sin resultados\n                  ")]},proxy:!0}],null,!0),model:{value:t.form.list_subzoning,callback:function(e){t.$set(t.form,"list_subzoning",e)},expression:"form.list_subzoning"}})],1)],1)]),t._v(" "),e("div",{staticClass:"divider"},[e("strong",[t._v("Coordenadas")])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4"},[e("b-notification",{attrs:{type:"is-info","has-icon":"",closable:!1}},[t._v("\n                Ingrese las coordenadas en formato UTM.\n              ")]),t._v(" "),e("div",{staticClass:"container"},[e("b-field",{attrs:{label:"Descripción breve de la coordenada"}},[e("b-input",{model:{value:t.formCoord.name,callback:function(e){t.$set(t.formCoord,"name",e)},expression:"formCoord.name"}})],1),t._v(" "),e("b-field",{attrs:{label:t.isSwitched?"Longitud":"Coordenada X"}},[e("b-numberinput",{attrs:{step:"0.000000000000000001",controls:!1},model:{value:t.temporalPoint[0],callback:function(e){t.$set(t.temporalPoint,0,e)},expression:"temporalPoint[0]"}})],1),t._v(" "),e("b-field",{attrs:{label:t.isSwitched?"Latitud":"Coordenada Y"}},[e("b-numberinput",{attrs:{step:"0.000000000000000001",controls:!1},model:{value:t.temporalPoint[1],callback:function(e){t.$set(t.temporalPoint,1,e)},expression:"temporalPoint[1]"}})],1)],1),t._v(" "),e("div",{staticClass:"container m-3 has-text-centered"},[e("b-button",{attrs:{type:"is-success is-light"},on:{click:t.addPoint}},[t._v("\n                  Agregar coordenada\n                ")]),t._v(" "),e("b-button",{attrs:{type:"is-info is-light"},on:{click:t.viewPoint}},[t._v("\n                  Ver punto\n                ")])],1),t._v(" "),t._l(t.points,(function(n){return e("div",{key:n.name,staticClass:"container m-3"},[e("div",{staticClass:"control"},[e("b-tag",{attrs:{type:"is-primary",attached:"","aria-close-label":"Close tag",closable:""},on:{close:t.deletePoint,click:function(e){return t.viewPoint(n)}}},[t._v("\n                    "+t._s(n.name)+"\n                  ")])],1)])}))],2),t._v(" "),e("div",{staticClass:"column is-8"},[e("vl-map",{staticStyle:{height:"400px"},attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326"}},[e("vl-view",{attrs:{zoom:t.zoom,center:t.ViewPoint,rotation:t.rotation},on:{"update:zoom":function(e){t.zoom=e},"update:center":function(e){t.ViewPoint=e},"update:rotation":function(e){t.rotation=e}}}),t._v(" "),e("vl-layer-tile",[e("vl-source-osm")],1),t._v(" "),t.viewActive?e("vl-feature",[e("vl-geom-point",{attrs:{coordinates:t.ViewPoint}}),t._v(" "),e("vl-style",[e("vl-style-circle",{attrs:{radius:5}},[e("vl-style-fill",{attrs:{color:"green"}}),t._v(" "),e("vl-style-stroke",{attrs:{color:"green"}})],1)],1)],1):t._e(),t._v(" "),e("vl-feature",[e("vl-geom-multi-point",{attrs:{coordinates:t.pointsMap}}),t._v(" "),e("vl-style",[e("vl-style-circle",{attrs:{radius:5}},[e("vl-style-fill",{attrs:{color:"red"}}),t._v(" "),e("vl-style-stroke",{attrs:{color:"red"}})],1)],1)],1),t._v(" "),e("vl-layer-vector",[e("vl-source-vector",{attrs:{features:t.features},on:{"update:features":function(e){t.features=e}}})],1)],1)],1)]),t._v(" "),e("div",{staticClass:"divider"},[e("strong",[t._v("Evidencias")])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-6"},[e("section",[e("b-field",[e("b-upload",{attrs:{multiple:"","drag-drop":""},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[e("section",{staticClass:"section"},[e("div",{staticClass:"content has-text-centered"},[e("p",[e("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),t._v(" "),e("p",[t._v("\n                          Arrastra aquí tus imágenes o has click aquí para\n                          subirlas.\n                        ")])])])])],1),t._v(" "),t._l(t.files,(function(n,r){return e("div",{key:n,staticClass:"tags"},[e("b-tag",{attrs:{type:"is-primary",attached:"","aria-close-label":"Borrar elemento",closable:""},on:{close:function(e){return t.deleteDropFile(r)},click:function(e){return t.viewIamge(n)}}},[t._v("\n                    "+t._s(r+1)+" - "+t._s(n.name)+"\n                  ")])],1)}))],2)])]),t._v(" "),e("ButtonGroup",{attrs:{"handle-submit":r,saving:""},on:{save:t.createOrUpdate,cancel:t.close}})],1)]}}])})],1)])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BInputWithValidation:n(695).default,ButtonGroup:n(701).default})}}]);