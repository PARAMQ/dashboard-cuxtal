(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{1181:function(t,e,n){"use strict";n(894)},1182:function(t,e,n){var c=n(166),r=n(494),l=n(679),o=c((function(i){return i[1]})),d=r(l);o.push([t.i,".scroll{height:400px;overflow-y:scroll}.card.is-principal{width:1000px}.card,.card.is-principal{background-color:#fff!important}.is-card-binnacle{min-width:300px}.hero.is-cuxtal{background-color:rgba(4,3,3,.604);background-image:url("+d+");background-origin:content-box;background-position:50%;background-repeat:no-repeat;background-size:100%}.modal-background{background-color:rgba(0,0,0,.568)}.cont{margin-left:auto;margin-right:auto}.animation-content.modal-content{max-width:1200px!important}",""]),o.locals={},t.exports=o},1246:function(t,e,n){"use strict";n.r(e);n(128),n(58),n(188);var c=n(5),r=(n(34),n(59),n(38),n(207),n(237),n(238),{name:"Programmed",data:function(){return{idPlanification:this.$route.query.id,hasEdit:!1,idBinnacle:"",isActiveEdit:!1,hasSelect:!1,binnacleSelect:{},vehicles:[],participants:[],filteredParticipants:[],binnacles:[],isActive:!1,zoom:12,center:[0,0],point:[-89.60984537598705,20.85610769792424],rotation:0,options:[{label:"Finalizado",value:"success"},{label:"En proceso",value:"warning"},{label:"Programado",value:"info"},{label:"Sin estado",value:null}]}},created:function(){},mounted:function(){this.getData(),this.getVehicles(),this.getParticipants()},methods:{getData:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/binnacles/getBinnacles");case 3:n=e.sent,c=n.filter((function(t){return t.isextraordinary&&"programmed"===t.type})),t.binnacles=c,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},refresh:function(){this.isActive=!1,this.isActiveEdit=!1,this.idBinnacle="",this.binnacleSelect={},this.getData()},editBinnacle:function(){this.isActiveEdit=!0},deleteBinnacle:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.plan.binnacles_deleted?t.plan.binnacles_deleted.push(t.plan.binnacles[t.indexBinnacle]):t.plan.binnacles_deleted=[t.plan.binnacles[t.indexBinnacle]],e.next=4,t.$store.dispatch("modules/plans/createOrUpdatePlan",t.plan);case 4:t.$buefy.toast.open({message:"¡Bitácora eliminada!",type:"is-success"}),t.hasSelect=!1,t.binnacleSelect={},t.refresh(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.$buefy.toast.open({message:"Ocurrió un error, intente más tarde",type:"is-danger"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},viewBinnacle:function(t,e){this.hasSelect=!1,this.binnacleSelect={},this.hasSelect=!0,this.binaccleSelect=t,this.idBinnacle=t.idbinnacle,this.indexBinnacle=e},getVehicles:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/vehicles/getVehicles");case 3:n=e.sent,t.vehicles=n,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},updateStatus:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/plans/createOrUpdatePlan",t.plan);case 3:t.$buefy.toast.open({message:"¡Estado actualizado!",type:"is-success"}),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))()},getParticipants:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/participants/getParticipants");case 3:n=e.sent,t.participants=n,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},filterData:function(text){this.filteredParticipants=this.participants.filter((function(option){if(option.name.toString().toLowerCase().includes(text.toLowerCase()))return option}))},cancelEdit:function(){this.hasEdit=!1,this.hasSelect=!1,this.refresh()},saveEdit:function(){},viewPoint:function(t){this.point=[t.x,t.y]},deletePlan:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("modules/plans/deletePlan",t.plan);case 3:t.$buefy.toast.open({message:"¡Planificación eliminada!",type:"is-success"}),t.$router.push("/calendar"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.$buefy.toast.open({message:"Ocurrió un error, intente más tarde",type:"is-danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}}),l=(n(1181),n(89)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"hero is-cuxtal"},[t.hasEdit?t.hasEdit?e("div",{staticClass:"cont"},[e("div",{staticClass:"card is-principal m-2"},[e("div",{staticClass:"card-header"},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"},[e("div",{staticClass:"level-item"},[e("p",{staticClass:"card-header-title"},[e("strong",[t._v(t._s(t.binnacleSelect.number))])])])]),t._v(" "),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("b-button",{attrs:{size:"is-small",type:"is-light","icon-right":"keyboard-return"},on:{click:t.cancelEdit}},[t._v("\n                Regresar\n              ")])],1),t._v(" "),e("div",{staticClass:"level-item"},[e("b-button",{attrs:{size:"is-small",type:"is-success is-light","icon-right":"content-save"},on:{click:t.saveEdit}},[t._v("\n                Guardar\n              ")])],1)])])]),t._v(" "),e("div",{staticClass:"card-content"})])]):t._e():e("div",{staticClass:"cont"},[e("div",{staticClass:"card is-principal m-2"},[t._m(0),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"}),t._v(" "),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("b-button",{on:{click:function(e){t.isActive=!0}}},[t._v("\n                Nueva bitácora programada\n              ")])],1)])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-content scroll"},t._l(t.binnacles,(function(n,c){return e("div",{key:n.idbinnacle,staticClass:"container"},[e("div",{staticClass:"card",on:{click:function(e){return t.viewBinnacle(n,c)}}},[e("div",{staticClass:"card-content"},[e("p",[e("strong",[t._v("Folio:")]),t._v(" "+t._s(n.number))])])])])})),0)])]),t._v(" "),e("div",{staticClass:"column is-8 has-text-centered"},[t.hasSelect?e("div",{staticClass:"card is-card-binnacle"},[e("div",{staticClass:"card-header"},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"},[e("div",{staticClass:"level-item"},[e("p",{staticClass:"card-header-title"},[t._v("\n                        "+t._s(t.binaccleSelect.number)+"\n                      ")])])]),t._v(" "),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("b-button",{attrs:{size:"is-small",type:"is-info is-light","icon-right":"pencil-outline"},on:{click:t.editBinnacle}})],1),t._v(" "),e("div",{staticClass:"level-item"},[e("b-button",{attrs:{size:"is-small",type:"is-danger is-light","icon-right":"delete"},on:{click:t.deleteBinnacle}})],1)])])]),t._v(" "),e("div",{staticClass:"card-content"},[e("div",[t._m(1),t._v(" "),e("p",[e("strong",[t._v("Estado actual de la bitácora:")]),t._v("\n                    "+t._s(t._f("statusBinnacle")(t.binaccleSelect.status))+"\n                  ")]),t._v(" "),e("p",[e("strong",[t._v("Fecha:")]),t._v(" "+t._s(t.binaccleSelect.date))]),t._v(" "),e("p",[e("strong",[t._v("Hora de inicio:")]),t._v("\n                    "+t._s(t._f("getTime")(t.binaccleSelect.hour_init))+"\n                  ")]),t._v(" "),e("p",[e("strong",[t._v("Hora de finalización")]),t._v("\n                    "+t._s(t._f("getTime")(t.binaccleSelect.hour_end))+"\n                  ")])]),t._v(" "),t._m(2),t._v(" "),e("div",[t.binaccleSelect.list_vehicle&&t.binaccleSelect.list_vehicle.length>0?e("div",[e("p",{staticClass:"subtitle"},[t._v("\n                      Vehículos:\n                    ")]),t._v(" "),t._l(t.binaccleSelect.list_vehicle,(function(n){return e("div",{key:n.idvehicle},[e("b-taglist",{staticClass:"m-2",attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-light"}},[t._v("\n                          "+t._s(n.number)+"\n                        ")]),t._v(" "),e("b-tag",{attrs:{type:"is-info"}},[t._v("\n                          "+t._s(n.model)+" - "+t._s(n.brand)+"\n                        ")])],1)],1)}))],2):e("div",[t._v("\n                    No hay vehiculos asociados\n                  ")])]),t._v(" "),t._m(3),t._v(" "),e("div",[t.binaccleSelect.participants&&t.binaccleSelect.participants.length>0?e("div",[e("p",{staticClass:"subtitle"},[t._v("\n                      Participantes:\n                    ")]),t._v(" "),t._l(t.binaccleSelect.participants,(function(n){return e("div",{key:n.idparticipant,staticClass:"has-text-centered"},[e("p",[t._v(t._s(n.name)+" "+t._s(n.lastname))])])}))],2):e("div",[t._v("\n                    No hay participantes asociados\n                  ")])]),t._v(" "),t._m(4),t._v(" "),e("div",[t.binaccleSelect.coordinates_binnacle?e("div",[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-3"},t._l(t.binaccleSelect.coordinates_binnacle,(function(n){return e("div",{key:n.idcoordinates},[e("b-tag",{staticClass:"m-2",on:{click:function(e){return t.viewPoint(n)}}},[t._v("\n                            "+t._s(n.name)+"\n                          ")])],1)})),0),t._v(" "),e("div",{staticClass:"column is-9"},[e("vl-map",{staticStyle:{height:"400px"},attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326"}},[e("vl-view",{attrs:{zoom:t.zoom,center:t.point,rotation:t.rotation},on:{"update:center":function(e){t.point=e}}}),t._v(" "),e("vl-layer-tile",{attrs:{id:"osm"}},[e("vl-source-osm")],1),t._v(" "),e("vl-feature",{attrs:{id:"point",properties:{prop:"value",prop2:"value"}}},[e("vl-geom-point",{attrs:{coordinates:t.point}})],1)],1)],1)])]):e("div",[t._v("\n                    sd No hay coordenadas asociadas\n                  ")])]),t._v(" "),t._m(5),t._v(" "),e("div",[t.binaccleSelect.list_image&&t.binaccleSelect.list_image.length>0?e("div",[e("b-carousel",{attrs:{"indicator-inside":!1},scopedSlots:t._u([{key:"indicators",fn:function(t){return[e("b-image",{staticClass:"al image",attrs:{src:t.path,title:t.description}})]}}],null,!1,4097915945)},t._l(t.binaccleSelect.list_image,(function(t){return e("b-carousel-item",{key:t.idimage},[e("b-image",{staticClass:"image",attrs:{src:t.path}})],1)})),1)],1):e("div",[t._v("\n                    No hay evidencias\n                  ")])])])]):e("div",[e("p",[t._v("Selecciona una bitácora")])])])])])])]),t._v(" "),e("new-binnacle",{attrs:{"active-modal":t.isActive,"is-extraordinary":!0,type:"programmed"},on:{update:t.refresh,close:function(e){t.isActive=!1}}}),t._v(" "),e("edit-binnacle",{attrs:{"active-modal":t.isActiveEdit,"id-binnacle":t.idBinnacle,"is-extraordinary":!0,type:"programmed"},on:{update:t.refresh,close:function(e){t.isActiveEdit=!1}}})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("div",{staticClass:"card-header-title"},[t("p",{staticClass:"subtitle"},[t("strong",[this._v("Programadas")])])])])},function(){var t=this._self._c;return t("div",{staticClass:"divider"},[t("p",[this._v("Datos generales")])])},function(){var t=this._self._c;return t("div",{staticClass:"divider"},[t("p",[this._v("Vehículos")])])},function(){var t=this._self._c;return t("div",{staticClass:"divider"},[t("p",[this._v("Participantes")])])},function(){var t=this._self._c;return t("div",{staticClass:"divider"},[t("p",[this._v("Coordenadas")])])},function(){var t=this._self._c;return t("div",{staticClass:"divider"},[t("p",[this._v("Evidencias")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{NewBinnacle:n(777).default,EditBinnacle:n(900).default})},679:function(t,e,n){t.exports=n.p+"img/background.461462f.jpg"},894:function(t,e,n){var content=n(1182);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(167).default)("025dd737",content,!0,{sourceMap:!1})}}]);