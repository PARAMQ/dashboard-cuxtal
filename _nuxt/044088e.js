(window.webpackJsonp=window.webpackJsonp||[]).push([[101,64],{1202:function(t,e,n){"use strict";n.r(e);var r=n(5),c=(n(35),n(136),n(938),{name:"Calendar",data:function(){return{activeModal:!1,isActive:!1,isLoadingPlans:!1,plans:[],plan:{},datesSelect:[]}},created:function(){},mounted:function(){this.plans=[],this.getAllPlans()},methods:{editPlan:function(t){this.$router.push("/planification/editPlanification/?id="+t.idplanification)},getAllPlans:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoadingPage=!0,e.next=4,t.$store.dispatch("modules/plans/getAllPlans");case 4:n=e.sent,(r=n.map((function(t){return t.date_register=new Date(t.date_register),t}))).sort((function(a,b){return b.date_register-a.date_register})),t.plans=[],t.plans=r,t.isLoadingPage=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},getData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoadingPlans=!0,e.next=4,t.$store.dispatch("modules/plans/getPlans",t.datesSelect);case 4:n=e.sent,t.plans=[],t.plans=n,t.isLoadingPlans=!1,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},updateView:function(){this.isActive=!1,this.getAllPlans()}}}),o=(n(942),n(89)),component=Object(o.a)(c,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"hero is-cuxtal"},[e("div",{staticClass:"container mt-4"},[e("div",{staticClass:"card p-2"},[e("div",{staticClass:"card-content"},[e("nav",{staticClass:"level"},[e("div",{staticClass:"level-left"}),t._v(" "),e("div",{staticClass:"level-right"},[e("p",{staticClass:"level-item"},[e("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:function(e){t.isActive=!0}}},[t._v("\n                Nuevo registro\n              ")])],1)])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!1},model:{value:t.isLoadingPlans,callback:function(e){t.isLoadingPlans=e},expression:"isLoadingPlans"}}),t._v(" "),e("div",{staticClass:"card-content scroll"},t._l(t.plans,(function(n){return e("div",{key:n.id,staticClass:"container"},[e("div",{staticClass:"card",on:{click:function(e){return t.editPlan(n)}}},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-2 is-flex is-flex-direction-column is-justify-content-center"},[e("b-tooltip",{attrs:{label:"process"===n.estatus?"En proceso":"finally"===n.estatus?"Finalizado":"active"===n.estatus?"Por comenzar":"Sin estado",type:"process"===n.estatus?"is-warning":"finally"===n.estatus?"is-danger":"active"===n.estatus?"is-success":"is-dark"}},[e("b-icon",{attrs:{icon:"routes-clock",size:"is-large",type:"process"===n.estatus?"is-warning":"finally"===n.estatus?"is-danger":"active"===n.estatus?"is-success":"is-dark"}})],1)],1),t._v(" "),e("div",{staticClass:"column m-2 has-text-centered"},[e("div",{staticClass:"m-2"},[e("div",[t._v("\n                                "+t._s(n.start_date)+"\n                              ")]),t._v(" "),e("div",[t._v("\n                                "+t._s(n.end_date)+"\n                              ")])])])])])]),t._v(" "),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"card-footer-item"},[e("p",[t._v("Creado el: "+t._s(t._f("shortDate")(n.date_register)))])])])])])})),0)],1)]),t._v(" "),e("div",{staticClass:"column is-flex is-flex-direction-row is-justify-content-center"},[e("div",{staticClass:"card"},[t._m(1),t._v(" "),e("div",{staticClass:"card-content"},[e("b-datepicker",{attrs:{inline:"",range:""},on:{input:t.getData},model:{value:t.datesSelect,callback:function(e){t.datesSelect=e},expression:"datesSelect"}})],1),t._v(" "),t._m(2)])])])])])]),t._v(" "),e("new-plan",{attrs:{"active-modal":t.isActive},on:{close:t.updateView}})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("div",{staticClass:"card-header-title"},[t("p",{staticClass:"subtitle"},[this._v("\n                    Recorridos programados\n                  ")])])])},function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("div",{staticClass:"card-header-title"},[t("p",{staticClass:"subtitle"},[this._v("\n                    Calendario\n                  ")])])])},function(){var t=this._self._c;return t("div",{staticClass:"card-footer"},[t("p",{staticClass:"card-footer-item has-text-grey"},[this._v("\n                  Puedes escoger un rango de fechas para ver más recorridos. Al principio verás todos los recorridos, ordenados por la fecha de registro, que se encuentran en el sistema.\n                ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{NewPlan:n(899).default})},678:function(t,e,n){t.exports=n.p+"img/background.461462f.jpg"},781:function(t,e,n){var content=n(943);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(166).default)("9f1b4be6",content,!0,{sourceMap:!1})},899:function(t,e,n){"use strict";n.r(e);n(61),n(58),n(59),n(38),n(70),n(60),n(71);var r=n(5),c=n(26),o=(n(35),n(152));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d={name:"Newplan",props:{activeModal:{default:!1,type:Boolean}},data:function(){return{form:{estatus:"active"},dates:[],isLoading:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["user"])),mounted:function(){this.form.idusers=this.user.idusers},methods:{createPlan:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,r=new Date(t.dates[0]),c=new Date(t.dates[1]),t.form.date_register=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),t.form.start_date=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),t.form.end_date=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),e.prev=6,t.isLoading=!0,e.next=10,t.$store.dispatch("modules/plans/createOrUpdatePlan",t.form);case 10:t.dates=[],t.isLoading=!1,t.$buefy.snackbar.open("¡Guardado!"),t.$emit("close"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),t.$buefy.snackbar.open("Ocurrió un problema, intente más tarde"),t.isLoading=!1;case 20:return e.prev=20,t.isLoading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[6,16,20,23]])})))()}}},v=d,f=n(89),component=Object(f.a)(v,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{"destroy-on-hide":!1},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[e("div",{staticClass:"card"},[e("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!0},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}}),t._v(" "),e("div",{staticClass:"card-header"},[e("p",{staticClass:"card-header-title"},[t._v("\n        Nuevo recorrido\n      ")])]),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"columns has-text-centered"},[e("div",{staticClass:"column"},[e("b-field",{attrs:{label:"Fechas del recorrido"}},[e("b-datepicker",{attrs:{inline:"",range:"",required:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1),t._v(" "),e("p",{staticClass:"has-text-grey"},[t._v("\n                Te recordamos seleccionar primero la fecha de inicio y\n                seguidamente la de finalización.\n              ")])],1)])])]),t._v(" "),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"card-footer-item"},[e("b-button",{on:{click:function(e){return t.$emit("close")}}},[t._v("\n            Cancelar\n          ")])],1),t._v(" "),e("div",{staticClass:"card-footer-item"},[e("b-button",{attrs:{type:"is-success"},on:{click:t.createPlan}},[t._v("\n            Guardar\n          ")])],1)])])],1)])}),[],!1,null,null,null);e.default=component.exports},938:function(t,e,n){"use strict";var r=n(33),c=n(39),o=n(168),l=n(137),d=n(169),v=n(502),f=n(75),m=n(40),h=n(501),_=n(392),C=n(939),k=n(940),x=n(267),y=n(941),w=[],P=c(w.sort),O=c(w.push),j=m((function(){w.sort(void 0)})),D=m((function(){w.sort(null)})),L=_("sort"),A=!m((function(){if(x)return x<70;if(!(C&&C>3)){if(k)return!0;if(y)return y<603;var code,t,e,n,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)w.push({k:t+n,v:e})}for(w.sort((function(a,b){return b.v-a.v})),n=0;n<w.length;n++)t=w[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));r({target:"Array",proto:!0,forced:j||!D||!L||!A},{sort:function(t){void 0!==t&&o(t);var e=l(this);if(A)return void 0===t?P(e):P(e,t);var n,r,c=[],m=d(e);for(r=0;r<m;r++)r in e&&O(c,e[r]);for(h(c,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:f(e)>f(n)?1:-1}}(t)),n=d(c),r=0;r<n;)e[r]=c[r++];for(;r<m;)v(e,r++);return e}})},939:function(t,e,n){var r=n(240).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},940:function(t,e,n){var r=n(240);t.exports=/MSIE|Trident/.test(r)},941:function(t,e,n){var r=n(240).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},942:function(t,e,n){"use strict";n(781)},943:function(t,e,n){var r=n(165),c=n(494),o=n(678),l=r((function(i){return i[1]})),d=c(o);l.push([t.i,".scroll{height:400px;overflow-y:scroll}.card{background-color:#fff!important}.hero.is-cuxtal{background-color:rgba(4,3,3,.604);background-image:url("+d+");background-origin:content-box;background-position:50%;background-repeat:no-repeat;background-size:100%}.modal-background{background-color:rgba(0,0,0,.568)}",""]),l.locals={},t.exports=l}}]);