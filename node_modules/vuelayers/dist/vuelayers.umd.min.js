/**
 * VueLayers
 * Web map Vue components with the power of OpenLayers
 *
 * @package vuelayers
 * @author Vladimir Vershinin <ghettovoice@gmail.com>
 * @version 0.12.7
 * @license MIT
 * @copyright (c) 2017-2023, Vladimir Vershinin <ghettovoice@gmail.com>
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ol"),require("ol/source"),require("ol/control"),require("ol/extent"),require("ol/format"),require("ol/geom"),require("ol/sphere"),require("ol/geom/Polygon"),require("ol/proj"),require("ol/style"),require("ol/interaction"),require("ol/layer/Base"),require("vue"),require("ol/util"),require("ol/loadingstrategy"),require("ol/tilegrid"),require("ol/events/condition"),require("ol/layer/Graticule"),require("ol/layer"),require("ol/size"),require("ol/tilegrid/WMTS")):"function"==typeof define&&define.amd?define("vuelayers",["ol","ol/source","ol/control","ol/extent","ol/format","ol/geom","ol/sphere","ol/geom/Polygon","ol/proj","ol/style","ol/interaction","ol/layer/Base","vue","ol/util","ol/loadingstrategy","ol/tilegrid","ol/events/condition","ol/layer/Graticule","ol/layer","ol/size","ol/tilegrid/WMTS"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).VueLayers=e(t.ol,t.ol.source,t.ol.control,t.ol.extent,t.ol.format,t.ol.geom,t.ol.sphere,t.ol.geom.Polygon,t.ol.proj,t.ol.style,t.ol.interaction,t.ol.layer.Base,t.Vue,t.ol.util,t.ol.loadingstrategy,t.ol.tilegrid,t.ol.events.condition,t.ol.layer.Graticule,t.ol.layer,t.ol.size,t.ol.tilegrid.WMTS)}(this,(function(t,e,i,n,o,s,a,l,u,c,h,d,m,p,f,v,y,w,S,$,P){"use strict";function I(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var j,O=I(d),x=I(m),C=I(w),T=I(P);const _=("undefined"!=typeof global?global:"undefined"!=typeof window?window:{}).isFinite||G,R=Object.prototype,F=Object.prototype,E=R.toString,V=R.hasOwnProperty,L=F.toString,A=(j={},E).call(j),N=(j=0,E).call(j),M=(j="",E).call(j),k=(j=!0,E).call(j),D=L.call(Object);function G(){}function U(t){return()=>t}function z(){return[]}function Z(){return Object.create(null)}function B(){return!0}function W(t){return t}function Y(t){return function(){return!t(...arguments)}}function q(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return vt(e,((t,e)=>t||e(...i)),!1)}}function X(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return vt(e,((t,e)=>t&&e(...i)),!0)}}function H(t){return E.call(t)===k}function J(t){return E.call(t)===N}function K(t){return E.call(t)===M}function Q(t){return Array.isArray(t)}function tt(t){return nt(t)&&V.call(t,"length")}function et(e){return e instanceof t.Collection}function it(t){return"function"==typeof t}function rt(t){return!isNaN(parseFloat(t))&&_(t)}function nt(t){return null!=t&&"object"==typeof t}function ot(t){if(!nt(t)||E.call(t)!==A)return!1;const e=Object.getPrototypeOf(t);if(null==e)return!0;const i=e.constructor;return"function"==typeof i&&i instanceof i&&L.call(i)===D}function st(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(t)?Number(e<0?t:Number(t).toFixed(e)):t}function at(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.find((t=>null!=t))}function lt(t,e){const i=new RegExp(Object.keys(e).map((t=>"(\\{"+t+"\\})")).join("|"),"ig");return t.replace(i,(t=>e[t.substr(1,t.length-2)]||""))}function ut(t,e){if(t===e)return!0;if(null==t||null==e||!nt(t)||!nt(e))return t!=t&&e!=e;const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;const n=[],o=(i,r)=>{for(let o=0,s=i.length;o<s;o++){const s=i[o];if(n.includes(s))continue;if(!1===V.call(e,s))return!1;const a=r[o];if(!ut(t[s],e[a]))return!1;n.push(a)}return!0};return!1!==o(i,r)&&o(r,i)}function ct(t){return et(t)&&(t=t.getArray()),tt(t)?t.length:0}function ht(t){return et(t)&&(t=t.getArray()),nt(t)&&(t=Object.values(t).filter(Y(ht))),!t||tt(t)&&0===ct(t)}function dt(t){return Object.keys(t)}function mt(t){return Object.seal(t)}function pt(t){return Object.freeze(t)}function ft(t){let e=t;return e.sealed||(e=function(){return mt(t(...arguments))},e.sealed=!0),e}function gt(t,e){et(t)&&(t=t.getArray());const i=Object.keys(t);for(let r=0,n=i.length;r<n;r++){const n=i[r];if(!1===e(t[n],n))return}}function vt(t,e,i){let r=i;return gt(t,((t,i)=>{r=e(r,t,i)})),r}function yt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y(ht);return vt(t,((t,i,r)=>(e(i,r)&&(Q(t)?t.push(i):t[r]=i),t)),tt(t)||et(t)?[]:{})}function bt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;const i=yt(t,e);return Q(i)?i[0]:i[dt(i)[0]]}function wt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return vt(t,((t,i,r)=>(t[r]=e(i,r),t)),tt(t)||et(t)?[]:{})}function St(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return vt(t,((t,i,r)=>t&&e(i,r)),!0)}function $t(t,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return vt(r=Array.isArray(e)?e:[e].concat(r),((e,i)=>(e[i]=t[i],e)),{})}function Pt(t,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return r=Array.isArray(e)?e:[e].concat(r),yt(t,((t,e)=>!r.includes(e)))}function It(t){return 0===(t=String(t)).length?"":t[0].toUpperCase()+t.slice(1)}function jt(t){return 0===(t=String(t)).length?"":t[0].toLowerCase()+t.slice(1)}function*Ot(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let r=t;r<e;r+=i)yield r}function xt(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array.from(Ot(t,e,i))}function Ct(t,e,i){const r=i=>String.prototype.split.call(e,i).filter(Boolean).reduce(((t,e)=>null!=t?t[e]:t),t),n=r(/[,[\]]+?/)||r(/[,[\].]+?/);return void 0===n||n===t?i:n}function Tt(t,e){return nt(t)&&e in t}function _t(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut,r=!1;return gt(t,(t=>{if(r=i(t,e),r)return!1})),r}function Rt(t){return t.replace(/([-_]\w)/g,(t=>t[1].toUpperCase()))}function Ft(t){return t.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map((t=>t.toLowerCase())).join("-")}function Et(t){return JSON.stringify(t)}function Vt(t){if(K(t))return JSON.parse(t)}function Lt(t){return Vt(Et(t))}function At(t){return e=>t+(t?It(e):e)}class Nt extends Error{constructor(t){super(t),this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack}}function Mt(t,e){if(!t)throw new Nt(e||"Assertion failed")}function kt(t,e,i){Mt(t instanceof e,i||`value is an instance of ${e.name}`)}function Dt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Gt{constructor(){Dt(this,"_pools",Object.create(null))}_preparePool(t){this._pools[t]||(this._pools[t]=Object.create(null))}set(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";null!=e&&(this._preparePool(i),this._pools[i][t]={value:e,refs:1})}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this._preparePool(e);const i=this._pools[e][t];if(i&&null!=i.value)return i.refs++,this._pools[e][t]=i,i.value}unset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this._preparePool(e);const i=this._pools[e][t];i&&null!=i.value&&(i.refs--,0===i.refs&&delete this._pools[e][t])}has(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this._preparePool(e),!!this._pools[e][t]}move(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return!(!this.has(t,i)||!e)&&(this._pools[i][e]=this._pools[i][t],delete this._pools[i][t],!0)}ids(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this._preparePool(t),Object.keys(this._pools[t])}refs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this._preparePool(e),this.has(t,e)?this._pools[e][t].refs:void 0}}const Ut=Wt("[VueLayers]"),zt=Yt("[VueLayers] WARN"),Zt=qt("[VueLayers] ERR");function Bt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{log:Wt(`[VueLayers] ${t}`),warn:Yt(`[VueLayers] WARN ${t}`),error:qt(`[VueLayers] ERR ${t}`)}}function Wt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];t&&(K(i[0])?i[0]=t.trim()+" "+i[0]:i=[t.trim(),...i]),console.log(...i)}}function Yt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];t&&(K(i[0])?i[0]=t.trim()+" "+i[0]:i=[t.trim(),...i]),console.warn(...i)}}function qt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];t&&(K(i[0])?i[0]=t.trim()+" "+i[0]:i=[t.trim(),...i]),console.error(...i)}}var Xt=function(t,e,i){if(!t)throw new TypeError("argument dest is required");if(!e)throw new TypeError("argument src is required");void 0===i&&(i=!0);return Object.getOwnPropertyNames(e).forEach((function(r){if(i||!Ht.call(t,r)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}})),t},Ht=Object.prototype.hasOwnProperty;function Jt(){let t;for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return"object"!=typeof i[i.length-1]&&(t=i.pop()),i.slice(1).reduce(((e,i,r)=>Xt(e,i,t)),i[0])}function Kt(t,e){return t.reduce(((t,i)=>(t[i]=e(i),t)),{})}function Qt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(t).reduce(((i,r)=>(e.length&&!e.includes(r)||(i=i.concat(t[r])),i)),[])}function te(t,e){return!!ee(t,e)||!!t.$parent&&te(t.$parent,e)}function ee(t,e){return!e||(K(e)?t.$options.name===e:e===t)}var ie=function(t,e){return ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ie(t,e)};function re(t,e){function i(){this.constructor=t}ie(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function ne(t){return"function"==typeof t}var oe=!1,se={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;oe=t},get useDeprecatedSynchronousErrorHandling(){return oe}};function ae(t){setTimeout((function(){throw t}),0)}var le={closed:!0,next:function(t){},error:function(t){if(se.useDeprecatedSynchronousErrorHandling)throw t;ae(t)},complete:function(){}},ue=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function ce(t){return null!==t&&"object"==typeof t}var he=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),de=he,me=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this,r=i._parentOrParents,n=i._ctorUnsubscribe,o=i._unsubscribe,s=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a){r[a].remove(this)}if(ne(o)){n&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){e=t instanceof de?pe(t.errors):[t]}}if(ue(s)){a=-1;for(var l=s.length;++a<l;){var u=s[a];if(ce(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof de?e=e.concat(pe(t.errors)):e.push(t)}}}if(e)throw new de(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var r=i;(i=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=i._parentOrParents;if(null===n)i._parentOrParents=this;else if(n instanceof t){if(n===this)return i;i._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return i;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[i]:o.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function pe(t){return t.reduce((function(t,e){return t.concat(e instanceof de?e.errors:e)}),[])}var fe=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ge=function(t){function e(i,r,n){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=le;break;case 1:if(!i){o.destination=le;break}if("object"==typeof i){i instanceof e?(o.syncErrorThrowable=i.syncErrorThrowable,o.destination=i,i.add(o)):(o.syncErrorThrowable=!0,o.destination=new ve(o,i));break}default:o.syncErrorThrowable=!0,o.destination=new ve(o,i,r,n)}return o}return re(e,t),e.prototype[fe]=function(){return this},e.create=function(t,i,r){var n=new e(t,i,r);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(me),ve=function(t){function e(e,i,r,n){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return ne(i)?o=i:i&&(o=i.next,r=i.error,n=i.complete,i!==le&&(ne((a=Object.create(i)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=n,s}return re(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;se.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=se.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):ae(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;ae(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};se.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),se.useDeprecatedSynchronousErrorHandling)throw t;ae(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!se.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return se.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(ae(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(ge);var ye=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function be(t){return t}function we(t){return 0===t.length?be:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Se=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var r=this.operator,n=function(t,e,i){if(t){if(t instanceof ge)return t;if(t[fe])return t[fe]()}return t||e||i?new ge(t,e,i):new ge(le)}(t,e,i);if(r?n.add(r.call(n,this.source)):n.add(this.source||se.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),se.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){se.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,i=e.closed,r=e.destination,n=e.isStopped;if(i||n)return!1;t=r&&r instanceof ge?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=$e(e))((function(e,r){var n;n=i.subscribe((function(e){try{t(e)}catch(t){r(t),n&&n.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[ye]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:we(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=$e(t))((function(t,i){var r;e.subscribe((function(t){return r=t}),(function(t){return i(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function $e(t){if(t||(t=se.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var Pe=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Ie=function(t){function e(e,i){var r=t.call(this)||this;return r.subject=e,r.subscriber=i,r.closed=!1,r}return re(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(me),je=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return re(e,t),e}(ge),Oe=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return re(e,t),e.prototype[fe]=function(){return new je(this)},e.prototype.lift=function(t){var e=new xe(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Pe;if(!this.isStopped)for(var e=this.observers,i=e.length,r=e.slice(),n=0;n<i;n++)r[n].next(t)},e.prototype.error=function(t){if(this.closed)throw new Pe;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,r=e.slice(),n=0;n<i;n++)r[n].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Pe;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),r=0;r<e;r++)i[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Pe;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Pe;return this.hasError?(t.error(this.thrownError),me.EMPTY):this.isStopped?(t.complete(),me.EMPTY):(this.observers.push(t),new Ie(this,t))},e.prototype.asObservable=function(){var t=new Se;return t.source=this,t},e.create=function(t,e){return new xe(t,e)},e}(Se),xe=function(t){function e(e,i){var r=t.call(this)||this;return r.destination=e,r.source=i,r}return re(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):me.EMPTY},e}(Oe);function Ce(){return function(t){return t.lift(new Te(t))}}var Te=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var r=new _e(t,i),n=e.subscribe(r);return r.closed||(r.connection=i.connect()),n},t}(),_e=function(t){function e(e,i){var r=t.call(this,e)||this;return r.connectable=i,r}return re(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var i=this.connection,r=t._connection;this.connection=null,!r||i&&r!==i||r.unsubscribe()}}else this.connection=null},e}(ge),Re=function(t){function e(e,i){var r=t.call(this)||this;return r.source=e,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return re(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new me).add(this.source.subscribe(new Ee(this.getSubject(),this))),t.closed&&(this._connection=null,t=me.EMPTY)),t},e.prototype.refCount=function(){return Ce()(this)},e}(Se),Fe=function(){var t=Re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),Ee=function(t){function e(e,i){var r=t.call(this,e)||this;return r.connectable=i,r}return re(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(je),Ve=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r.pending=!1,r}return re(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,r=void 0;try{this.work(t)}catch(t){i=!0,r=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return re(e,t),e.prototype.schedule=function(t,e){return this},e}(me)),Le=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r}return re(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,r):e.flush(this)},e}(Ve),Ae=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),Ne=function(t){function e(i,r){void 0===r&&(r=Ae.now);var n=t.call(this,i,(function(){return e.delegate&&e.delegate!==n?e.delegate.now():r()}))||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return re(e,t),e.prototype.schedule=function(i,r,n){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,r,n):t.prototype.schedule.call(this,i,r,n)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(Ae),Me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e}(Ne),ke=new Me(Le),De=new Se((function(t){return t.complete()}));function Ge(t){return t?function(t){return new Se((function(e){return t.schedule((function(){return e.complete()}))}))}(t):De}function Ue(t){return t&&"function"==typeof t.schedule}var ze=function(t){return function(e){for(var i=0,r=t.length;i<r&&!e.closed;i++)e.next(t[i]);e.complete()}};function Ze(t,e){return new Se((function(i){var r=new me,n=0;return r.add(e.schedule((function(){n!==t.length?(i.next(t[n++]),i.closed||r.add(this.schedule())):i.complete()}))),r}))}function Be(t,e){return e?Ze(t,e):new Se(ze(t))}function We(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return Ue(i)?(t.pop(),Ze(t,i)):Be(t)}function Ye(t,e){return new Se(e?function(i){return e.schedule(qe,0,{error:t,subscriber:i})}:function(e){return e.error(t)})}function qe(t){var e=t.error;t.subscriber.error(e)}var Xe=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return We(this.value);case"E":return Ye(this.error);case"C":return Ge()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),He=function(t){function e(e,i,r){void 0===r&&(r=0);var n=t.call(this,e)||this;return n.scheduler=i,n.delay=r,n}return re(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new Je(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(Xe.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(Xe.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(Xe.createComplete()),this.unsubscribe()},e}(ge),Je=function(){return function(t,e){this.notification=t,this.destination=e}}(),Ke=function(t){function e(e,i,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var n=t.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=e<1?1:e,n._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return re(e,t),e.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new Qe(this._getNow(),e)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,i=this._infiniteTimeWindow,r=i?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,o=r.length;if(this.closed)throw new Pe;if(this.isStopped||this.hasError?e=me.EMPTY:(this.observers.push(t),e=new Ie(this,t)),n&&t.add(t=new He(t,n)),i)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||ke).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,n=r.length,o=0;o<n&&!(t-r[o].time<i);)o++;return n>e&&(o=Math.max(o,n-e)),o>0&&r.splice(0,o),r},e}(Oe),Qe=function(){return function(t,e){this.time=t,this.value=e}}(),ti=new Ne(Ve);function ei(){}var ii=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),ri=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),ni=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}();function oi(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new si(t,e))}}var si=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new ai(t,this.project,this.thisArg))},t}(),ai=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.project=i,n.count=0,n.thisArg=r||n,n}return re(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(ge),li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(ge),ui=function(t){function e(e,i,r){var n=t.call(this)||this;return n.parent=e,n.outerValue=i,n.outerIndex=r,n.index=0,n}return re(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ge);function ci(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var hi=ci(),di=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function mi(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var pi=function(t){if(t&&"function"==typeof t[ye])return r=t,function(t){var e=r[ye]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(di(t))return ze(t);if(mi(t))return i=t,function(t){return i.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,ae),t};if(t&&"function"==typeof t[hi])return e=t,function(t){for(var i=e[hi]();;){var r=void 0;try{r=i.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof i.return&&t.add((function(){i.return&&i.return()})),t};var e,i,r,n=ce(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function fi(t,e,i,r,n){if(void 0===n&&(n=new ui(t,i,r)),!n.closed)return e instanceof Se?e.subscribe(n):pi(e)(n)}function gi(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[ye]}(t))return function(t,e){return new Se((function(i){var r=new me;return r.add(e.schedule((function(){var n=t[ye]();r.add(n.subscribe({next:function(t){r.add(e.schedule((function(){return i.next(t)})))},error:function(t){r.add(e.schedule((function(){return i.error(t)})))},complete:function(){r.add(e.schedule((function(){return i.complete()})))}}))}))),r}))}(t,e);if(mi(t))return function(t,e){return new Se((function(i){var r=new me;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){i.next(t),r.add(e.schedule((function(){return i.complete()})))})))}),(function(t){r.add(e.schedule((function(){return i.error(t)})))}))}))),r}))}(t,e);if(di(t))return Ze(t,e);if(function(t){return t&&"function"==typeof t[hi]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new Se((function(i){var r,n=new me;return n.add((function(){r&&"function"==typeof r.return&&r.return()})),n.add(e.schedule((function(){r=t[hi](),n.add(e.schedule((function(){if(!i.closed){var t,e;try{var n=r.next();t=n.value,e=n.done}catch(t){return void i.error(t)}e?i.complete():(i.next(t),this.schedule())}})))}))),n}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function vi(t,e){return e?gi(t,e):t instanceof Se?t:new Se(pi(t))}var yi=function(t){function e(e){var i=t.call(this)||this;return i.parent=e,i}return re(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(ge),bi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(ge);function wi(t,e){if(!e.closed){if(t instanceof Se)return t.subscribe(e);var i;try{i=pi(t)(e)}catch(t){e.error(t)}return i}}function Si(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(Si((function(i,r){return vi(t(i,r)).pipe(oi((function(t,n){return e(i,t,r,n)})))}),i))}:("number"==typeof e&&(i=e),function(e){return e.lift(new $i(t,i))})}var $i=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Pi(t,this.project,this.concurrent))},t}(),Pi=function(t){function e(e,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=t.call(this,e)||this;return n.project=i,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return re(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new yi(this),i=this.destination;i.add(e);var r=wi(t,e);r!==e&&i.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(bi);function Ii(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Si(be,t)}function ji(t,e,i){return i?ji(t,e).pipe(oi((function(t){return ue(t)?i.apply(void 0,t):i(t)}))):new Se((function(i){var r,n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.next(1===t.length?t[0]:t)};try{r=t(n)}catch(t){return void i.error(t)}if(ne(e))return function(){return e(n,r)}}))}function Oi(t,e){var i;return void 0===t&&(t=0),void 0===e&&(e=ti),(ue(i=t)||!(i-parseFloat(i)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=ti),new Se((function(i){return i.add(e.schedule(xi,t,{subscriber:i,counter:0,period:t})),i}))}function xi(t){var e=t.subscriber,i=t.counter,r=t.period;e.next(i),this.schedule({subscriber:e,counter:i+1,period:r},r)}function Ci(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Number.POSITIVE_INFINITY,r=null,n=t[t.length-1];return Ue(n)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof n&&(i=t.pop()),null===r&&1===t.length&&t[0]instanceof Se?t[0]:Ii(i)(Be(t,r))}var Ti=new Se(ei);function _i(t,e){return function(i){return i.lift(new Ri(t,e))}}var Ri=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Fi(t,this.predicate,this.thisArg))},t}(),Fi=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.predicate=i,n.thisArg=r,n.count=0,n}return re(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(ge);function Ei(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!ue(t[0]))return t[0];t=t[0]}return Be(t,void 0).lift(new Vi)}var Vi=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Li(t))},t}(),Li=function(t){function e(e){var i=t.call(this,e)||this;return i.hasFirst=!1,i.observables=[],i.subscriptions=[],i}return re(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var i=0;i<e&&!this.hasFirst;i++){var r=fi(this,t[i],void 0,i);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},e.prototype.notifyNext=function(t,e,i){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==i){var n=this.subscriptions[r];n.unsubscribe(),this.remove(n)}this.subscriptions=null}this.destination.next(e)},e}(li);var Ai=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ni(t,this.selector,this.caught))},t}(),Ni=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.selector=i,n.caught=r,n}return re(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=void 0;try{i=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new yi(this);this.add(r);var n=wi(i,r);n!==r&&this.add(n)}},e}(bi);function Mi(t,e){return void 0===e&&(e=ti),function(i){return i.lift(new ki(t,e))}}var ki=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Di(t,this.dueTime,this.scheduler))},t}(),Di=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.dueTime=i,n.scheduler=r,n.debouncedSubscription=null,n.lastValue=null,n.hasValue=!1,n}return re(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Gi,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(ge);function Gi(t){t.debouncedNext()}function Ui(t){return void 0===t&&(t=null),function(e){return e.lift(new zi(t))}}var zi=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Zi(t,this.defaultValue))},t}(),Zi=function(t){function e(e,i){var r=t.call(this,e)||this;return r.defaultValue=i,r.isEmpty=!0,r}return re(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(ge);function Bi(t){return t instanceof Date&&!isNaN(+t)}var Wi=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Yi(t,this.delay,this.scheduler))},t}(),Yi=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.delay=i,n.scheduler=r,n.queue=[],n.active=!1,n.errored=!1,n}return re(e,t),e.dispatch=function(t){for(var e=t.source,i=e.queue,r=t.scheduler,n=t.destination;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(n);if(i.length>0){var o=Math.max(0,i[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,i=new qi(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(Xe.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(Xe.createComplete()),this.unsubscribe()},e}(ge),qi=function(){return function(t,e){this.time=t,this.notification=e}}();var Xi=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Hi(t,this.delayDurationSelector))},t}(),Hi=function(t){function e(e,i){var r=t.call(this,e)||this;return r.delayDurationSelector=i,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return re(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.destination.next(t),this.removeSubscription(n),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var i=this.delayDurationSelector(t,e);i&&this.tryDelay(i,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var i=fi(this,t,e);i&&!i.closed&&(this.destination.add(i),this.delayNotifierSubscriptions.push(i))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(li),Ji=function(t){function e(e,i){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=i,r}return re(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new Ki(t,this.source))},e}(Se),Ki=function(t){function e(e,i){var r=t.call(this)||this;return r.parent=e,r.source=i,r.sourceSubscribed=!1,r}return re(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(ge);function Qi(t,e){return function(i){return i.lift(new tr(t,e))}}var tr=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new er(t,this.compare,this.keySelector))},t}(),er=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.keySelector=r,n.hasKey=!1,"function"==typeof i&&(n.compare=i),n}return re(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var i=this.keySelector;e=i?i(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(ge);function ir(t){return void 0===t&&(t=or),function(e){return e.lift(new rr(t))}}var rr=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new nr(t,this.errorFactory))},t}(),nr=function(t){function e(e,i){var r=t.call(this,e)||this;return r.errorFactory=i,r.hasValue=!1,r}return re(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(ge);function or(){return new ri}function sr(t){return function(e){return 0===t?Ge():e.lift(new ar(t))}}var ar=function(){function t(t){if(this.total=t,this.total<0)throw new ii}return t.prototype.call=function(t,e){return e.subscribe(new lr(t,this.total))},t}(),lr=function(t){function e(e,i){var r=t.call(this,e)||this;return r.total=i,r.count=0,r}return re(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(ge);function ur(t,e){var i=arguments.length>=2;return function(r){return r.pipe(t?_i((function(e,i){return t(e,i,r)})):be,sr(1),i?Ui(e):ir((function(){return new ri})))}}function cr(t){return function(e){return e.lift(new hr(t))}}var hr=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new dr(t,this.value))},t}(),dr=function(t){function e(e,i){var r=t.call(this,e)||this;return r.value=i,r}return re(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(ge);var mr=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var i=this.selector,r=this.subjectFactory(),n=i(r).subscribe(t);return n.add(e.subscribe(r)),n},t}();function pr(t,e,i,r){i&&"function"!=typeof i&&(r=i);var n="function"==typeof i?i:void 0,o=new Ke(t,e,r);return function(t){return function(t,e){return function(i){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return i.lift(new mr(r,e));var n=Object.create(i,Fe);return n.source=i,n.subjectFactory=r,n}}((function(){return o}),n)(t)}}var fr=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new gr(t,this.count,this.source))},t}(),gr=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.count=i,n.source=r,n}return re(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(ge);function vr(t){return function(e){return e.lift(new yr(t))}}var yr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new br(t,this.notifier))},t}(),br=function(t){function e(e,i){var r=t.call(this,e)||this;r.hasValue=!1;var n=new yi(r);r.add(n),r.innerSubscription=n;var o=wi(i,n);return o!==n&&(r.add(o),r.innerSubscription=o),r}return re(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(bi);function wr(t){return function(e){return e.lift(new Sr(t))}}var Sr=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new $r(t,this.predicate))},t}(),$r=function(t){function e(e,i){var r=t.call(this,e)||this;return r.predicate=i,r.skipping=!0,r.index=0,r}return re(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(ge);function Pr(t,e){return"function"==typeof e?function(i){return i.pipe(Pr((function(i,r){return vi(t(i,r)).pipe(oi((function(t,n){return e(i,t,r,n)})))})))}:function(e){return e.lift(new Ir(t))}}var Ir=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new jr(t,this.project))},t}(),jr=function(t){function e(e,i){var r=t.call(this,e)||this;return r.project=i,r.index=0,r}return re(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var i=new yi(this),r=this.destination;r.add(i),this.innerSubscription=wi(t,i),this.innerSubscription!==i&&r.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(bi);function Or(t,e,i){return function(r){return r.lift(new xr(t,e,i))}}var xr=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new Cr(t,this.nextOrObserver,this.error,this.complete))},t}(),Cr=function(t){function e(e,i,r,n){var o=t.call(this,e)||this;return o._tapNext=ei,o._tapError=ei,o._tapComplete=ei,o._tapError=r||ei,o._tapComplete=n||ei,ne(i)?(o._context=o,o._tapNext=i):i&&(o._context=i,o._tapNext=i.next||ei,o._tapError=i.error||ei,o._tapComplete=i.complete||ei),o}return re(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(ge);var Tr=function(){function t(t,e,i,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=i,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new _r(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),_r=function(t){function e(e,i,r,n,o){var s=t.call(this,e)||this;return s.absoluteTimeout=i,s.waitFor=r,s.withObservable=n,s.scheduler=o,s.scheduleTimeout(),s}return re(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(wi(e,new yi(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(bi);function Rr(t,e){return void 0===e&&(e=ti),function(t,e,i){return void 0===i&&(i=ti),function(r){var n=Bi(t),o=n?+t-i.now():Math.abs(t);return r.lift(new Tr(o,n,e,i))}}(t,Ye(new ni),e)}class Fr extends Error{constructor(t){super(t),Dt(this,"name","WaitCancelError"),it(Error.captureStackTrace)?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack}}class Er extends Error{constructor(t){super(t),Dt(this,"name","WaitTimeoutError"),it(Error.captureStackTrace)?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack}}function Vr(t,e,i){const r=t=>!t,n=Oi(1e3/60).pipe(it(t)?wr(Y(t)):vr(t.pipe(wr(r))),ur());let o=Ti;e&&(o=Oi(1e3/60).pipe(it(e)?wr(Y(e)):vr(e.pipe(wr(r))),ur(),Pr((()=>Ye(new Fr("wait canceled"))))));let s=Ei(n,o);return i>0&&(s=s.pipe(Rr(i))),s.pipe((a=t=>{throw"TimeoutError"===t.name&&(t=new Er("wait timed out")),t},function(t){var e=new Ai(a),i=t.lift(e);return e.caught=i})).toPromise();var a}var Lr,Ar=Object.freeze({__proto__:null,IdentityMap:Gt,sequential:function(t){return async function(){t._execPromise&&await t._execPromise,t._execPromise=Promise.resolve(t.call(this,...arguments));const e=await t._execPromise;return delete t._execPromise,e}},mergeDescriptors:Jt,waitFor:Vr,WaitCancelError:Fr,WaitTimeoutError:Er,AssertionError:Nt,assert:Mt,numeric:function(t,e){Mt(rt(t),e||"value is a number")},instanceOf:kt,log:Ut,warn:zt,error:Zt,encode:function(t){return JSON.stringify(t)},newLogger:Bt,makeLog:Wt,makeWarn:Yt,makeError:qt,noop:G,constant:U,stubArray:z,stubObject:Z,stubCollection:function(){return new t.Collection},stubTrue:B,stubFalse:function(){return!1},identity:W,negate:Y,or:q,and:X,toArray:function(t){return Array.from(t)},isBoolean:H,isNumber:J,isString:K,isArray:Q,isArrayLike:tt,isCollection:et,isFinite:function(t){return"number"==typeof t&&_(t)},isFunction:it,isNumeric:rt,isObjectLike:nt,isPlainObject:ot,round:st,coalesce:at,plainProps:function(t){const e={};return Object.keys(t).forEach((i=>{var r;(rt(r=t[i])||K(r)||Q(r)||H(r)||ot(r))&&(e[i]=t[i])})),e},replaceTokens:lt,isEqual:ut,getLength:ct,isEmpty:ht,keys:dt,values:function(t){return Object.values(t)},seal:mt,freeze:pt,sealFactory:ft,freezeFactory:function(t){let e=t;return e.freezed||(e=function(){return pt(t(...arguments))},e.freezed=!0),e},forEach:gt,reduce:vt,filter:yt,find:bt,map:wt,mapValues:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return wt(t,e)},mapKeys:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return vt(t,((t,i,r)=>(t[e(i,r)]=i,t)),tt(t)||et(t)?[]:{})},every:St,some:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return vt(t,((t,i,r)=>t||e(i,r)),!1)},firstEl:function(t){if(et(t)&&(t=t.getArray()),tt(t))return t[0]},lastEl:function(t){if(et(t)&&(t=t.getArray()),tt(t))return t[t.length-1]},pick:$t,omit:Pt,upperFirst:It,lowerFirst:jt,rangeIterator:Ot,range:xt,get:Ct,hasOwnProp:function(t,e){return nt(t)&&V.call(t,e)},hasProp:Tt,includes:_t,difference:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut;return yt(t,(t=>!_t(e,t,i)))},camelCase:Rt,kebabCase:Ft,serialize:Et,unserialize:Vt,clonePlainObject:Lt,addPrefix:At,makeWatchers:Kt,extractChildren:Qt,hasAncestorVm:te,matchesVm:ee}),Nr=new Uint8Array(16);function Mr(){if(!Lr&&!(Lr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lr(Nr)}var kr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dr(t){return"string"==typeof t&&kr.test(t)}for(var Gr=[],Ur=0;Ur<256;++Ur)Gr.push((Ur+256).toString(16).substr(1));function zr(t,e,i){var r=(t=t||{}).random||(t.rng||Mr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){i=i||0;for(var n=0;n<16;++n)e[i+n]=r[n];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(Gr[t[e+0]]+Gr[t[e+1]]+Gr[t[e+2]]+Gr[t[e+3]]+"-"+Gr[t[e+4]]+Gr[t[e+5]]+"-"+Gr[t[e+6]]+Gr[t[e+7]]+"-"+Gr[t[e+8]]+Gr[t[e+9]]+"-"+Gr[t[e+10]]+Gr[t[e+11]]+Gr[t[e+12]]+Gr[t[e+13]]+Gr[t[e+14]]+Gr[t[e+15]]).toLowerCase();if(!Dr(i))throw TypeError("Stringified UUID is invalid");return i}(r)}function Zr(t){if(t instanceof i.Control)return t.get("id");throw new Error("Illegal control argument")}function Br(t,e){if(t instanceof i.Control)return t.set("id",e),t;throw new Error("Illegal control argument")}function Wr(t,e){return null==Zr(t)&&Br(t,e||zr()),t}const Yr={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},qr={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Xr={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},Hr={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Jr={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};function Kr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(t)return t.map((t=>st(t,e)))}function Qr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(t)return t.map((t=>st(t,e)))}function tn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(t)return t.map((t=>Qr(t,e)))}function en(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(t)return t.map((t=>tn(t,e)))}function rn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(t)return t.map((t=>en(t,e)))}function nn(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;switch(t){case Yr.POINT:case Yr.CIRCLE:return Qr(e,i);case Yr.LINE_STRING:case Yr.MULTI_POINT:return tn(e,i);case Yr.POLYGON:case Yr.MULTI_LINE_STRING:return en(e,i);case Yr.MULTI_POLYGON:return rn(e,i)}}function on(t,e){return!!ut(t.extent,e.extent)&&ut(t.coordinates,e.coordinates)}function sn(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=i*i+r*r;return st(Math.sqrt(n),6)}const an=X(Q,(t=>t.length>=2),(t=>St(t,J))),ln=X(Q,(t=>t.length>=0),(t=>St(t,an))),un=X(Q,(t=>t.length>=0),(t=>St(t,ln))),cn=ln,hn=un,dn=X(Q,(t=>t.length>=0),(t=>St(t,un)));function mn(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]}function pn(t,e){let i;return e===qr.BOTTOM_LEFT?i=n.getBottomLeft(t):e===qr.BOTTOM_RIGHT?i=n.getBottomRight(t):e===qr.TOP_LEFT?i=n.getTopLeft(t):e===qr.TOP_RIGHT?i=n.getTopRight(t):Mt(!1,"Invalid extent corner"),i}var fn=6371008.8,gn={meters:fn,metres:fn,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:fn/1852,inches:39.37*fn,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274};function vn(t,e,i){if(!$n(i=i||{}))throw new Error("options is invalid");var r=i.bbox,n=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&Pn(r),n&&In(n);var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function yn(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Sn(t[0])||!Sn(t[1]))throw new Error("coordinates must contain numbers");return vn({type:"Point",coordinates:t},e,i)}function bn(t,e){if(!$n(e=e||{}))throw new Error("options is invalid");var i=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&Pn(i),r&&In(r);var n={type:"FeatureCollection"};return r&&(n.id=r),i&&(n.bbox=i),n.features=t,n}function wn(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Sn(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function $n(t){return!!t&&t.constructor===Object}function Pn(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Sn(t))throw new Error("bbox must only contain numbers")}))}function In(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function jn(t,e,i){if(null!==t)for(var r,n,o,s,a,l,u,c,h=0,d=0,m=t.type,p="FeatureCollection"===m,f="Feature"===m,g=p?t.features.length:1,v=0;v<g;v++){a=(c=!!(u=p?t.features[v].geometry:f?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<a;y++){var b=0,w=0;if(null!==(s=c?u.geometries[y]:u)){l=s.coordinates;var S=s.type;switch(h=!i||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(l,d,v,b,w))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],d,v,b,w))return!1;d++,"MultiPoint"===S&&b++}"LineString"===S&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-h;n++){if(!1===e(l[r][n],d,v,b,w))return!1;d++}"MultiLineString"===S&&b++,"Polygon"===S&&w++}"Polygon"===S&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for("MultiPolygon"===S&&(w=0),n=0;n<l[r].length;n++){for(o=0;o<l[r][n].length-h;o++){if(!1===e(l[r][n][o],d,v,b,w))return!1;d++}w++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===jn(s.geometries[r],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function On(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function xn(t){var e=[];return"FeatureCollection"===t.type?On(t,(function(t){jn(t,(function(i){e.push(yn(i,t.properties))}))})):jn(t,(function(i){e.push(yn(i,t.properties))})),bn(e)}function Cn(t,e){if(!$n(e=e||{}))throw new Error("options is invalid");var i=e.properties;if(!t)throw new Error("geojson is required");var r=function(t){var e=[1/0,1/0,-1/0,-1/0];return jn(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}(t);return yn([(r[0]+r[2])/2,(r[1]+r[3])/2],i)}function Tn(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return _n(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(i){switch(i){case"type":case"features":return;default:e[i]=t[i]}})),e.features=t.features.map((function(t){return _n(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Fn(t);default:throw new Error("unknown GeoJSON type")}}function _n(t){var e={type:"Feature"};return Object.keys(t).forEach((function(i){switch(i){case"type":case"properties":case"geometry":return;default:e[i]=t[i]}})),e.properties=Rn(t.properties),e.geometry=Fn(t.geometry),e}function Rn(t){var e={};return t?(Object.keys(t).forEach((function(i){var r=t[i];"object"==typeof r?null===r?e[i]=null:r.length?e[i]=r.map((function(t){return t})):e[i]=Rn(r):e[i]=r})),e):e}function Fn(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Fn(t)})),e):(e.coordinates=En(t.coordinates),e)}function En(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return En(t)}))}function Vn(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ln(t,e,i){if(!$n(i=i||{}))throw new Error("options is invalid");var r=i.units,n=Vn(t),o=Vn(e),s=wn(o[1]-n[1]),a=wn(o[0]-n[0]),l=wn(n[1]),u=wn(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(u);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=gn[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t*i}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function An(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var r=i.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=Vn(t),o=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,a))return!1;"Polygon"===s&&(o=[o]);for(var l=0,u=!1;l<o.length&&!u;l++)if(Nn(n,o[l][0],r)){for(var c=!1,h=1;h<o[l].length&&!c;)Nn(n,o[l][h],!r)&&(c=!0),h++;c||(u=!0)}return u}function Nn(t,e,i){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,o=e.length-1;n<e.length;o=n++){var s=e[n][0],a=e[n][1],l=e[o][0],u=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!i;a>t[1]!=u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(r=!r)}return r}function Mn(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?bn([vn(t)]):bn([t]);return t}(t),i=Cn(e),r=!1,n=0;!r&&n<e.features.length;){var o,s=e.features[n].geometry,a=!1;if("Point"===s.type)i.geometry.coordinates[0]===s.coordinates[0]&&i.geometry.coordinates[1]===s.coordinates[1]&&(r=!0);else if("MultiPoint"===s.type){var l=!1;for(o=0;!l&&o<s.coordinates.length;)i.geometry.coordinates[0]===s.coordinates[o][0]&&i.geometry.coordinates[1]===s.coordinates[o][1]&&(r=!0,l=!0),o++}else if("LineString"===s.type)for(o=0;!a&&o<s.coordinates.length-1;)kn(i.geometry.coordinates[0],i.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(a=!0,r=!0),o++;else if("MultiLineString"===s.type)for(var u=0;u<s.coordinates.length;){a=!1,o=0;for(var c=s.coordinates[u];!a&&o<c.length-1;)kn(i.geometry.coordinates[0],i.geometry.coordinates[1],c[o][0],c[o][1],c[o+1][0],c[o+1][1])&&(a=!0,r=!0),o++;u++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||An(i,s)&&(r=!0);n++}if(r)return i;var h=bn([]);for(n=0;n<e.features.length;n++)h.features=h.features.concat(xn(e.features[n]).features);return yn(function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var i,r=1/0;return On(e,(function(e,n){var o=Ln(t,e);o<r&&((i=Tn(e)).properties.featureIndex=n,i.properties.distanceToPoint=o,r=o)})),i}(i,h).geometry.coordinates)}function kn(t,e,i,r,n,o){return Math.sqrt((n-i)*(n-i)+(o-r)*(o-r))===Math.sqrt((t-i)*(t-i)+(e-r)*(e-r))+Math.sqrt((n-t)*(n-t)+(o-e)*(o-e))}function Dn(t,e){const i=Array.isArray(t)?t:[t,e];return new s.Point(i)}function Gn(t,e){return l.circular(t,e)}function Un(t){t instanceof s.Circle?t=Dn(t.getCenter()):t.type===Yr.CIRCLE&&(t={...t,type:Yr.POINT});const e=t.type||t.getType();return!1===[Yr.GEOMETRY_COLLECTION].includes(e)?t:(t.geometries||t.getGeometries())[0]}function zn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const i=Un(t),r=Mn({type:i.type||i.getType(),coordinates:i.coordinates||i.getCoordinates()});if(null!=r&&r.geometry)return nn(r.geometry.type,r.geometry.coordinates,e)}function Zn(t){if(t instanceof s.Geometry)return t.get("id");if(ot(t))return t.id;throw new Error("Illegal geometry argument")}function Bn(t,e){if(t instanceof s.Geometry)return t.set("id",e),t;if(ot(t))return t.id=e,t;throw new Error("Illegal geometry argument")}function Wn(t,e){return null==Zn(t)&&Bn(t,e||zr()),t}function Yn(t){return qn(t)===Yr.CIRCLE}function qn(t){return t instanceof s.Geometry?t.getType():null==t?void 0:t.type}const Xn="EPSG:4326",Hn="EPSG:3857";function Jn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return nn(Yr.POINT,u.toLonLat(t,e),i)}function Kn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return nn(Yr.POINT,u.fromLonLat(t,e),i)}function Qn(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return to(t,e,i,r)}function to(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(!t)return;let n=u.transform(t,e,i);return n.some((t=>isNaN(t)))&&(n=u.transform(u.transform(t,e,Xn),Xn,i)),nn(Yr.POINT,n,r)}function eo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>Jn(t,e,i)))}function io(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>Kn(t,e,i)))}function ro(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return t.map((t=>Qn(t,e,i,r)))}function no(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>eo(t,e,i)))}function oo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>io(t,e,i)))}function so(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return t.map((t=>ro(t,e,i,r)))}function ao(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>Jn(t,e,i)))}function lo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>Kn(t,e,i)))}function uo(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return t.map((t=>Qn(t,e,i,r)))}function co(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>eo(t,e,i)))}function ho(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>io(t,e,i)))}function mo(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return t.map((t=>ro(t,e,i,r)))}function po(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>no(t,e,i)))}function fo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return t.map((t=>oo(t,e,i)))}function go(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return t.map((t=>so(t,e,i,r)))}const vo={[Yr.POINT]:{toLonLat:Jn,fromLonLat:Kn,transform:Qn},[Yr.LINE_STRING]:{toLonLat:eo,fromLonLat:io,transform:ro},[Yr.POLYGON]:{toLonLat:no,fromLonLat:oo,transform:so},[Yr.MULTI_POINT]:{toLonLat:ao,fromLonLat:lo,transform:uo},[Yr.MULTI_LINE_STRING]:{toLonLat:co,fromLonLat:ho,transform:mo},[Yr.MULTI_POLYGON]:{toLonLat:po,fromLonLat:fo,transform:go},[Yr.CIRCLE]:{toLonLat:Jn,fromLonLat:Kn,transform:Qn}};function yo(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(!t)return;if(t.every((t=>!isFinite(t))))return t;let n=u.transformExtent(t,e,i);return n.some((t=>isNaN(t)))&&(n=u.transformExtent(u.transformExtent(t,e,Xn),Xn,i)),Kr(n,r)}function bo(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(!t)return;const n=ro([[0,0],[t,0]],e,i,r);return sn(n[0],n[1])}var wo={rgb2hsl:So,rgb2hsv:$o,rgb2hwb:Po,rgb2cmyk:Io,rgb2keyword:jo,rgb2xyz:Oo,rgb2lab:xo,rgb2lch:function(t){return Lo(xo(t))},hsl2rgb:Co,hsl2hsv:function(t){var e=t[0],i=t[1]/100,r=t[2]/100;if(0===r)return[0,0,0];return[e,100*(2*(i*=(r*=2)<=1?r:2-r)/(r+i)),100*((r+i)/2)]},hsl2hwb:function(t){return Po(Co(t))},hsl2cmyk:function(t){return Io(Co(t))},hsl2keyword:function(t){return jo(Co(t))},hsv2rgb:To,hsv2hsl:function(t){var e,i,r=t[0],n=t[1]/100,o=t[2]/100;return e=n*o,[r,100*(e=(e/=(i=(2-n)*o)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(t){return Po(To(t))},hsv2cmyk:function(t){return Io(To(t))},hsv2keyword:function(t){return jo(To(t))},hwb2rgb:_o,hwb2hsl:function(t){return So(_o(t))},hwb2hsv:function(t){return $o(_o(t))},hwb2cmyk:function(t){return Io(_o(t))},hwb2keyword:function(t){return jo(_o(t))},cmyk2rgb:Ro,cmyk2hsl:function(t){return So(Ro(t))},cmyk2hsv:function(t){return $o(Ro(t))},cmyk2hwb:function(t){return Po(Ro(t))},cmyk2keyword:function(t){return jo(Ro(t))},keyword2rgb:Mo,keyword2hsl:function(t){return So(Mo(t))},keyword2hsv:function(t){return $o(Mo(t))},keyword2hwb:function(t){return Po(Mo(t))},keyword2cmyk:function(t){return Io(Mo(t))},keyword2lab:function(t){return xo(Mo(t))},keyword2xyz:function(t){return Oo(Mo(t))},xyz2rgb:Fo,xyz2lab:Eo,xyz2lch:function(t){return Lo(Eo(t))},lab2xyz:Vo,lab2rgb:Ao,lab2lch:Lo,lch2lab:No,lch2xyz:function(t){return Vo(No(t))},lch2rgb:function(t){return Ao(No(t))}};function So(t){var e,i,r=t[0]/255,n=t[1]/255,o=t[2]/255,s=Math.min(r,n,o),a=Math.max(r,n,o),l=a-s;return a==s?e=0:r==a?e=(n-o)/l:n==a?e=2+(o-r)/l:o==a&&(e=4+(r-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(s+a)/2,[e,100*(a==s?0:i<=.5?l/(a+s):l/(2-a-s)),100*i]}function $o(t){var e,i,r=t[0],n=t[1],o=t[2],s=Math.min(r,n,o),a=Math.max(r,n,o),l=a-s;return i=0==a?0:l/a*1e3/10,a==s?e=0:r==a?e=(n-o)/l:n==a?e=2+(o-r)/l:o==a&&(e=4+(r-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,a/255*1e3/10]}function Po(t){var e=t[0],i=t[1],r=t[2];return[So(t)[0],100*(1/255*Math.min(e,Math.min(i,r))),100*(r=1-1/255*Math.max(e,Math.max(i,r)))]}function Io(t){var e,i=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-r,1-n)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-n-e)/(1-e)||0),100*e]}function jo(t){return Do[JSON.stringify(t)]}function Oo(t){var e=t[0]/255,i=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*i+.0722*r),100*(.0193*e+.1192*i+.9505*r)]}function xo(t){var e=Oo(t),i=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(i-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function Co(t){var e,i,r,n,o,s=t[0]/360,a=t[1]/100,l=t[2]/100;if(0==a)return[o=255*l,o,o];e=2*l-(i=l<.5?l*(1+a):l+a-l*a),n=[0,0,0];for(var u=0;u<3;u++)(r=s+1/3*-(u-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(i-e)*r:2*r<1?i:3*r<2?e+(i-e)*(2/3-r)*6:e,n[u]=255*o;return n}function To(t){var e=t[0]/60,i=t[1]/100,r=t[2]/100,n=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-i),a=255*r*(1-i*o),l=255*r*(1-i*(1-o));r*=255;switch(n){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}}function _o(t){var e,i,n,o,s=t[0]/360,a=t[1]/100,l=t[2]/100,u=a+l;switch(u>1&&(a/=u,l/=u),n=6*s-(e=Math.floor(6*s)),0!=(1&e)&&(n=1-n),o=a+n*((i=1-l)-a),e){default:case 6:case 0:r=i,g=o,b=a;break;case 1:r=o,g=i,b=a;break;case 2:r=a,g=i,b=o;break;case 3:r=a,g=o,b=i;break;case 4:r=o,g=a,b=i;break;case 5:r=i,g=a,b=o}return[255*r,255*g,255*b]}function Ro(t){var e=t[0]/100,i=t[1]/100,r=t[2]/100,n=t[3]/100;return[255*(1-Math.min(1,e*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n))]}function Fo(t){var e,i,r,n=t[0]/100,o=t[1]/100,s=t[2]/100;return i=-.9689*n+1.8758*o+.0415*s,r=.0557*n+-.204*o+1.057*s,e=(e=3.2406*n+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1))]}function Eo(t){var e=t[0],i=t[1],r=t[2];return i/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]}function Vo(t){var e,i,r,n,o=t[0],s=t[1],a=t[2];return o<=8?n=(i=100*o/903.3)/100*7.787+16/116:(i=100*Math.pow((o+16)/116,3),n=Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(s/500+n-16/116)/7.787:95.047*Math.pow(s/500+n,3),i,r=r/108.883<=.008859?r=108.883*(n-a/200-16/116)/7.787:108.883*Math.pow(n-a/200,3)]}function Lo(t){var e,i=t[0],r=t[1],n=t[2];return(e=360*Math.atan2(n,r)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(r*r+n*n),e]}function Ao(t){return Fo(Vo(t))}function No(t){var e,i=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[i,r*Math.cos(e),r*Math.sin(e)]}function Mo(t){return ko[t]}var ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Do={};for(var Go in ko)Do[JSON.stringify(ko[Go])]=Go;var Uo=function(){return new Yo};for(var zo in wo){Uo[zo+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),wo[t](e)}}(zo);var Zo=/(\w+)2(\w+)/.exec(zo),Bo=Zo[1],Wo=Zo[2];(Uo[Bo]=Uo[Bo]||{})[Wo]=Uo[zo]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var i=wo[t](e);if("string"==typeof i||void 0===i)return i;for(var r=0;r<i.length;r++)i[r]=Math.round(i[r]);return i}}(zo)}var Yo=function(){this.convs={}};Yo.prototype.routeSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i))},Yo.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},Yo.prototype.getValues=function(t){var e=this.convs[t];if(!e){var i=this.space,r=this.convs[i];e=Uo[i][t](r),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(t){Yo.prototype[t]=function(e){return this.routeSpace(t,arguments)}}));var qo=Uo;function Xo(t){return t instanceof c.Style||t instanceof c.Image||t instanceof c.Fill||t instanceof c.Stroke||t instanceof c.Text||t instanceof Function}function Ho(t){if(Xo(t))return t.id;throw new Error("Illegal style argument")}function Jo(t,e){if(Xo(t))return t.id=e,t;throw new Error("Illegal style argument")}function Ko(t,e){return null==Ho(t)&&Jo(t,e||zr()),t}const Qo=t=>null==t||"number"!=typeof t&&(("string"==typeof t||Array.isArray(t))&&!t.length||!Object.keys(t).length);function ts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;if(Qo(t))return;const i={text:os(t,"text"),fill:is(t,"fill"),stroke:rs(t,"stroke"),image:ns(t,"image"),geometry:ss(t,e),zIndex:t.zIndex,renderer:t.renderer};return Qo(i)?void 0:new c.Style(i)}function es(t){let e=t;return"string"==typeof t&&(e=function(t){var e,i,r,n;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var o=e[1],s="cmyk"===(a=o.replace(/a$/,""))?4:3;i=qo[a],r=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map((function(t,e){return/%$/.test(t)&&e===s?parseFloat(t)/100:(/%$/.test(t),parseFloat(t))})),o===a&&r.push(1),n=void 0===r[s]?1:r[s],r=r.slice(0,s),i[a]=function(){return r}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var a;s=(a=t.replace(/^#/,"")).length,i=qo.rgb,r=(r=a.split(3===s?/(.)/:/(..)/)).filter(Boolean).map((function(t){return 3===s?parseInt(t+t,16):parseInt(t,16)})),n=1,i.rgb=function(){return r},r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0)}else(i=qo.keyword).keyword=function(){return t},r=t,n=1;var l={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{l.rgb=i.rgb(r)}catch(t){}try{l.hsl=i.hsl(r)}catch(t){}try{l.hsv=i.hsv(r)}catch(t){}try{l.cmyk=i.cmyk(r)}catch(t){}try{l.keyword=i.keyword(r)}catch(t){}return l.rgb&&(l.hex="#"+l.rgb.map((function(t){var e=t.toString(16);return 1===e.length?"0"+e:e})).join("")),l.rgb&&(l.rgba=l.rgb.concat(n)),l.hsl&&(l.hsla=l.hsl.concat(n)),l.hsv&&(l.hsva=l.hsv.concat(n)),l.cmyk&&(l.cmyka=l.cmyk.concat(n)),l}(t).rgba),e}function is(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=At(e);if(t[i()]instanceof c.Fill)return t[i()];const r=["color"].reduce(((t,e)=>({...t,[i(e)]:e})),{}),n=vt(t,((t,e,i)=>{if(!r[i]||null==e)return t;if("color"===r[i])e=es(e);return t[r[i]]=e,t}),{});return Qo(n)?void 0:new c.Fill(n)}function rs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=At(e);if(t[i()]instanceof c.Stroke)return t[i()];const r=["color","width","miterLimit","lineCap","lineJoin","lineDash","lineDashOffset"].reduce(((t,e)=>({...t,[i(e)]:e})),{}),n=vt(t,((t,e,i)=>{if(!r[i]||null==e)return t;if("color"===r[i])e=es(e);return t[r[i]]=e,t}),{});return Qo(n)?void 0:new c.Stroke(n)}function ns(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=At(e);if(Qo(t[i("src")])&&Qo(t.image)&&Qo(t[i("points")])&&!rt(t[i("radius")]))return;if(t.image instanceof c.Image)return t.image;let r,n;return Qo(t[i("src")])&&Qo(t.image)?null!=t[i("points")]?(n=c.RegularShape,r={points:t[i("points")],radius:t[i("radius")],radius1:t[i("radius1")],radius2:t[i("radius2")],angle:t[i("angle")]}):(n=c.Circle,r={radius:t[i("radius")]}):(n=c.Icon,r={anchor:t[i("anchor")],anchorOrigin:t[i("anchorOrigin")],anchorXUnits:t[i("anchorXUnits")],anchorYUnits:t[i("anchorYUnits")],color:t[i("color")],offset:t[i("offset")],offsetOrigin:t[i("offsetOrigin")],size:t[i("size")],img:t.image,imgSize:t[i("imgSize")],src:t[i("src")],crossOrigin:t[i("crossOrigin")]}),r={...r,fill:is(t,i("fill")),stroke:rs(t,i("stroke")),opacity:t[i("opacity")],scale:t[i("scale")],rotation:t[i("rotation")],rotateWithView:t[i("rotateWithView")],displacement:t[i("displacement")]},Qo(r)?void 0:new n(r)}function os(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null==t.text)return;if(t.text instanceof c.Text)return t.text;const i=At(e),r={text:t.text,textAlign:t.textAlign,textBaseline:t.textBaseline,font:t[i("font")],scale:t[i("scale")],offsetX:t[i("offsetX")],offsetY:t[i("offsetY")],rotation:t[i("rotation")],rotateWithView:t[i("rotateWithView")],padding:t[i("padding")],maxAngle:t[i("maxAngle")],overflow:t[i("overflow")],placement:t[i("placement")],fill:is(t,i("fill")),stroke:rs(t,i("stroke")),backgroundFill:is(t,i("backgroundFill")),backgroundStroke:rs(t,i("backgroundStroke"))};return Qo(r)?void 0:new c.Text(r)}function ss(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return it(t.geom)?function(e){return t.geom(e)}:t.geom instanceof s.Geometry?t.geom:t.geom?e(t.geom):null}function as(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;if(t&&!it(t))return{...ls(t.getFill(),"fill"),...us(t.getStroke(),"stroke"),...cs(t.getImage(),"image"),...hs(t.getText(),"text"),...ds(t.getGeometry(),e),zIndex:t.getZIndex()}}function ls(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};const i=At(e);return{[i("color")]:t.getColor()}}function us(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};const i=At(e);return{[i("color")]:t.getColor(),[i("width")]:t.getWidth(),[i("miterLimit")]:t.getMiterLimit(),[i("lineCap")]:t.getLineCap(),[i("lineJoin")]:t.getLineJoin(),[i("lineDash")]:t.getLineDash(),[i("lineDashOffset")]:t.getLineDashOffset()}}function cs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};const i=At(e),r={[i("opacity")]:t.getOpacity(),[i("scale")]:t.getScale(),[i("rotation")]:t.getRotation(),[i("rotateWithView")]:t.getRotateWithView(),[i("displacement")]:t.getDisplacement()};switch(!0){case t instanceof c.Icon:return{...r,[i("anchor")]:t.anchor_.slice(),[i("anchorOrigin")]:t.anchorOrigin_,[i("anchorXUnits")]:t.anchorXUnits_,[i("anchorYUnits")]:t.anchorYUnits_,[i("color")]:Q(t.getColor())?t.getColor().slice():t.getColor(),[i("offset")]:t.offset_.slice(),[i("offsetOrigin")]:t.offsetOrigin_,[i("size")]:Q(t.getSize())?t.getSize().slice():t.getSize(),[i("src")]:t.getSrc(),[i("crossOrigin")]:t.crossOrigin_};case t instanceof c.Circle:return{...r,...ls(t.getFill(),i("fill")),...us(t.getStroke(),i("stroke")),[i("radius")]:t.getRadius()};case t instanceof c.RegularShape:return{...r,...ls(t.getFill(),i("fill")),...us(t.getStroke(),i("stroke")),[i("points")]:t.getPoints(),[i("radius")]:t.getRadius(),[i("radius2")]:t.getRadius2(),[i("angle")]:t.getAngle()};default:return{...r}}}function hs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};const i=At(e);return yt({text:t.getText(),textAlign:t.getTextAlign(),textBaseline:t.getTextBaseline(),[i("font")]:t.getFont(),[i("scale")]:t.getScale(),[i("rotation")]:t.getRotation(),[i("offsetX")]:t.getOffsetX(),[i("offsetY")]:t.getOffsetY(),[i("rotateWithView")]:t.getRotateWithView(),[i("padding")]:t.getPadding(),[i("maxAngle")]:t.getMaxAngle(),[i("overflow")]:t.getOverflow(),[i("placement")]:t.getPlacement(),...ls(t.getFill(),i("fill")),...us(t.getStroke(),i("stroke")),...ls(t.getBackgroundFill(),i("backgroundFill")),...us(t.getBackgroundStroke(),i("backgroundStroke"))},(t=>null!=t))}function ds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return t?{geom:e(t)}:{}}function ms(t){return new vs(t)}function ps(t){return new o.MVT(t)}const fs="vl_circle",gs="vl_style";class vs extends o.GeoJSON{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.defaultDecimals=null!=t.decimals&&t.decimals>-1?t.decimals:void 0,this.defaultStyleReader=t.styleReader||G,this.defaultStyleWriter=t.styleWriter||G}adaptOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=t.decimals&&t.decimals<0&&(t.decimals=void 0),super.adaptOptions({decimals:this.defaultDecimals,styleReader:this.defaultStyleReader,styleWriter:this.defaultStyleWriter,...t})}writeGeometryObject(t,e){if(e=this.adaptOptions(e),Yn(t)){let i=t.getCenter().slice();const r=[i[0]+t.getRadius(),i[1]],n=a.getLength(new s.LineString([i,r]),e.featureProjection);i=Qn(i,e.featureProjection,Xn),t=Gn(i,n),e.featureProjection=Xn}return super.writeGeometryObject(t,e)}writeFeatureObject(e,i){i=this.adaptOptions(i);const r={type:"Feature",geometry:null,properties:null},n=e.getId();void 0!==n&&(r.id=n);const o=e.getGeometry();o&&(r.geometry=this.writeGeometryObject(o,i),Yn(o)&&(r.properties={...r.properties||{},[fs]:{center:Qn(o.getCenter(),i.featureProjection,i.dataProjection),radius:bo(o.getRadius(),i.featureProjection,i.dataProjection)}}));const s=e.getProperties();delete s[e.getGeometryName()],function(t){var e;for(e in t)return!1;return!e}(s)||(r.properties={...r.properties||{},...Lt(Pt(s,"features"))},Q(s.features)&&(r.properties.features=wt(s.features,(e=>e instanceof t.Feature?this.writeFeatureObject(e,i):e))));let a=e.getStyle();return a&&!it(a)&&(Q(a)||(a=[a]),r.properties={...r.properties||{},[gs]:a.map((t=>i.styleWriter(t,(t=>this.writeGeometryObject(t,i)))))}),r}readFeatureFromObject(e,i){let r;i=this.adaptOptions(i),r="Feature"===e.type?Lt(e):{type:"Feature",geometry:Lt(e),properties:null};const n=new t.Feature;r.properties&&r.properties.vl_circle&&(i.circle=r.properties.vl_circle,delete r.properties.vl_circle);const o=this.readGeometryFromObject(r.geometry,i);if(this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&n.setGeometryName(r.geometry_name),n.setGeometry(o),"id"in r&&n.setId(r.id),r.properties){if(r.properties.vl_style){let t=r.properties.vl_style;Q(t)||(t=[t]),n.setStyle(t.map((t=>i.styleReader(t,(t=>this.readGeometryFromObject(t,Pt(i,["circle"]))))))),delete r.properties.vl_style}Q(r.properties.features)&&(r.properties.features=wt(r.properties.features,(t=>Is(t)?this.readFeatureFromObject(t,i):t))),n.setProperties(r.properties,!0)}return n}readGeometryFromObject(t,e){var i,r;return null!==(i=(e=this.adaptOptions(e)).circle)&&void 0!==i&&i.center&&null!==(r=e.circle)&&void 0!==r&&r.radius?new s.Circle(Qn(e.circle.center,e.dataProjection,e.featureProjection),bo(e.circle.radius,e.dataProjection,e.featureProjection)):super.readGeometryFromObject(Lt(t),e)}}function ys(){return ms({decimals:6,styleReader:ts,styleWriter:as})}function bs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return ys().writeFeatureObject(t,{featureProjection:e,dataProjection:i,decimals:r})}function ws(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return ys().readFeature(t,{featureProjection:e,dataProjection:i,decimals:r})}function Ss(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return ys().writeGeometryObject(t,{featureProjection:e,dataProjection:i,decimals:r})}function $s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;if(t)return i=Ps(t,i),ys().readGeometry(t,{featureProjection:e,dataProjection:i,decimals:r})}function Ps(t,e){return ys().readProjection(t)||e}function Is(t){return ot(t)&&"Feature"===t.type&&js(t.geometry)}function js(t){return ot(t)&&Object.values(Yr).includes(t.type)&&t.geometries?t.geometries.every((t=>Q(t.coordinates))):Q(null==t?void 0:t.coordinates)}function Os(e){if(e instanceof t.Feature)return e.getId();if(ot(e))return e.id;throw new Error("Illegal feature format")}function xs(e,i){if(e instanceof t.Feature)return e.setId(i),e;if(ot(e))return e.id=i,e;throw new Error("Illegal feature format")}function Cs(t,e){return null==Os(t)&&xs(t,e||zr()),t}function Ts(e){return e instanceof t.Feature?e.getGeometryName():"geometry"}function _s(e){if(e)return Pt((e instanceof t.Feature?e.getProperties():e.properties)||{},[Ts(e),fs,gs])}function Rs(e,i){e&&(i=Pt(i||{},[Ts(e),fs,gs]),e instanceof t.Feature?e.setProperties(i):e.properties=i)}function Fs(t){if(t instanceof h.Interaction)return t.get("id");throw new Error("Illegal interaction argument")}function Es(t,e){if(t instanceof h.Interaction)return t.set("id",e),t;throw new Error("Illegal interaction argument")}function Vs(t){if(t instanceof h.Interaction)return t.get("priority");throw new Error("Illegal interaction argument")}function Ls(t,e){if(t instanceof h.Interaction)return t.set("priority",e),t;throw new Error("Illegal interaction argument")}function As(t,e,i){return null==Fs(t)&&Es(t,e||zr()),null==Vs(t)&&Ls(t,i||0),t}function Ns(t){if(t instanceof O.default)return t.get("id");throw new Error("Illegal layer argument")}function Ms(t,e){if(t instanceof O.default)return t.set("id",e),t;throw new Error("Illegal layer argument")}function ks(t,e){return null==Ns(t)&&Ms(t,e||zr()),t}function Ds(e){if(e instanceof t.PluggableMap)return e.get("id");throw new Error("Illegal map argument")}function Gs(e,i){if(e instanceof t.PluggableMap)return e.set("id",i),e;throw new Error("Illegal map argument")}function Us(e){if(e instanceof t.PluggableMap)return e.get("dataProjection");throw new Error("Illegal map argument")}function zs(e,i){if(e instanceof t.PluggableMap)return e.set("dataProjection",i),e;throw new Error("Illegal map argument")}function Zs(e){if(e instanceof t.Overlay)return e.get("id");throw new Error("Illegal overlay argument")}function Bs(e,i){if(e instanceof t.Overlay)return e.set("id",i),e;throw new Error("Illegal overlay argument")}function Ws(t,e){return null==Zs(t)&&Bs(t,e||zr()),t}function Ys(t){if(t instanceof e.Source)return t.get("id");throw new Error("Illegal source argument")}function qs(t,i){if(t instanceof e.Source)return t.set("id",i),t;throw new Error("Illegal source argument")}function Xs(t,e){return null==Ys(t)&&qs(t,e||zr()),t}function Hs(t,e){return vt(t,((t,i,r)=>(r=r.toUpperCase(),e.includes(r)||(t[r]=i),t)),{})}var Js={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ks={};Ks[Js.RADIANS]=6370997/(2*Math.PI),Ks[Js.DEGREES]=2*Math.PI*6370997/360,Ks[Js.FEET]=.3048,Ks[Js.METERS]=1,Ks[Js.USFEET]=1200/3937;var Qs=Js;function ta(t){let e=(t=u.get(t)).getExtent();if(!e){const i=180*Ks[Qs.DEGREES]/t.getMetersPerUnit();e=mn(-i,-i,i,i)}return e}function ea(e){if(e instanceof t.View)return e.get("id");throw new Error("Illegal view argument")}function ia(e,i){if(e instanceof t.View)return e.set("id",i),e;throw new Error("Illegal view argument")}function ra(t,e){return null==ea(t)&&ia(t,e||zr()),t}function na(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const r=i[1].charCodeAt(0),n=i[2].charCodeAt(0);let o;for(o=r;o<=n;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const r=parseInt(i[2],10);for(let n=parseInt(i[1],10);n<=r;n++)e.push(t.replace(i[0],n.toString()));return e}return e.push(t),e}var oa=Object.freeze({__proto__:null,expandUrl:na,getControlId:Zr,setControlId:Br,initializeControl:Wr,COORD_PRECISION:6,roundExtent:Kr,roundPointCoords:Qr,roundLineCoords:tn,roundPolygonCoords:en,roundMultiPointCoords:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return tn(t,e)},roundMultiLineCoords:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return en(t,e)},roundMultiPolygonCoords:rn,roundCoords:nn,flatCoords:function(t,e){const i=(t,e)=>t.concat(e);switch(t){case Yr.POINT:return[e];case Yr.LINE_STRING:case Yr.MULTI_POINT:return e;case Yr.POLYGON:case Yr.MULTI_LINE_STRING:return e.reduce(i,[]);case Yr.MULTI_POLYGON:return e.reduce(((t,e)=>t.concat(e.reduce(i,[]))),[]);default:return[]}},isEqualCoord:on,calcDistance:sn,isPointCoords:an,isLineCoords:ln,isPolygonCoords:un,isMultiPointCoords:cn,isMultiLineCoords:hn,isMultiPolygonCoords:dn,GeometryType:Yr,ExtentCorner:qr,OverlayPositioning:Xr,SourceState:Hr,WMSServerType:Jr,createOrUpdate:mn,getCorner:pn,getFeatureId:Os,setFeatureId:xs,initializeFeature:Cs,getFeatureGeomName:Ts,getFeatureGeom:function(e){if(e instanceof t.Feature)return e.getGeometry();if(ot(e))return e.geometry;throw new Error("Illegal feature format")},getFeatureProperties:_s,setFeatureProperties:Rs,createGeoJsonFmt:ms,createMvtFmt:ps,CIRCLE_SERIALIZE_PROP:fs,STYLE_SERIALIZE_PROP:gs,getGeoJsonFmt:ys,writeGeoJsonFeature:bs,readGeoJsonFeature:ws,writeGeoJsonGeometry:Ss,readGeoJsonGeometry:$s,readProjection:Ps,isGeoJSONFeature:Is,isGeoJSONGeometry:js,createPointGeom:Dn,createLineGeom:function(t){return new s.LineString(t)},createPolygonGeom:function(t){return new s.Polygon(t)},createMultiPointGeom:function(t){return new s.MultiPoint(t)},createMultiLineGeom:function(t){return new s.MultiLineString(t)},createMultiPolygonGeom:function(t){return new s.MultiPolygon(t)},createGeomCollection:function(t){return new s.GeometryCollection(t)},createCircularPolygon:Gn,isMultiGeom:function(t){return[Yr.MULTI_POINT,Yr.MULTI_LINE_STRING,Yr.MULTI_POLYGON,Yr.GEOMETRY_COLLECTION].includes(t.type||t.getType())},toSimpleGeom:Un,findPointOnSurface:zn,getGeometryId:Zn,setGeometryId:Bn,initializeGeometry:Wn,isCircleGeom:Yn,getGeomCoords:function(t){if(!t)return;const e=qn(t);return nn(e,e===Yr.CIRCLE?t.coordinates||t.getCenter():t.coordinates||t.getCoordinates())},getGeomType:qn,getInteractionId:Fs,setInteractionId:Es,getInteractionPriority:Vs,setInteractionPriority:Ls,initializeInteraction:As,getLayerId:Ns,setLayerId:Ms,initializeLayer:ks,getMapId:Ds,setMapId:Gs,getMapDataProjection:Us,setMapDataProjection:zs,getOverlayId:Zs,setOverlayId:Bs,initializeOverlay:Ws,EPSG_4326:Xn,EPSG_3857:Hn,pointToLonLat:Jn,pointFromLonLat:Kn,transformPoint:Qn,transform:to,lineToLonLat:eo,lineFromLonLat:io,transformLine:ro,polygonToLonLat:no,polygonFromLonLat:oo,transformPolygon:so,multiPointToLonLat:ao,multiPointFromLonLat:lo,transformMultiPoint:uo,multiLineToLonLat:co,multiLineFromLonLat:ho,transformMultiLine:mo,multiPolygonToLonLat:po,multiPolygonFromLonLat:fo,transformMultiPolygon:go,transforms:vo,transformExtent:yo,extentFromLonLat:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return yo(t,Xn,e,i)},extentToLonLat:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(t)return yo(t,e,Xn,i)},transformDistance:bo,getSourceId:Ys,setSourceId:qs,initializeSource:Xs,cleanSourceParams:Hs,getStyleId:Ho,setStyleId:Jo,initializeStyle:Ko,defaultStyle:function(){return[{fillColor:[255,255,255,.4],strokeColor:"#3399cc",strokeWidth:1.25,imageRadius:5}]},defaultEditStyle:function(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t[Yr.LINE_STRING]=[{strokeColor:e,strokeWidth:5},{strokeColor:i,strokeWidth:3}],t[Yr.MULTI_LINE_STRING]=t[Yr.LINE_STRING],t[Yr.POLYGON]=[{fillColor:[255,255,255,.5]}].concat(t[Yr.LINE_STRING]),t[Yr.MULTI_POLYGON]=t[Yr.POLYGON],t[Yr.CIRCLE]=t[Yr.POLYGON].concat(t[Yr.LINE_STRING]),t[Yr.POINT]=[{imageRadius:6,fillColor:i,strokeColor:e,strokeWidth:1.5,zIndex:1/0}],t[Yr.MULTI_POINT]=t[Yr.POINT],t[Yr.GEOMETRY_COLLECTION]=t[Yr.POLYGON].concat(t[Yr.LINE_STRING],t[Yr.POINT]),t},createStyle:ts,normalizeColor:es,createFillStyle:is,createStrokeStyle:rs,createImageStyle:ns,createTextStyle:os,createGeomStyle:ss,dumpStyle:as,dumpFillStyle:ls,dumpStrokeStyle:us,dumpImageStyle:cs,dumpTextStyle:hs,dumpGeomStyle:ds,extentFromProjection:ta,getViewId:ea,setViewId:ia,initializeView:ra}),sa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,n=void 0,o=void 0,s=[];return function(){var l=aa(e),u=(new Date).getTime(),c=!r||u-r>l;r=u;for(var h=arguments.length,d=Array(h),m=0;m<h;m++)d[m]=arguments[m];if(c&&i.leading)return i.accumulate?Promise.resolve(t.call(this,[d])).then((function(t){return t[0]})):Promise.resolve(t.call.apply(t,[this].concat(d)));if(n?clearTimeout(o):n=la(),s.push(d),o=setTimeout(a.bind(this),l),i.accumulate){var p=s.length-1;return n.promise.then((function(t){return t[p]}))}return n.promise};function a(){var e=n;clearTimeout(o),Promise.resolve(i.accumulate?t.call(this,s):t.apply(this,s[s.length-1])).then(e.resolve,e.reject),s=[],n=null}};function aa(t){return"function"==typeof t?t():t}function la(){var t={};return t.promise=new Promise((function(e,i){t.resolve=e,t.reject=i})),t}var ua="change",ca="error",ha="click",da="dblclick",ma={PROPERTYCHANGE:"propertychange"};function pa(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Array.isArray(e)?Ci(...e.map((e=>{let i,n;return"object"==typeof e?(i=e.event,n=e.selector):i=e,pa(t,i,n).pipe(...r)}))):(i||(i=W),ji((i=>t.on(e,i)),(i=>t.un(e,i))).pipe(oi(i)))}function fa(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(Array.isArray(e))return Ci(...e.map((e=>fa(t,e,i,r).pipe(...n))));r||(r=W);const o=`change:${e}`,s=pa(t,o,(()=>t.get(e))),a=[];return i&&(it(i)||(i=ut),a.push(Qi(i))),a.push(oi((t=>r({prop:e,value:t})))),s.pipe(...a)}function ga(t,e,i){return Array.isArray(e)?Ci(...e.map((e=>{let i,r;return"object"==typeof e?(i=e.event,r=e.selector):i=e,ga(t,i,r)}))):(i||(i=W),ji((i=>t.$on(e,i)),(i=>t.$off(e,i))).pipe(oi(i)))}function va(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Se((r=>t.$watch(e,((t,e)=>r.next({value:t,previous:e})),i)))}function ya(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=>{let i=[];return e.pipe(Or((t=>i.push(t))),Mi(t),oi((()=>i)),Or((()=>{i=[]})))}}var ba=Object.freeze({__proto__:null,fromOlEvent:pa,fromOlChangeEvent:fa,fromVueEvent:ga,fromVueWatcher:va,bufferDebounceTime:ya});const wa="$vlEventBus";var Sa={beforeCreate(){!function(){if(Tt(x.default,wa)||Tt(x.default.prototype,wa))return;const t=new x.default;Tt(x.default,wa)||Object.defineProperties(x.default,{[wa]:{enumerable:!0,get:()=>t}});Tt(x.default.prototype,wa)||Object.defineProperties(x.default.prototype,{[wa]:{enumerable:!0,get:()=>t}})}(),Object.defineProperties(this,{$eventBus:{enumerable:!0,get:()=>this.$vlEventBus}})}};const $a="$vlIdentityMap",Pa="instances";var Ia={data:()=>({idents:Z()}),beforeCreate(){!function(){if(Tt(x.default,$a)||Tt(x.default.prototype,$a))return;const t=new Gt;Tt(x.default,$a)||Object.defineProperties(x.default,{[$a]:{enumerable:!0,get:()=>t}});Tt(x.default.prototype,$a)||Object.defineProperties(x.default.prototype,{[$a]:{enumerable:!0,get:()=>t}})}(),Object.defineProperties(this,{$identityMap:{enumerable:!0,get:()=>this.$vlIdentityMap}})},destroyed(){this.unsetInstances()},methods:{makeIdent(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter(W).join(".")},instanceFactoryCall(t,e){if(t&&this.hasInstance(t))return this.getInstance(t);const i=e();return t&&this.setInstance(t,i),i},getInstance(t){if(t&&this.hasInstance(t))return this.idents[t]=!0,this.$identityMap.get(t,Pa)},setInstance(t,e){t&&(this.idents[t]=!0,this.$identityMap.set(t,e,Pa))},hasInstance(t){if(t)return this.$identityMap.has(t,Pa)},unsetInstance(t){t&&(delete this.idents[t],this.$identityMap.unset(t,Pa))},unsetInstances(){dt(this.idents).forEach(this.unsetInstance.bind(this))},moveInstance(t,e){return this.$identityMap.move(t,e,Pa)}}};var ja={beforeCreate(){this._rxSubs=[]},destroyed(){this.unsubscribeAll()},methods:{subscribeAll(){},unsubscribeAll(){this._rxSubs.forEach((t=>t.unsubscribe())),this._rxSubs=[]},subscribeTo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;const n=t.pipe((o=3,void 0===o&&(o=-1),function(t){return t.lift(new fr(o,t))})).subscribe(e,(t=>{i(t)}),r);var o;return this._rxSubs.push(n),n},unsubscribe(t){const e=this._rxSubs.indexOf(t);-1!==e&&(t.unsubscribe(),this._rxSubs.splice(e,1))}}};const Oa="services";var xa={inject:{$services:Oa},provide(){return{[Oa]:this.getServices()}},methods:{getServices(){return Jt({},this.$services||{})}},beforeCreate(){let t=this.$parent;for(;t&&(null==t._provided||null==t._provided.services);)t=t.$parent;null!=t&&null!=t._provided.services||delete this.$options.inject.$services}};const Ca="vm",Ta=1e3/30,_a={UNDEF:"undef",CREATING:"creating",CREATED:"created",MOUNTING:"mounting",MOUNTED:"mounted",UNMOUNTING:"unmounting",UNMOUNTED:"unmounted",DESTROYING:"destroying",DESTROYED:"destroyed"},Ra={CREATED:_a.CREATED,MOUNTED:_a.MOUNTED,UNMOUNTED:_a.UNMOUNTED,DESTROYED:_a.DESTROYED,ERROR:"error"},Fa={CREATE:"create",MOUNT:"mount",UNMOUNT:"unmount",DESTROY:"destroy"};var Ea={mixins:[Ia,ja,xa,Sa],props:{id:{type:[String,Number],default:zr,validator:t=>null!=t&&""!==t},ident:[String,Number]},data(){return{rev:0,currentId:this.id}},computed:{vmClass(){return Ft(this.$options.name)},vmId(){return[this.vmClass,this.currentId].filter(W).join(".")},vmName(){return[this.$options.name,this.currentId].filter(W).join(".")},olObjIdent(){if(this.ident)return this.makeIdent(this.ident)}},watch:{rev(){this.$olObject&&this.currentId!==this.getIdInternal()&&(this.currentId=this.getIdInternal())},...qa(["id","currentId","olObjIdent"])},async created(){this._logger=Bt(this.vmName),this._olObjectState=_a.UNDEF,this._olObject=void 0,this._olObjectEvents=Aa.call(this),Va.call(this),La.call(this),await Ma.call(this,!1)},async mounted(){await ka.call(this)},async beforeDestroy(){await Da.call(this,!0)},async destroyed(){await Ga.call(this)},methods:{beforeInit(){},async init(){this._olObject=await this.instanceFactoryCall(this.olObjIdent,this.createOlObject.bind(this)),this._olObject.vm||(this._olObject.vm=[]),this._olObject.vm.includes(this)||this._olObject.vm.push(this),await this.changed(),this.subscribeAll()},createOlObject(){throw new Error(`${this.vmName} not implemented method: createOlObject()`)},async deinit(){this.unsubscribeAll(),this.unsetInstances(),this._olObject&&(this._olObject.vm=this._olObject.vm.filter((t=>t!==this)),this._olObject=void 0)},beforeMount(){},mount(){},unmount(){},async refresh(){let e;try{if(e=await this.resolveOlObject(),e instanceof t.Observable)return new Promise((t=>{e.once("change",(()=>t())),e.changed()}))}catch(t){}return this.changed()},async scheduleRefresh(){try{await this.debounceRefresh()}catch(t){}},async remount(){this.$olObjectState===_a.MOUNTED&&(await Da.call(this),await ka.call(this))},async scheduleRemount(){[_a.MOUNTING,_a.MOUNTED].includes(this.$olObjectState)&&await this.debounceRemount()},async recreate(){if([_a.CREATED,_a.MOUNTING,_a.MOUNTED,_a.UNMOUNTING,_a.UNMOUNTED].includes(this.$olObjectState)){const t=[_a.MOUNTING,_a.MOUNTED].includes(this.$olObjectState);t&&await Da.call(this),await Ga.call(this),await Ma.call(this),t&&await ka.call(this)}},async scheduleRecreate(){[_a.CREATING,_a.CREATED,_a.MOUNTING,_a.MOUNTED,_a.UNMOUNTING,_a.UNMOUNTED].includes(this.$olObjectState)&&await this.debounceRecreate()},getServices(){return xa.methods.getServices.call(this)},subscribeAll(){Ua.call(this)},async resolveOlObject(){return await this.$createPromise,this.$olObject||function(t){throw t}(new Ya(`${this.vmName} OpenLayers object is undefined`))},async $nextTickPromise(){return new Promise(this.$nextTick.bind(this))},getId(){return at(this.$olObject&&this.getIdInternal(),this.currentId)},getIdInternal(){return this.$olObject instanceof t.Object?this.$olObject.get("id"):this.$olObject.id},setId(t){Mt(null!=t&&""!==t,"Invalid id"),this.currentId!==t&&(this.currentId=t),this.$olObject&&this.setIdInternal(t)},setIdInternal(e){this.$olObject instanceof t.Object?this.$olObject.get("id")!==e&&this.$olObject.set("id",e):this.$olObject.id!==e&&(this.$olObject.id=e)},async changed(){this.rev++,await this.$nextTickPromise()},idChanged(t){this.setId(t)},currentIdChanged(t){t!==this.id&&this.$emit("update:id",t)},olObjIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$olObject?this.setInstance(t,this.$olObject):!t&&e&&this.unsetInstance(e)},syncNonObservable(){this.setId(this.getId())}}};function Va(){this.debounceRefresh=sa(this.refresh.bind(this),Ta),this.debounceRemount=sa(this.remount.bind(this),Ta),this.debounceRecreate=sa(this.recreate.bind(this),Ta),this.debounceChanged=sa(this.changed.bind(this),Ta)}function La(){Object.defineProperties(this,{$logger:{enumerable:!0,get:()=>this._logger},$olObjectState:{enumerable:!0,get:()=>this._olObjectState},$olObject:{enumerable:!0,get:()=>this._olObject},$olObjectEvents:{enumerable:!0,get:()=>this._olObjectEvents},$createPromise:{enumerable:!0,get:()=>Na.call(this,Fa.CREATE,Ra.CREATED,{[_a.CREATING]:[Fa.CREATE,Ra.CREATED]})},$mountPromise:{enumerable:!0,get:()=>this.$createPromise.then((()=>Na.call(this,Fa.MOUNT,Ra.MOUNTED,{[_a.CREATING]:[Fa.CREATE,Ra.CREATED],[_a.MOUNTING]:[Fa.MOUNT,Ra.MOUNTED]})))},$unmountPromise:{enumerable:!0,get:()=>this.$mountPromise.then((()=>Na.call(this,Fa.UNMOUNT,Ra.UNMOUNTED,{[_a.CREATING]:[Fa.CREATE,Ra.CREATED],[_a.MOUNTING]:[Fa.MOUNT,Ra.MOUNTED],[_a.UNMOUNTING]:[Fa.UNMOUNT,Ra.UNMOUNTED]})))},$destroyPromise:{enumerable:!0,get:()=>this.$unmountPromise.then((()=>Na.call(this,Fa.DESTROY,Ra.DESTROYED,{[_a.CREATING]:[Fa.CREATE,Ra.CREATED],[_a.MOUNTING]:[Fa.MOUNT,Ra.MOUNTED],[_a.UNMOUNTING]:[Fa.UNMOUNT,Ra.UNMOUNTED],[_a.DESTROYING]:[Fa.DESTROY,Ra.DESTROYED]})))}})}function Aa(){return Ci(...Object.values(Ra).map((t=>ga(this.$eventBus,t,(e=>({name:t,args:Q(e)?e:[e]}))).pipe(_i((t=>{let{args:e}=t;return e[0]===this||e[1]===this})))))).pipe(pr(),Ce())}function Na(t,e,i){const r=(t,e)=>Ei(this.$olObjectEvents.pipe(_i((t=>{let{name:i}=t;return i===e}))),this.$olObjectEvents.pipe(_i((e=>{let{name:i,args:r}=e;return i===Ra.ERROR&&r[0]instanceof za&&r[0].action===t}))));return Ci(r(t,e),this.$olObjectEvents.pipe(_i((t=>{let{name:e,args:i}=t;return e===Ra.ERROR&&i[0]instanceof Za})))).pipe(ur(),Si((t=>{let e=We(t);var n,o;return t.name===Ra.ERROR&&t.args[0]instanceof Za&&null!=i[this.$olObjectState]&&(e=e.pipe((n=()=>r(...i[this.$olObjectState]),o?function(t){return new Ji(t,o).lift(new Xi(n))}:function(t){return t.lift(new Xi(n))}))),e})),Si((t=>t.name===Ra.ERROR?Ye(t.args[0]):We(t))),oi((t=>{let{args:e}=t;return 1===e.length?e[0]:e}))).toPromise()}async function Ma(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this._olObjectState;t&&(this._olObjectEvents=Aa.call(this)),this._olObjectEvents.subscribe();try{if(await Promise.race([Promise.resolve(this.beforeInit()).then((()=>!1)),this.$olObjectEvents.pipe(_i((t=>{let{name:e,args:i}=t;return e===Ra.ERROR&&i[0]instanceof Za})),ur()).toPromise().then((()=>!0))]))return void 0;this._olObjectState=_a.CREATING,await this.init(),this._olObjectState=_a.CREATED,this.$emit(Ra.CREATED,this),this.$eventBus.$emit(Ra.CREATED,this)}catch(t){const i=new za(t,this.vmName,Fa.CREATE);throw this._olObjectState=e,this.$emit(Ra.ERROR,i,this),this.$eventBus.$emit(Ra.ERROR,i,this),i}}async function ka(){const t=this._olObjectState;try{await this.$createPromise;if(await Promise.race([Promise.resolve(this.beforeMount()).then((()=>!1)),this.$olObjectEvents.pipe(_i((t=>{let{name:e,args:i}=t;return e===Ra.ERROR&&i[0]instanceof Za})),ur()).toPromise().then((()=>!0))]))return void 0;this._olObjectState=_a.MOUNTING,await this.mount(),this._olObjectState=_a.MOUNTED,this.$emit(Ra.MOUNTED,this),this.$eventBus.$emit(Ra.MOUNTED,this)}catch(e){if(e instanceof Za)return;const i=new za(e,this.vmName,Fa.MOUNT);throw this._olObjectState=t,this.$emit(Ra.ERROR,i,this),this.$eventBus.$emit(Ra.ERROR,i,this),i}}async function Da(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this._olObjectState;if(t&&[_a.UNDEF,_a.CREATING,_a.CREATED,_a.MOUNTING].includes(this.$olObjectState)){const t=new Za(`${this.vmName} ol object lifecycle canceled`);this.$emit(Ra.ERROR,t,this),this.$eventBus.$emit(Ra.ERROR,t,this)}try{try{await this.$mountPromise}catch(t){if(!(t instanceof Za))throw t;if(this.$olObjectState!==_a.MOUNTED)return void 0}this._olObjectState=_a.UNMOUNTING,await this.unmount(),this._olObjectState=_a.UNMOUNTED,this.$emit(Ra.UNMOUNTED,this),this.$eventBus.$emit(Ra.UNMOUNTED,this)}catch(t){const i=new za(t,this.vmName,Fa.UNMOUNT);throw this._olObjectState=e,this.$emit(Ra.ERROR,this,i),this.$eventBus.$emit(Ra.ERROR,this,i),i}}async function Ga(){const t=this._olObjectState;try{try{await this.$unmountPromise}catch(t){if(!(t instanceof Za))throw t;if(this.$olObjectState!==_a.CREATED)return void 0}this._olObjectState=_a.DESTROYING,await this.deinit(),this._olObjectState=_a.DESTROYED,this.$emit(Ra.DESTROYED,this),this.$eventBus.$emit(Ra.DESTROYED,this)}catch(e){const i=new za(e,this.vmName,Fa.DESTROY);throw this._olObjectState=t,this.$emit(Ra.ERROR,this,i),this.$eventBus.$emit(Ra.ERROR,this,i),i}}function Ua(){if(this.$olObject instanceof t.Observable){const t=At("set"),e=fa(this.$olObject,["id"],!0,(e=>({...e,setter:this[t(e.prop)]})));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)})),this.subscribeTo(Ci(pa(this.$olObject,ua),pa(this.$olObject,ma.PROPERTYCHANGE)),this.debounceChanged.bind(this)),this.subscribeTo(pa(this.$olObject,ca),(t=>this.$emit(Ra.ERROR,t)))}else this.subscribeTo(Oi(Ta),this.syncNonObservable.bind(this))}class za extends Error{constructor(t,e,i){t instanceof za&&(t=t.err);const r=`${e} ${i} ol object failed`,n=`${r}: ${t.message}`;super(n),Dt(this,"name","LifecycleError"),this.vmName=e,this.action=i,this.err=t,t.stack?this.stack=`${r}: ${t.stack}`:it(Error.captureStackTrace)?Error.captureStackTrace(this,this.constructor):this.stack=new Error(n).stack}}class Za extends Error{constructor(t){super(t),Dt(this,"name","CanceledError"),it(Error.captureStackTrace)?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack}}function Ba(t){return t instanceof za&&t.action===Fa.CREATE}function Wa(t){return t instanceof za&&t.action===Fa.MOUNT}class Ya extends Error{constructor(t){super(t),Dt(this,"name","OLObjectNotInitializedError"),it(Error.captureStackTrace)?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack}}function qa(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Kt(t,(t=>({deep:e.includes(t),handler(){const e=this[`${t}Changed`];return it(e)?e(...arguments):ut(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])?void 0:this.scheduleRecreate()}})))}const Xa=t=>{if(null!=t)return"object"==typeof t?JSON.stringify(t):t},Ha=t=>Hs(t,["FORMAT","F","LAYERS","LAYERDEFS","DYNAMICLAYERS","DPI","TRANSPARENT","TIME","LAYERTIMEOPTIONS","GDBVERSION","MAPSCALE","ROTATION","DATUMTRANSFORMATIONS","MAPRANGEVALUES","LAYERRANGEVALUES","LAYERPARAMETERVALUES","HISTORICMOMENT"]);var Ja={props:{hidpi:{type:Boolean,default:!0},format:{type:String,default:"PNG32"},layers:[String,Array],layerDefs:[Object,String],dynamicLayers:[Array,String],dpi:Number,transparent:{type:Boolean,default:!0},time:[String,Array],layerTimeOptions:[Object,String],gdbVersion:String,mapScale:String,rotation:Number,datumTransformations:[Array,String],mapRangeValues:[Array,String],layerRangeValues:[Array,String],layerParameterValues:[Array,String],historicMoment:Number,params:Object},data:()=>({currentParams:void 0}),computed:{inputLayers(){return Q(this.layers)?this.layers.join(","):this.layers},inputTime(){return Q(this.time)?this.time.join(","):this.time},inputLayerDefs(){return Xa(this.layerDefs)},inputDynamicLayers(){return Xa(this.dynamicLayers)},inputLayerTimeOptions(){return Xa(this.layerTimeOptions)},inputDatumTransformations(){return Xa(this.datumTransformations)},inputMapRangeValues(){return Xa(this.mapRangeValues)},inputLayerRangeValues(){return Xa(this.layerRangeValues)},inputLayerParameterValues(){return Xa(this.layerParameterValues)},inputHistoricMoment(){return Xa(this.historicMoment)},customParams(){return this.params?Ha(this.params):void 0},inputParams(){return{...this.customParams||{},LAYERS:this.inputLayers,FORMAT:this.format,LAYERDEFS:this.inputLayerDefs,DYNAMICLAYERS:this.inputDynamicLayers,DPI:this.dpi,TRANSPARENT:this.transparent,TIME:this.inputTime,LAYERTIMEOPTIONS:this.inputLayerTimeOptions,GDBVERSION:this.gdbVersion,MAPSCALE:this.mapScale,ROTATION:this.rotation,DATUMTRANSFORMATIONS:this.inputDatumTransformations,MAPRANGEVALUES:this.inputMapRangeValues,LAYERRANGEVALUES:this.inputLayerRangeValues,LAYERPARAMETERVALUES:this.inputLayerParameterValues,HISTORICMOMENT:this.inputHistoricMoment}},...vt(["format","inputLayers","inputLayerDefs","inputDynamicLayers","dpi","transparent","inputTime","inputLayerTimeOptions","gdbVersion","mapScale","rotation","inputDatumTransformations","inputMapRangeValues","inputLayerRangeValues","inputLayerParameterValues","inputHistoricMoment"],((t,e)=>{const i="input"===e.slice(0,5)?jt(e.slice(5)):e;return t["current"+It(i)]=function(){return at((this.currentParams||{})[i.toUpperCase()],(this.inputParams||{})[i.toUpperCase()])},t}),{})},watch:{rev(){this.$source&&(ut(this.currentParams,this.$source.getParams())||(this.currentParams=this.$source.getParams()))},...Kt(["currentFormat","currentLayers","currentLayerDefs","currentDynamicLayers","currentDpi","currentTransparent","currentTime","currentLayerTimeOptions","currentGdbVersion","currentMapScale","currentRotation","currentDatumTransformations","currentMapRangeValues","currentLayerRangeValues","currentLayerParameterValues","currentHistoricMoment"],(t=>function(e){const i=jt(t.slice(7));ut(e,this[Tt(this,"input"+It(i))?"input"+It(i):i])||this.$emit("update:"+i,nt(e)?Lt(e):e)})),...qa(["hidpi","inputParams","currentParams"],["inputParams","currentParams"])},created(){this.currentParams=this.inputParams&&Lt(this.inputParams)},methods:{getParams(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getParams(),this.currentParams)},updateParams(t){ut(t=vt({...this.currentParams,...t},((t,e,i)=>({...t,[i.toUpperCase()]:e})),{}),this.currentParams)||(this.currentParams=t),this.$source&&!ut(t,this.$source.getParams())&&this.$source.updateParams(t)},updateParam(t,e){this.updateParams({[t.toUpperCase()]:e})},inputParamsChanged(t){this.updateParams(t)},currentParamsChanged(t){ut(t=t?Ha(t):void 0,this.customParams)||this.$emit("update:params",t&&Lt(t))}}},Ka={computed:{resolvedViewProjection(){return at(this.viewProjection,Hn)},resolvedDataProjection(){var t;return at(this.dataProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.resolvedViewProjection)}},watch:{resolvedViewProjection(){return this.resolvedViewProjectionChanged(...arguments)},resolvedDataProjection(){return this.resolvedDataProjectionChanged(...arguments)}},methods:{pointToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Qn(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},pointToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Qn(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},lineToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return ro(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},lineToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return ro(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},polygonToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return so(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},polygonToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return so(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},multiPointToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return uo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},multiPointToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return uo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},multiLineToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return mo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},multiLineToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return mo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},multiPolygonToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return go(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},multiPolygonToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return go(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},extentToViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return yo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},extentToDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return yo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},writeGeometryInDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Ss(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},writeGeometryInViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Ss(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},readGeometryInDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return $s(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},readGeometryInViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return $s(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},writeFeatureInDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return bs(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},writeFeatureInViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return bs(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},readFeatureInDataProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return ws(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},readFeatureInViewProj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return ws(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},resolvedViewProjectionChanged(t,e){t!==e&&this.$emit("update:viewProjection",t)},resolvedDataProjectionChanged(t,e){t!==e&&this.$emit("update:dataProjection",t)}}},Qa={render(t){var e;const i=(null===(e=this.$options)||void 0===e?void 0:e.stubVNode)||{};if(i.empty){const e=t();return"string"==typeof i.empty?e.text=i.empty:"function"==typeof i.empty&&(e.text=i.empty.call(this)),e}let r;r=!1===i.slots?void 0:Qt(this.$slots,i.slots);const n={attrs:"function"==typeof i.attrs?i.attrs.call(this):i.attrs,style:{display:"none !important"}};return t(i.tag||"i",n,r)}},tl={methods:{async beforeInit(){try{return await Vr((()=>null!=this.$mapVm),Ei(this.$olObjectEvents.pipe(_i((t=>{let{name:e,args:i}=t;return e===Ra.ERROR&&i[0]instanceof Za}))),ga(this.$eventBus,Ra.ERROR).pipe(_i((t=>{let[e,i]=t;return Ba(e)&&Tt(i,"$map")&&te(this,i)})))).pipe(cr(!0))),this.$mapVm.resolvedViewProjection!==this.viewProjection&&(this.viewProjection=this.$mapVm.resolvedViewProjection),this.$mapVm.resolvedDataProjection!==this.dataProjection&&(this.dataProjection=this.$mapVm.resolvedDataProjection),this.subscribeTo(va(this,(()=>this.$mapVm.resolvedViewProjection)),(t=>{let{value:e}=t;e!==this.viewProjection&&(this.viewProjection=e)})),this.subscribeTo(va(this,(()=>this.$mapVm.resolvedDataProjection)),(t=>{let{value:e}=t;e!==this.dataProjection&&(this.dataProjection=e)})),await this.$nextTickPromise(),Ea.methods.beforeInit.call(this)}catch(t){throw t.message=`${this.vmName} wait for $mapVm injection: ${t.message}`,t}}}},el={mixins:[Qa,Ka,Ea,tl],stubVNode:{attrs(){return{id:this.vmId,class:this.vmClass}}},props:{className:{type:String,default:"ol-layer"},opacity:{type:Number,default:1},visible:{type:Boolean,default:!0},extent:{type:Array,validator:t=>4===t.length&&t.every(J)},extentProjection:{type:String,validator:t=>!!u.get(t)},zIndex:Number,minResolution:Number,maxResolution:Number,minZoom:Number,maxZoom:Number},data(){return{viewProjection:Hn,dataProjection:Hn,currentExtentViewProj:Kr(this.extent),currentMaxResolution:this.maxResolution,currentMinResolution:this.minResolution,currentMaxZoom:this.maxZoom,currentMinZoom:this.minZoom,currentOpacity:this.opacity,currentVisible:this.visible,currentZIndex:this.zIndex}},computed:{resolvedExtentProjection(){return at(this.extentProjection,this.resolvedDataProjection)},extentDataProj(){return Kr(this.extent)},extentViewProj(){return yo(this.extent,this.resolvedExtentProjection,this.resolvedViewProjection)},currentExtentDataProj(){return yo(this.currentExtentViewProj,this.resolvedViewProjection,this.resolvedExtentProjection)}},watch:{rev(){this.$layer&&(ut(this.currentExtentViewProj,this.$layer.getExtent())||(this.currentExtentViewProj=this.$layer.getExtent()),this.currentMaxResolution!==this.$layer.getMaxResolution()&&(this.currentMaxResolution=this.$layer.getMaxResolution()),this.currentMinResolution!==this.$layer.getMinResolution()&&(this.currentMinResolution=this.$layer.getMinResolution()),this.currentMaxZoom!==this.$layer.getMaxZoom()&&(this.currentMaxZoom=this.$layer.getMaxZoom()),this.currentMinZoom!==this.$layer.getMinZoom()&&(this.currentMinZoom=this.$layer.getMinZoom()),this.currentOpacity!==this.$layer.getOpacity()&&(this.currentOpacity=this.$layer.getOpacity()),this.currentVisible!==this.$layer.getVisible()&&(this.currentVisible=this.$layer.getVisible()),this.currentZIndex!==this.$layer.getZIndex()&&(this.currentZIndex=this.$layer.getZIndex()))},...qa(["className","opacity","currentOpacity","visible","currentVisible","extentViewProj","currentExtentDataProj","zIndex","currentZIndex","minResolution","currentMinResolution","maxResolution","currentMaxResolution","minZoom","currentMinZoom","maxZoom","currentMaxZoom"],["extentViewProj","currentExtentDataProj"])},created(){var t;il.call(this),this.currentExtentViewProj=null===(t=this.extentViewProj)||void 0===t?void 0:t.slice()},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},async createOlObject(){return ks(await this.createLayer(),this.currentId)},createLayer(){throw new Error(`${this.vmName} not implemented method: createLayer`)},async mount(){var t;return null===(t=this.$layersContainer)||void 0===t||t.addLayer(this),Ea.methods.mount.call(this)},async unmount(){var t;return null===(t=this.$layersContainer)||void 0===t||t.removeLayer(this),Ea.methods.unmount.call(this)},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),{get layerVm(){return t}})},subscribeAll(){Ea.methods.subscribeAll.call(this),rl.call(this)},getIdInternal(){return Ns(this.$layer)},setIdInternal(t){t!==this.getIdInternal()&&Ms(this.$layer,t)},resolveLayer:Ea.methods.resolveOlObject,getExtent(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$layer)return t?this.currentExtentViewProj:this.currentExtentDataProj;const e=this.$layer.getExtent();return t?Kr(e):yo(e,this.resolvedViewProjection,this.resolvedExtentProjection)},setExtent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(null==t||Q(t)&&4===t.length,"Invalid extent"),ut(t=e?Kr(t):yo(t,this.resolvedExtentProjection,this.resolvedViewProjection),this.currentExtentViewProj)||(this.currentExtentViewProj=t),this.$layer&&!ut(t,this.$layer.getExtent())&&this.$layer.setExtent(t)},getMaxResolution(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getMaxResolution(),this.currentMaxResolution)},setMaxResolution(t){Mt(J(t=Number(t)),"Invalid max resolution"),t!==this.currentMaxResolution&&(this.currentMaxResolution=t),this.$layer&&t!==this.$layer.getMaxResolution()&&this.$layer.setMaxResolution(t)},getMinResolution(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getMinResolution(),this.currentMinResolution)},setMinResolution(t){Mt(J(t=Number(t)),"Invalid min resolution"),t!==this.currentMinResolution&&(this.currentMinResolution=t),this.$layer&&t!==this.$layer.getMinResolution()&&this.$layer.getMinResolution(t)},getMaxZoom(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getMaxZoom(),this.currentMaxZoom)},setMaxZoom(t){Mt(J(t=Number(t)),"Invalid max zoom"),t!==this.currentMaxZoom&&(this.currentMaxZoom=t),this.$layer&&t!==this.$layer.getMaxZoom()&&this.$layer.setMaxZoom(t)},getMinZoom(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getMinZoom(),this.currentMinZoom)},setMinZoom(t){Mt(J(t=Number(t)),"Invalid min zoom"),t!==this.currentMinZoom&&(this.currentMinZoom=t),this.$layer&&t!==this.$layer.getMinZoom()&&this.$layer.setMinZoom(t)},getOpacity(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getOpacity(),this.currentOpacity)},setOpacity(t){Mt(J(t=Number(t)),"Invalid opacity"),t!==this.currentOpacity&&(this.currentOpacity=t),this.$layer&&t!==this.$layer.getOpacity()&&this.$layer.setOpacity(t)},getVisible(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getVisible(),this.currentVisible)},setVisible(t){(t=!!t)!==this.currentVisible&&(this.currentVisible=t),this.$layer&&t!==this.$layer.getVisible()&&this.$layer.setVisible(t)},getZIndex(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getZIndex(),this.currentZIndex)},setZIndex(t){Mt(J(t=Number(t)),"Invalid zIndex"),t!==this.currentZIndex&&(this.currentZIndex=t),this.$layer&&t!==this.$layer.getZIndex()&&this.$layer.setZIndex(t)},async isAtPixel(t){const e=await this.resolveLayer();return this.$mapVm.forEachLayerAtPixel(t,(t=>t===e))},opacityChanged(t){this.setOpacity(t)},currentOpacityChanged(t){t!==this.opacity&&this.$emit("update:opacity",t)},visibleChanged(t){this.setVisible(t)},currentVisibleChanged(t){t!==this.visible&&this.$emit("update:visible",t)},extentViewProjChanged(t){this.setExtent(t,!0)},currentExtentDataProjChanged(t){ut(t,this.extentDataProj)||this.$emit("update:extent",t.slice())},zIndexChanged(t){this.setZIndex(t)},currentZIndexChanged(t){t!==this.zIndex&&this.$emit("update:zIndex",t)},minResolutionChanged(t){this.setMinResolution(t)},currentMinResolutionChanged(t){t!==this.minResolution&&this.$emit("update:minResolution",t)},maxResolutionChanged(t){this.setMaxResolution(t)},currentMaxResolutionChanged(t){t!==this.maxResolution&&this.$emit("update:maxResolution",t)},minZoomChanged(t){this.setMinZoom(t)},currentMinZoomChanged(t){t!==this.minZoom&&this.$emit("update:minZoom",t)},maxZoomChanged(t){this.setMaxZoom(t)},currentMaxZoomChanged(t){t!==this.maxZoom&&this.$emit("update:maxZoom",t)}}};function il(){Object.defineProperties(this,{$layer:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}},$layersContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.layersContainer}}})}async function rl(){const t=At("set"),e=fa(this.$layer,["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","extent"],!0,(e=>({...e,setter:i=>{const r=[i];"extent"===e.prop&&r.push(!0),this[t(e.prop)](...r)}})));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}))}var nl="add",ol="remove",sl={mixins:[Ia,ja],computed:{controlsCollectionIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"controls_collection")}},watch:{...qa(["controlsCollectionIdent"])},created(){this._controlsCollection=this.instanceFactoryCall(this.controlsCollectionIdent,(()=>new t.Collection)),this._controlSubs={},al.call(this)},methods:{getServices(){const t=this;return{get controlsContainer(){return t}}},subscribeAll(){ll.call(this)},initDefaultControls(e){let r;this.getControls().forEach((t=>{t.get("vl_default")&&this.removeControl(t)})),Q(e)||e instanceof t.Collection?r=e:!1!==e&&(r=i.defaults(ot(e)?e:void 0)),r&&(r.forEach((t=>t.set("vl_default",!0))),this.addControls(r))},initializeControl(t){var e;return kt(t=(null===(e=t)||void 0===e?void 0:e.$control)||t,i.Control),Wr(t)},addControls(t){gt(t,this.addControl.bind(this))},addControl(t){t=this.initializeControl(t),this.getControlById(Zr(t))||this.$controlsCollection.push(t)},removeControls(t){gt(t,this.removeControl.bind(this))},removeControl(t){var e;(t=this.getControlById(Zr((null===(e=t)||void 0===e?void 0:e.$control)||t)))&&this.$controlsCollection.remove(t)},clearControls(){this.$controlsCollection.clear()},getControls(){return this.$controlsCollection.getArray().slice()},getControlsCollection(){return this._controlsCollection},getControlById(t){return bt(this.getControls(),(e=>Zr(e)===t))},controlsCollectionIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$controlsCollection?this.setInstance(t,this.$controlsCollection):!t&&e&&this.unsetInstance(e)}}};function al(){Object.defineProperties(this,{$controlsCollection:{enumerable:!0,get:this.getControlsCollection}})}function ll(){const t=Ci(pa(this.$controlsCollection,nl).pipe(oi((t=>({...t,element:this.initializeControl(t.element)}))),Or((t=>{let{element:e}=t;const i=p.getUid(e),r=fa(e,"id",!0);this._controlSubs[i]=this.subscribeTo(r,this.scheduleRefresh.bind(this))}))),pa(this.$controlsCollection,ol).pipe(Or((t=>{let{element:e}=t;const i=p.getUid(e);this._controlSubs[i]&&(this.unsubscribe(this._controlSubs[i]),delete this._controlSubs[i])})))).pipe(ya(Ta));this.subscribeTo(t,(async t=>{await this.debounceChanged(),gt(t,(t=>{let{type:e,element:i}=t;this.$emit(e+"control",i),this.$emit(e+":control",i)}))}))}var ul={mixins:[Ka],created(){this._geometry=void 0,this._geometryVm=void 0,cl.call(this)},methods:{getServices(){const t=this;return{get geometryContainer(){return t}}},getGeometryTarget(){throw new Error(`${this.vmName} not implemented method: getGeometryTarget()`)},getGeometry(){var t;return at(null===(t=this.getGeometryTarget())||void 0===t?void 0:t.getGeometry(),this._geometry)},getGeometryVm(){return this._geometryVm},setGeometry(t){var e;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];js(t=(null===(e=t)||void 0===e?void 0:e.$geometry)||t)&&(t=i?this.readGeometryInViewProj(t):this.readGeometryInDataProj(t)),t||(t=void 0),Mt(!t||t instanceof s.Geometry,"Invalid geometry");const r=this.getGeometryTarget();var n;(r&&t!==r.getGeometry()&&(r.setGeometry(t),this.scheduleRefresh()),t!==this._geometry)&&(this._geometry=t,this._geometryVm=(null===(n=t)||void 0===n?void 0:n.vm)&&t.vm[0],this.scheduleRefresh())}}};function cl(){Object.defineProperties(this,{$geometry:{enumerable:!0,get:this.getGeometry},$geometryVm:{enumerable:!0,get:this.getGeometryVm}})}var hl={created(){this._style=void 0,dl.call(this)},methods:{getServices(){const t=this;return{get styleContainer(){return t}}},getDefaultStyle(){},getStyleTarget(){throw new Error(`${this.vmName} not implemented method: getStyleTarget()`)},getStyle(){var t;return at(null===(t=this.getStyleTarget())||void 0===t?void 0:t.getStyle(),this._style)},addStyle(t){if(!t)return;const e=(null==t?void 0:t.$style)||t;let i=this._style;it(e)?i=t:(Q(i)||(i=[]),i.includes(e)||i.push(e)),this.setStyle(i)},removeStyle(t){var e;if(!t)return;t=(null===(e=t)||void 0===e?void 0:e.$style)||t;let i=this._style;i===t?i=void 0:Q(i)&&(i=i.filter((e=>e!==t)),0===i.length&&(i=void 0)),this.setStyle(i)},setStyle(t){t||(t=void 0),t&&(Tt(t,"$style")||Tt(t,"$styleFunction")?t=t.$style||t.$styleFunction:Q(t)&&(t=t.map((t=>(null==t?void 0:t.$style)||t))),it(t)?t=this.createStyleFunc(t,this.getDefaultStyle()):(Q(t)||(t=[t]),t.length>0||(t=void 0)));const e=this.getStyleTarget();e&&!ut(t,e.getStyle())&&(e.setStyle(t),this.scheduleRefresh()),ut(t,this._style)||(this._style=t,this.scheduleRefresh())},createStyleFunc:(t,e)=>function(i,r){if(!i.getGeometry())return;let n;return t&&it(t)?n=t(i,r):Q(t)&&(n=t.slice()),null==n||Q(n)&&n.length||n instanceof c.Style?n:e?it(e)?e(i,r):e:null}}};function dl(){Object.defineProperties(this,{$style:{enumerable:!0,get:this.getStyle}})}var ml={mixins:[Qa,Ka,ul,hl,Ea,tl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{properties:{type:Object,default:Z}},data(){return{viewProjection:Hn,dataProjection:Hn,currentProperties:Lt(this.properties),currentGeometryName:"geometry"}},computed:{geometryDataProj(){if(this.rev&&this.$geometry)return this.writeGeometryInDataProj(this.$geometry)},geometryViewProj(){if(this.rev&&this.$geometry)return this.writeGeometryInViewProj(this.$geometry)},pointDataProj(){return this.pointToDataProj(this.pointViewProj)},pointViewProj(){if(this.rev&&this.$geometry)return zn(this.$geometry)},style(){if(!this.rev||!this.$style)return;let t=this.$style;return it(t)?t:t?(Q(t)||(t=[t]),t.map((t=>as(t,(t=>this.writeGeometryInDataProj(t)))))):void 0}},watch:{rev(){this.$feature&&(ut(this.currentProperties,_s(this.$feature))||(this.currentProperties=_s(this.$feature)),this.currentGeometryName!==this.$feature.getGeometryName()&&(this.currentGeometryName=this.$feature.getGeometryName()))},...qa(["properties","currentProperties","currentGeometryName","geometryDataProj","pointDataProj","style"],["properties","currentProperties","geometryDataProj","pointDataProj","style"])},created(){pl.call(this)},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},createOlObject(){const t=Cs(this.createFeature(),this.currentId);return t.setGeometryName(this.currentGeometryName),t.setGeometry(this.$geometry),t.setStyle(this.$style),t},createFeature(){return new t.Feature(this.currentProperties)},async beforeMount(){try{return await Vr((()=>null!=this.$geometryVm),Ei(this.$olObjectEvents.pipe(_i((t=>{let{name:e,args:i}=t;return e===Ra.ERROR&&i[0]instanceof Za}))),ga(this.$eventBus,ma.ERROR).pipe(_i((t=>{let[e,i]=t;return(Ba(e)||Wa(e))&&Tt(i,"$geometry")&&te(i,this)})))).pipe(cr(!0))),Ea.methods.beforeMount.call(this)}catch(t){throw t.message=`${this.vmName} wait for $geometry failed: ${t.message}`,t}},async mount(){var t;return null===(t=this.$featuresContainer)||void 0===t||t.addFeature(this),Ea.methods.mount.call(this)},async unmount(){var t;return null===(t=this.$featuresContainer)||void 0===t||t.removeFeature(this),Ea.methods.unmount.call(this)},subscribeAll(){Ea.methods.subscribeAll.call(this),fl.call(this)},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),ul.methods.getServices.call(this),hl.methods.getServices.call(this),{get featureVm(){return t}})},getIdInternal(){return Os(this.$feature)},setIdInternal(t){t!==this.getIdInternal()&&xs(this.$feature,t)},resolveFeature:Ea.methods.resolveOlObject,getGeometryTarget(){return this.$feature},getStyleTarget(){return this.$feature},getGeometryName(){var t;return at(null===(t=this.$feature)||void 0===t?void 0:t.getGeometryName(),this.currentGeometryName)},setGeometryName(t){Mt(K(t)&&!ht(t),"Invalid geometry name"),t!==this.currentGeometryName&&(this.currentGeometryName=t),this.$feature&&t!==this.$feature.getGeometryName()&&this.$feature.setGeometryName(t)},getProperties(){return at(this.$feature&&_s(this.$feature),this.currentProperties)},setProperties(t){ut(t=_s({properties:t}),this.currentProperties)||(this.currentProperties=t),this.$feature&&!ut(t,_s(this.$feature))&&Rs(this.$feature,t)},async isAtPixel(t){const e=await this.resolveFeature();let i;if(this.$layerVm){const t=await this.$layerVm.resolveLayer();i=e=>e===t}return this.$mapVm.forEachFeatureAtPixel(t,(t=>t===e),{layerFilter:i})},propertiesChanged(t){this.setProperties(t)},currentPropertiesChanged(t){ut(t,this.properties)||this.$emit("update:properties",t&&Lt(t))},currentGeometryNameChanged(t,e){t!==e&&this.$emit("update:geometryName",t)},geometryDataProjChanged(t,e){ut(t,e)||this.$emit("update:geometry",t&&Lt(t))},pointDataProjChanged(t,e){ut(t,e)||this.$emit("update:point",t&&Lt(t))},styleChanged(t,e){ut(t,e)||this.$emit("update:style",nt(t)?Lt(t):t)}}};function pl(){Object.defineProperties(this,{$feature:{enumerable:!0,get:()=>this.$olObject},$layerVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.layerVm}},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$featuresContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.featuresContainer}}})}async function fl(){const t=pa(this.$feature,ma.PROPERTYCHANGE,(t=>{let{key:e}=t;return e===this.$feature.getGeometryName()?{prop:"geometry",value:this.$feature.getGeometry(),setter:t=>this.setGeometry(t,!0)}:{prop:"properties",value:_s(this.$feature),setter:this.setProperties}})).pipe(Qi(ut));this.subscribeTo(t,(t=>{let{setter:e,value:i}=t;return e(i)}))}var gl={methods:{initializeFeature(t){var e;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ot(t=(null===(e=t)||void 0===e?void 0:e.$feature)||t)&&(t=i?this.readFeatureInViewProj(t):this.readFeatureInDataProj(t)),Cs(t)},updateFeature(t,e){var i;if(null!==(i=this.$mapVm)&&void 0!==i&&i.isInteracting())return;const r=this.writeFeatureInViewProj(t),n=this.writeFeatureInViewProj(e);if(ut(r,n))return;Os(t)!==Os(e)&&xs(t,Os(e));const o=_s(e);ut(o,_s(t))||Rs(t,o);ut(Ct(n,"properties.vl_circle")||n.geometry||null,Ct(r,"properties.vl_circle")||r.geometry||null)||t.setGeometry(e.getGeometry()||null);const s=e.getStyle(),a=t.getStyle();it(a)&&it(s)?a!==s&&t.setStyle(s):it(s)&&t.setStyle(s);ut(Ct(n,"properties.vl_style")||null,Ct(r,"properties.vl_style")||null)||t.setStyle(s)}}},vl={mixins:[Ia,ja,Ka,gl],computed:{featuresCollectionIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"features_collection")}},watch:{...qa(["featuresCollectionIdent"])},created(){this._featuresCollection=this.instanceFactoryCall(this.featuresCollectionIdent,(()=>new t.Collection)),this._featureSubs={},yl.call(this)},methods:{getServices(){const t=this;return{get featuresContainer(){return t}}},subscribeAll(){bl.call(this)},addFeatures(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];gt(t,(t=>this.addFeature(t,e)))},addFeature(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=this.initializeFeature(t,e);const i=this.getFeatureById(Os(t));null==i?this.$featuresCollection.push(t):this.updateFeature(i,t)},removeFeatures(t){gt(t,this.removeFeature.bind(this))},removeFeature(t){var e;(t=this.getFeatureById(Os((null===(e=t)||void 0===e?void 0:e.$feature)||t)))&&this.$featuresCollection.remove(t)},clearFeatures(){this.$featuresCollection.clear()},getFeatureById(t){return bt(this.getFeatures(),(e=>Os(e)===t))},getFeatures(){return this.$featuresCollection.getArray().slice()},getFeaturesCollection(){return this._featuresCollection},forEachFeature(t){let e;return this.$featuresCollection.forEach((function(){e=t(...arguments)})),e},forEachFeatureInExtent(t,e){return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Kr(t):this.extentToViewProj(t),this.forEachFeature((i=>{const r=i.getGeometry();if(r&&r.intersectsExtent(t)){const t=e(i);if(t)return t}}))},forEachFeatureIntersectingExtent(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.forEachFeatureInExtent(t,e,i)},getFeaturesAtCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getFeaturesInExtent([t[0],t[1],t[0],t[1]],e)},getFeaturesInExtent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[];return this.forEachFeatureIntersectingExtent(t,(t=>{i.push(t)}),e),i},getClosestFeatureToCoordinate(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Qr(t):this.pointToViewProj(t);let r=1/0;return this.forEachFeature((n=>{if(!i(n))return;const o=n.getGeometry();if(!o)return;const s=o.getClosestPoint(t),a=r;r=Math.pow(s[0]-t[0],2)+Math.pow(s[1]-t[1]),r<a&&(e=n)})),e},getFeaturesExtent(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.forEachFeature((e=>{const i=e.getGeometry();if(!i)return;const r=i.getExtent();t=t?[r[0]<t[0]?r[0]:t[0],r[1]<t[1]?r[1]:t[1],r[2]>t[2]?r[2]:t[2],r[3]>t[3]?r[3]:t[3]]:r})),e?t:this.extentToDataProj(t)},featuresCollectionIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$featuresCollection?this.setInstance(t,this.$featuresCollection):!t&&e&&this.unsetInstance(e)}}};function yl(){Object.defineProperties(this,{$featuresCollection:{enumerable:!0,get:this.getFeaturesCollection}})}function bl(){const t=pa(this.$featuresCollection,nl).pipe(oi((t=>({...t,element:this.initializeFeature(t.element)}))),Or((t=>{let{element:e}=t;const i=p.getUid(e),r=Ci(pa(e,ma.PROPERTYCHANGE),pa(e,ua)).pipe(Qi(ut));this._featureSubs[i]=this.subscribeTo(r,this.debounceChanged.bind(this))}))),e=Ci(t,pa(this.$featuresCollection,ol).pipe(Or((t=>{let{element:e}=t;const i=p.getUid(e);this._featureSubs[i]&&(this.unsubscribe(this._featureSubs[i]),delete this._featureSubs[i])})))).pipe(oi((t=>{let{type:e,element:i}=t;const r=this.resolvedViewProjection,n=this.resolvedDataProjection;return{type:e,feature:i,get json(){return this._json||(this._json=bs(this.feature,r,n,6)),this._json}}})),ya(Ta));this.subscribeTo(e,(async t=>{await this.debounceChanged(),gt(t,(t=>{this.$emit(t.type+"feature",t),this.$emit(t.type+":feature",t.feature)}))}))}var wl={created(){this._fill=void 0,this._fillVm=void 0,Sl.call(this)},methods:{getServices(){const t=this;return{get fillStyleContainer(){return t}}},getFillStyleTarget(){throw new Error(`${this.vmName} not implemented method: getFillStyleTarget()`)},getFill(){var t;return at(null===(t=this.getFillStyleTarget())||void 0===t?void 0:t.getFill(),this._fill)},getFillVm(){return this._fillVm},setFill(t){var e,i;((t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),Mt(!t||t instanceof c.Fill,"Invalid fill style"),t!==this._fill)&&(this._fill=t,this._fillVm=(null===(i=t)||void 0===i?void 0:i.vm)&&t.vm[0],this.scheduleRefresh());const r=this.getFillStyleTarget();r&&t!==r.getFill()&&(r.setFill(t),this.scheduleRefresh())}}};function Sl(){Object.defineProperties(this,{$fill:{enumerable:!0,get:this.getFill},$fillVm:{enumerable:!0,get:this.getFillVm}})}var $l={mixins:[Qa,Ka,Ea,tl],stubVNode:{empty(){return this.vmId}},data:()=>({viewProjection:Hn,dataProjection:Hn,extentViewProj:void 0}),computed:{type(){if(this.rev&&this.$geometry)return this.getType()},extentDataProj(){return this.extentToDataProj(this.extentViewProj)}},watch:{rev(){this.$geometry&&(ut(this.extentViewProj,this.$geometry.getExtent())||(this.extentViewProj=this.$geometry.getExtent().slice()))},...qa(["extentDataProj"],["extentDataProj"])},created(){Pl.call(this)},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},async createOlObject(){return Wn(await this.createGeometry(),this.currentId)},createGeometry(){throw new Error(`${this.vmName} not implemented method: createGeometry()`)},async mount(){var t;return null===(t=this.$geometryContainer)||void 0===t||t.setGeometry(this),Ea.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$geometryContainer)||void 0===t?void 0:t.getGeometryVm())===this&&this.$geometryContainer.setGeometry(null),Ea.methods.unmount.call(this)},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),{get geometryVm(){return t}})},subscribeAll(){Ea.methods.subscribeAll.call(this),Il.call(this)},getIdInternal(){return Zn(this.$geometry)},setIdInternal(t){t!==this.getIdInternal()&&Bn(this.$geometry,t)},resolveGeometry:Ea.methods.resolveOlObject,getType(){var t;return at(null===(t=this.$geometry)||void 0===t?void 0:t.getType(),this.type)},getExtent(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=at(null===(t=this.$geometry)||void 0===t?void 0:t.getExtent(),this.extentViewProj);return e?Kr(i):this.extentToDataProj(i)},async getClosestPoint(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=e?Qr(t):this.pointToViewProj(t);const i=(await this.resolveGeometry()).getClosestPoint(t);return e?Qr(i):this.pointToDataProj(i)},async intersectsCoordinate(t){return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Qr(t):this.pointToViewProj(t),(await this.resolveGeometry()).intersectsCoordinate(t)},async intersectsExtent(t){return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Kr(t):this.extentToViewProj(t),(await this.resolveGeometry()).intersectsExtent(t)},async rotate(t,e){e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Qr(e):this.pointToViewProj(e),(await this.resolveGeometry()).rotate(t,e)},async scale(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i=r?Qr(i):this.pointToViewProj(i),[t]=r?Qr([t,0]):this.pointToViewProj([t,0]),[,e]=r?Qr([0,e]):this.pointToViewProj([0,e]),(await this.resolveGeometry()).scale(t,e,i)},async simplify(t){return(await this.resolveGeometry()).simplify(t)},async translate(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return[t]=i?Qr([t,0]):this.pointToViewProj([t,0]),[,e]=i?Qr([0,e]):this.pointToViewProj([0,e]),(await this.resolveGeometry()).translate(t,e)},extentDataProjChanged(t,e){ut(t,e)||this.$emit("update:extent",null==t?void 0:t.slice())}}};function Pl(){Object.defineProperties(this,{$geometry:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}},$geometryContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.geometryContainer}}})}async function Il(){}var jl="prerender",Ol="postrender",xl="precompose",Cl="postcompose",Tl="rendercomplete",_l={created(){this._source=void 0,this._sourceVm=void 0,Rl.call(this)},methods:{getServices(){const t=this;return{get sourceContainer(){return t}}},getSourceTarget(){throw new Error(`${this.vmName} not implemented method: getSourceTarget()`)},getSource(){var t;return at(null===(t=this.getSourceTarget())||void 0===t?void 0:t.getSource(),this._source)},getSourceVm(){return this._sourceVm},setSource(t){var i;(t=(null===(i=t)||void 0===i?void 0:i.$source)||t)||(t=void 0),Mt(!t||t instanceof e.Source,"Invalid source");const r=this.getSourceTarget();var n;(r&&t!==r.getSource()&&(r.setSource(t),this.scheduleRefresh()),t!==this._source)&&(this._source=t,this._sourceVm=(null===(n=t)||void 0===n?void 0:n.vm)&&t.vm[0],this.scheduleRefresh())}}};function Rl(){Object.defineProperties(this,{$source:{enumerable:!0,get:this.getSource},$sourceVm:{enumerable:!0,get:this.getSourceVm}})}var Fl={mixins:[_l,el],props:{render:Function,overlay:{type:Boolean,default:!1}},computed:{source(){if(this.rev&&this.$source)return{id:Ys(this.$source),type:this.$source.constructor.name}}},watch:{...qa(["source","render","overlay"],["source"])},methods:{async mount(){if(!this.overlay||!this.$mapVm)return el.methods.mount.call(this);this.setMap(this.$mapVm)},async unmount(){if(!this.overlay)return el.methods.unmount.call(this);this.setMap(null)},getServices(){return Jt(el.methods.getServices.call(this),_l.methods.getServices.call(this))},subscribeAll(){el.methods.subscribeAll.call(this),El.call(this)},getSourceTarget(){return this.$layer},getRenderer(){var t;return null===(t=this.$layer)||void 0===t?void 0:t.getRenderer()},setMap(t){var e,i;t=(null===(e=t)||void 0===e?void 0:e.$map)||t,null===(i=this.$layer)||void 0===i||i.setMap(t)},sourceChanged(t,e){t!==e&&this.$emit("update:source",t)}}};async function El(){const t=At("set"),e=fa(this.$layer,"source",!0).pipe(Or((t=>{let{value:e}=t;this._sourceSubs&&this.unsubscribe(this._sourceSubs),e&&(this._sourceSubs=this.subscribeTo(fa(e,"id",!0),this.scheduleRefresh.bind(this)))})),oi((e=>({...e,setter:this[t(e.prop)]}))));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}));const i=pa(this.$layer,[jl,Ol]);this.subscribeTo(i,(t=>this.$emit(t.type,t)))}var Vl={mixins:[Fl]};const Ll=q(K,it,(t=>Q(t)&&t.every(K)));var Al={mixins:[Qa,Ka,Ea,tl],stubVNode:{empty(){return this.vmId}},props:{attributions:{type:[String,Array,Function],validator:Ll},attributionsCollapsible:{type:Boolean,default:!0},projection:{type:String,validator:t=>!!u.get(t)},wrapX:{type:Boolean,default:!0},state:{type:String,default:Hr.READY,validator:t=>Object.values(Hr).includes(t)}},data(){return{viewProjection:Hn,dataProjection:Hn,currentAttributions:kl(this.attributions),currentState:this.state}},computed:{inputAttributions(){return kl(this.attributions)},currentResolutions(){return this.rev?this.getResolutions():[]},resolvedDataProjection(){var t;return at(this.projection,this.dataProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.resolvedViewProjection)}},watch:{rev(){this.$source&&(this.currentAttributions!==this.$source.getAttributions()&&(this.currentAttributions=this.$source.getAttributions()),this.currentState!==this.$source.getState()&&(this.currentState=this.$source.getState()))},...qa(["inputAttributions","currentAttributions","state","currentState","attributionsCollapsible","projection","wrapX","currentResolutions"],["inputAttributions","currentAttributions","currentResolutions"])},created(){Nl.call(this)},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},async createOlObject(){return Xs(await this.createSource(),this.currentId)},createSource(){throw new Error(`${this.vmName} not implemented method: createSource()`)},async mount(){var t;return null===(t=this.$sourceContainer)||void 0===t||t.setSource(this),Ea.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$sourceContainer)||void 0===t?void 0:t.getSourceVm())===this&&this.$sourceContainer.setSource(null),Ea.methods.unmount.call(this)},async refresh(){const t=await this.resolveSource();return new Promise((e=>{t.once("change",(()=>e())),t.refresh()}))},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),{get sourceVm(){return t}})},subscribeAll(){Ea.methods.subscribeAll.call(this),Ml.call(this)},getIdInternal(){return Ys(this.$source)},setIdInternal(t){t!==this.getIdInternal()&&qs(this.$source,t)},resolveSource:Ea.methods.resolveOlObject,getAttributions(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getAttributions(),this.currentAttributions)},setAttributions(t){Mt(!t||Ll(t),"Invalid attributions"),ut(t=kl(t),this.currentAttributions)||(this.currentAttributions=t),this.$source&&!ut(t,this.$source.getAttributions())&&this.$source.setAttributions(t)},getAttributionsCollapsible(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getAttributionsCollapsible(),this.attributionsCollapsible)},getProjection(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getProjection(),u.get(this.resolvedDataProjection))},getState(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getState(),this.currentState)},getWrapX(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getWrapX(),this.wrapX)},getResolutions(){try{var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getResolutions(),[])}catch(t){return[]}},inputAttributionsChanged(t){this.setAttributions(t)},currentAttributionsChanged(t){ut(t,this.inputAttributions)||this.$emit("update:attributions",t)},stateChanged(t){if(t!==this.currentState)return this.currentState=t,this.scheduleRecreate()},currentStateChanged(t){t!==this.state&&this.$emit("update:state",t)},currentResolutionsChanged(t,e){ut(t,e)||this.$emit("update:resolutions",null==t?void 0:t.slice())}}};function Nl(){Object.defineProperties(this,{$source:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}},$sourceContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.sourceContainer}}})}function Ml(){}function kl(t){if(t)return it(t)?t:()=>Q(t)?t:[t]}const Dl="imageloadstart",Gl="imageloadend",Ul="imageloaderror";var zl={mixins:[Al],props:{projection:{...Al.props.projection,default:Hn},resolutions:Array},computed:{inputResolutions(){var t;return null===(t=this.resolutions)||void 0===t?void 0:t.slice()}},watch:{...qa(["inputResolutions"],["inputResolutions"])},methods:{subscribeAll(){Al.methods.subscribeAll.call(this),Zl.call(this)},attributionsCollapsibleChanged:G,wrapXChanged:G}};async function Zl(){const t=pa(this.$source,[Dl,Gl,Ul]);this.subscribeTo(t,(t=>this.$emit(t.type,t)))}var Bl={mixins:[Qa,Ea],stubVNode:{empty(){return this.vmId}},created(){Wl.call(this)},methods:{beforeInit(){return Ea.methods.beforeInit.call(this)},async createOlObject(){return Ko(await this.createStyle(),this.currentId)},createStyle(){throw new Error(`${this.vmName} not implemented method: createStyle()`)},async mount(){await Ea.methods.mount.call(this)},async unmount(){await Ea.methods.unmount.call(this)},async remount(){await Ea.methods.remount.call(this),await this.refresh(),this.$mapVm&&await this.$mapVm.render()},async refresh(){await Ea.methods.refresh.call(this)},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),{get styleVm(){return t}})},subscribeAll(){Ea.methods.subscribeAll.call(this)},setId(t){Mt(null!=t&&""!==t,"Invalid id"),this.currentId!==t&&(this.currentId=t,this.scheduleRefresh()),this.$olObject&&this.setIdInternal(t)},getIdInternal(){return Ho(this.$style)},setIdInternal(t){t!==this.getIdInternal()&&(Jo(this.$style,t),this.scheduleRefresh())},resolveStyle:Ea.methods.resolveOlObject,syncNonObservable(){Ea.methods.syncNonObservable.call(this)}}};function Wl(){Object.defineProperties(this,{$style:{enumerable:!0,get:()=>this.$olObject},$styleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.styleContainer}}})}var Yl={mixins:[Bl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{opacity:{type:Number,default:1},rotateWithView:Boolean,rotation:{type:Number,default:0},scale:{type:Number,default:1},displacement:{type:Array,default:()=>[0,0]}},data(){return{currentOpacity:this.opacity,currentRotateWithView:this.rotateWithView,currentRotation:this.rotation,currentScale:this.scale}},computed:{inputDisplacement(){var t;return null===(t=this.displacement)||void 0===t?void 0:t.slice()}},watch:{rev(){this.$style&&(this.setOpacity(this.getOpacity()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale()))},...qa(["opacity","currentOpacity","rotateWithView","currentRotateWithView","rotation","currentRotation","scale","currentScale","inputDisplacement"],["inputDisplacement"])},created(){ql.call(this)},methods:{async mount(){var t;return null===(t=this.$imageStyleContainer)||void 0===t||t.setImage(this),Bl.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$imageStyleContainer)||void 0===t?void 0:t.getImageVm())===this&&await this.$imageStyleContainer.setImage(null),Bl.methods.unmount.call(this)},async refresh(){var t;await Promise.all([Bl.methods.refresh.call(this),null===(t=this.$imageStyleContainer)||void 0===t?void 0:t.refresh()])},syncNonObservable(){Bl.methods.syncNonObservable.call(this),this.setOpacity(this.getOpacity()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale())},getOpacity(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getOpacity(),this.currentOpacity)},setOpacity(t){t!==this.currentOpacity&&(this.currentOpacity=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOpacity()&&(this.$style.setOpacity(t),this.scheduleRefresh())},getRotateWithView(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRotateWithView(),this.currentRotateWithView)},setRotateWithView(t){t!==this.currentRotateWithView&&(this.currentRotateWithView=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotateWithView()&&(this.$style.setRotateWithView(t),this.scheduleRefresh())},getRotation(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRotation(),this.currentRotation)},setRotation(t){t!==this.currentRotation&&(this.currentRotation=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotation()&&(this.$style.setRotation(t),this.scheduleRefresh())},getScale(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getScale(),this.currentScale)},setScale(t){t!==this.currentScale&&(this.currentScale=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getScale()&&(this.$style.setScale(t),this.scheduleRefresh())},getDisplacement(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getDisplacement(),this.inputDisplacement)},opacityChanged(t){this.setOpacity(t)},currentOpacityChanged(t){t!==this.opacity&&this.$emit("update:opacity",t)},rotateWithViewChanged(t){this.setRotateWithView(t)},currentRotateWithViewChanged(t){t!==this.rotateWithView&&this.$emit("update:rotateWithView",t)},rotationChanged(t){this.setRotation(t)},currentRotationChanged(t){t!==this.rotation&&this.$emit("update:rotation",t)},scaleChanged(t){this.setScale(t)},currentScaleChanged(t){t!==this.scale&&this.$emit("update:scale",t)}}};function ql(){Object.defineProperties(this,{$imageStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.imageStyleContainer}}})}var Xl={created(){this._image=void 0,this._imageVm=void 0,Hl.call(this)},methods:{getServices(){const t=this;return{get imageStyleContainer(){return t}}},getImageStyleTarget(){throw new Error(`${this.vmName} not implemented method: getImageStyleTarget()`)},getImage(){var t;return at(null===(t=this.getImageStyleTarget())||void 0===t?void 0:t.getImage(),this._image)},getImageVm(){return this._imageVm},setImage(t){var e;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),Mt(!t||t instanceof c.Image,"Invalid image style");const i=this.getImageStyleTarget();var r;(i&&t!==i.getImage()&&(i.setImage(t),this.scheduleRefresh()),t!==this._image)&&(this._image=t,this._imageVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh())}}};function Hl(){Object.defineProperties(this,{$image:{enumerable:!0,get:this.getImage},$imageVm:{enumerable:!0,get:this.getImageVm}})}var Jl={mixins:[Qa,Ka,Ea,tl],stubVNode:{empty(){return this.vmId}},props:{active:{type:Boolean,default:!0},priority:{type:Number,default:0}},data(){return{viewProjection:Hn,dataProjection:Hn,currentActive:this.active,currentPriority:this.priority,interacting:!1}},watch:{rev(){this.$interaction&&(this.currentActive!==this.$interaction.getActive()&&(this.currentActive=this.$interaction.getActive()),this.currentPriority!==Vs(this.$interaction)&&(this.currentPriority=Vs(this.$interaction)))},...qa(["active","currentActive","priority","currentPriority"])},created(){Kl.call(this)},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},async createOlObject(){const t=As(await this.createInteraction(),this.currentId,this.currentPriority);return t.setActive(this.currentActive),t.set("interacting",this.interacting),t},createInteraction(){throw new Error(`${this.vmName} not implemented method: createInteraction()`)},async mount(){var t;return null===(t=this.$interactionsContainer)||void 0===t||t.addInteraction(this),Ea.methods.mount.call(this)},async unmount(){var t;return null===(t=this.$interactionsContainer)||void 0===t||t.removeInteraction(this),Ea.methods.unmount.call(this)},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),{get interactionVm(){return t}})},subscribeAll(){Ea.methods.subscribeAll.call(this),Ql.call(this)},resolveInteraction:Ea.methods.resolveOlObject,getIdInternal(){return Fs(this.$interaction)},setIdInternal(t){t!==this.getIdInternal()&&Es(this.$interaction,t)},getActive(){var t;return at(null===(t=this.$interaction)||void 0===t?void 0:t.getActive(),this.currentActive)},setActive(t){(t=!!t)!==this.currentActive&&(this.currentActive=t),this.$interaction&&t!==this.$interaction.getActive()&&this.$interaction.setActive(t)},getPriority(){return at(this.$interaction&&Vs(this.$interaction),this.currentPriority)},setPriority(t){var e;Mt(J(t),"Invalid priority"),t!==this.currentPriority&&(this.currentPriority=t),this.$interaction&&t!==Vs(this.$interaction)&&Ls(this.$interaction,t),null===(e=this.$interactionsContainer)||void 0===e||e.sortInteractions()},getMap(){var t;return at(null===(t=this.$interaction)||void 0===t?void 0:t.getMap(),this.$map)},setInteracting(t){(t=!!t)!==this.interacting&&(this.interacting=t),this.$interaction&&t!==this.$interaction.get("interacting")&&this.$interaction.set("interacting",t)},isInteracting(){var t;return at(null===(t=this.$interaction)||void 0===t?void 0:t.get("interacting"),this.interacting)},activeChanged(t){this.setActive(t)},currentActiveChanged(t){t!==this.active&&this.$emit("update:active",t)},priorityChanged(t){this.setPriority(t)},currentPriorityChanged(t){t!==this.priority&&this.$emit("update:priority",t)}}};function Kl(){Object.defineProperties(this,{$interaction:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}},$interactionsContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.interactionsContainer}}})}async function Ql(){const t=At("set"),e=fa(this.$interaction,["active","priority"],!0,(e=>({...e,setter:this[t(e.prop)]})));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}))}var tu={mixins:[Ia,ja],computed:{interactionsCollectionIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"interactions_collection")}},watch:{...qa(["interactionsCollectionIdent"])},created(){this._interactionsCollection=this.instanceFactoryCall(this.interactionsCollectionIdent,(()=>new t.Collection)),this._interactionSubs={},eu.call(this)},methods:{getServices(){const t=this;return{get interactionsContainer(){return t}}},subscribeAll(){iu.call(this)},initDefaultInteractions(e){let i;this.getInteractions().forEach((t=>{t.get("vl_default")&&this.removeInteraction(t)})),Q(e)||e instanceof t.Collection?i=e:!1!==e&&(i=h.defaults(ot(e)?this.defaultInteractions:void 0)),i&&(i.forEach((t=>t.set("vl_default",!0))),this.addInteractions(i))},initializeInteraction(t){var e;return kt(t=(null===(e=t)||void 0===e?void 0:e.$interaction)||t,h.Interaction),As(t)},addInteractions(t){gt(t,this.addInteraction.bind(this))},addInteraction(t){t=this.initializeInteraction(t),this.getInteractionById(Fs(t))||(this.$interactionsCollection.push(t),this.sortInteractions())},removeInteractions(t){gt(t,this.removeInteraction.bind(this))},removeInteraction(t){var e;(t=this.getInteractionById(Fs((null===(e=t)||void 0===e?void 0:e.$interaction)||t)))&&(this.$interactionsCollection.remove(t),this.sortInteractions())},clearInteractions(){this.$interactionsCollection.clear()},getInteractions(){return this.$interactionsCollection.getArray().slice()},getInteractionsCollection(){return this._interactionsCollection},getInteractionById(t){return bt(this.getInteractions(),(e=>Fs(e)===t))},sortInteractions(t){t||(t=this.getDefaultInteractionsSorter()),this.$interactionsCollection.getArray().sort(t)},getDefaultInteractionsSorter:()=>(t,e)=>{const i=Vs(t)||0,r=Vs(e)||0;return i===r?0:i-r},interactionsCollectionIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$interactionsCollection?this.setInstance(t,this.$interactionsCollection):!t&&e&&this.unsetInstance(e)}}};function eu(){Object.defineProperties(this,{$interactionsCollection:{enumerable:!0,get:this.getInteractionsCollection}})}function iu(){const t=Ci(pa(this.$interactionsCollection,nl).pipe(oi((t=>({...t,element:this.initializeInteraction(t.element)}))),Or((t=>{let{element:e}=t;const i=p.getUid(e),r=fa(e,"id",!0);this._interactionSubs[i]=this.subscribeTo(r,this.scheduleRefresh.bind(this))}))),pa(this.$interactionsCollection,ol).pipe(Or((t=>{let{element:e}=t;const i=p.getUid(e);this._interactionSubs[i]&&(this.unsubscribe(this._interactionSubs[i]),delete this._interactionSubs[i])})))).pipe(ya(Ta));this.subscribeTo(t,(async t=>{await this.debounceChanged(),gt(t,(t=>{let{type:e,element:i}=t;this.$emit(e+"interaction",i),this.$emit(e+":interaction",i)}))}))}var ru={mixins:[Ia,ja],computed:{layersCollectionIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"layers_collection")}},watch:{...qa(["layersCollectionIdent"])},created(){this._layersCollection=this.instanceFactoryCall(this.layersCollectionIdent,(()=>new t.Collection)),this._layerSubs={},nu.call(this)},methods:{getServices(){const t=this;return{get layersContainer(){return t}}},subscribeAll(){ou.call(this)},initializeLayer(t){var e;return kt(t=(null===(e=t)||void 0===e?void 0:e.$layer)||t,O.default),ks(t)},addLayers(t){gt(t,this.addLayer.bind(this))},addLayer(t){t=this.initializeLayer(t),this.getLayerById(Ns(t))||this.$layersCollection.push(t)},removeLayers(t){gt(t,this.removeLayer.bind(this))},removeLayer(t){var e;(t=this.getLayerById(Ns((null===(e=t)||void 0===e?void 0:e.$layer)||t)))&&this.$layersCollection.remove(t)},clearLayers(){this.$layersCollection.clear()},getLayers(){return this.$layersCollection.getArray().slice()},getLayersCollection(){return this._layersCollection},getLayerById(t){return bt(this.getLayers(),(e=>Ns(e)===t))},layersCollectionIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$layersCollection?this.setInstance(t,this.$layersCollection):!t&&e&&this.unsetInstance(e)}}};function nu(){Object.defineProperties(this,{$layersCollection:{enumerable:!0,get:this.getLayersCollection}})}function ou(){const t=Ci(pa(this.$layersCollection,nl).pipe(oi((t=>({...t,element:this.initializeLayer(t.element)}))),Or((t=>{let{element:e}=t;const i=p.getUid(e),r=fa(e,"id",!0);this._layerSubs[i]=this.subscribeTo(r,this.scheduleRefresh.bind(this))}))),pa(this.$layersCollection,ol).pipe(Or((t=>{let{element:e}=t;const i=p.getUid(e);this._layerSubs[i]&&(this.unsubscribe(this._layerSubs[i]),delete this._layerSubs[i])})))).pipe(ya(Ta));this.subscribeTo(t,(async t=>{await this.debounceChanged(),gt(t,(t=>{let{type:e,element:i}=t;this.$emit(e+"layer",i),this.$emit(e+":layer",i)}))}))}var su={mixins:[Ia,ja],computed:{overlaysCollectionIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"overlays_collection")}},watch:{...qa(["overlaysCollectionIdent"])},created(){this._overlaysCollection=this.instanceFactoryCall(this.overlaysCollectionIdent,(()=>new t.Collection)),this._overlaySubs={},au.call(this)},methods:{getServices(){const t=this;return{get overlaysContainer(){return t}}},subscribeAll(){lu.call(this)},initializeOverlay(e){var i;return kt(e=(null===(i=e)||void 0===i?void 0:i.$overlay)||e,t.Overlay),Ws(e)},addOverlays(t){gt(t,this.addOverlay.bind(this))},addOverlay(t){t=this.initializeOverlay(t),this.getOverlayById(Zs(t))||this.$overlaysCollection.push(t)},removeOverlays(t){gt(t,this.removeOverlay.bind(this))},removeOverlay(t){var e;(t=this.getOverlayById(Zs((null===(e=t)||void 0===e?void 0:e.$overlay)||t)))&&this.$overlaysCollection.remove(t)},clearOverlays(){this.$overlaysCollection.clear()},getOverlays(){return this.$overlaysCollection.getArray().slice()},getOverlaysCollection(){return this._overlaysCollection},getOverlayById(t){return bt(this.getOverlays(),(e=>Zs(e)===t))},overlaysCollectionIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$overlaysCollection?this.setInstance(t,this.$overlaysCollection):!t&&e&&this.unsetInstance(e)}}};function au(){Object.defineProperties(this,{$overlaysCollection:{enumerable:!0,get:this.getOverlaysCollection}})}function lu(){const t=Ci(pa(this.$overlaysCollection,nl).pipe(oi((t=>({...t,element:this.initializeOverlay(t.element)}))),Or((t=>{let{element:e}=t;const i=p.getUid(e),r=fa(e,"id",!0);this._overlaySubs[i]=this.subscribeTo(r,this.scheduleRefresh.bind(this))}))),pa(this.$overlaysCollection,ol).pipe(Or((t=>{let{element:e}=t;const i=p.getUid(e);this._overlaySubs[i]&&(this.unsubscribe(this._overlaySubs[i]),delete this._overlaySubs[i])})))).pipe(ya(Ta));this.subscribeTo(t,(async t=>{await this.debounceChanged(),gt(t,(t=>{let{type:e,element:i}=t;this.$emit(e+"overlay",i),this.$emit(e+":overlay",i)}))}))}var uu={created(){this._stroke=void 0,this._strokeVm=void 0,cu.call(this)},methods:{getServices(){const t=this;return{get strokeStyleContainer(){return t}}},getStrokeStyleTarget(){throw new Error(`${this.vmName} not implemented method: getStrokeStyleTarget()`)},getStroke(){var t;return at(null===(t=this.getStrokeStyleTarget())||void 0===t?void 0:t.getStroke(),this._stroke)},getStrokeVm(){return this._strokeVm},setStroke(t){var e;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),Mt(!t||t instanceof c.Stroke,"Invalid stroke");const i=this.getStrokeStyleTarget();var r;(i&&t!==i.getStroke()&&(i.setStroke(t),this.scheduleRefresh()),t!==this._stroke)&&(this._stroke=t,this._strokeVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh())}}};function cu(){Object.defineProperties(this,{$stroke:{enumerable:!0,get:this.getStroke},$strokeVm:{enumerable:!0,get:this.getStrokeVm}})}var hu={mixins:[wl,uu,Yl],props:{points:Number,radius:Number,radius1:Number,radius2:Number,angle:{type:Number,default:0}},computed:{stroke(){if(this.rev&&this.$stroke)return us(this.$stroke)},fill(){if(this.rev&&this.$fill)return ls(this.$fill)}},watch:{...qa(["points","radius","radius1","radius2","angle","stroke","fill"],["stroke","fill"])},methods:{getServices(){return Jt(Bl.methods.getServices.call(this),wl.methods.getServices.call(this),uu.methods.getServices.call(this))},syncNonObservable(){Yl.methods.syncNonObservable.call(this)},getFillStyleTarget(){return{getFill:()=>{var t;return null===(t=this.$style)||void 0===t?void 0:t.getFill()},setFill:()=>{this.scheduleRecreate()}}},getStrokeStyleTarget(){return{getStroke:()=>{var t;return null===(t=this.$style)||void 0===t?void 0:t.getStroke()},setStroke:()=>{this.scheduleRecreate()}}},getAnchor(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getAnchor()},getAngle(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getAngle(),this.angle)},getImage(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getImage()},getOrigin(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getOrigin()},getPoints(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getPoints(),this.points)},getRadius(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRadius(),this.radius)},getRadius2(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRadius2(),this.radius2)},getSize(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getSize()},strokeChanged(t,e){ut(t,e)||this.$emit("update:stroke",t&&Lt(t))},fillChanged(t,e){ut(t,e)||this.$emit("update:fill",t&&Lt(t))}}},du="XY",mu={mixins:[$l],props:{coordinates:{type:Array,required:!0,validator:Y(ht)}},data(){return{currentCoordinatesViewProj:Lt(this.coordinates)}},computed:{coordinatesDataProj(){return nn(this.type,this.coordinates)},coordinatesViewProj(){return this.coordinatesToViewProj(this.coordinates)},currentCoordinatesDataProj(){return this.coordinatesToDataProj(this.currentCoordinatesViewProj)},pointDataProj(){return this.rev?this.findPointOnSurface():zn({type:this.type,coordinates:this.coordinatesDataProj})},pointViewProj(){return this.rev?this.findPointOnSurface(!0):zn({type:this.type,coordinates:this.coordinatesViewProj})}},watch:{rev(){this.$geometry&&(on({coordinates:this.currentCoordinatesViewProj,extent:pu(this.currentCoordinatesViewProj)},{coordinates:this.$geometry.getCoordinates(),extent:this.$geometry.getExtent()})||(this.currentCoordinatesViewProj=this.$geometry.getCoordinates()))},...qa(["coordinatesViewProj","currentCoordinatesDataProj","pointDataProj"],["coordinatesViewProj","currentCoordinatesDataProj","pointDataProj"])},created(){this.currentCoordinatesViewProj=Lt(this.coordinatesViewProj),this.extentViewProj=pu(this.currentCoordinatesViewProj)},methods:{getCoordinatesTransformFunction(){return vo[this.getType()].transform},coordinatesToDataProj(t){return this.getCoordinatesTransformFunction()(t,this.resolvedViewProjection,this.resolvedDataProjection)},coordinatesToViewProj(t){return this.getCoordinatesTransformFunction()(t,this.resolvedDataProjection,this.resolvedViewProjection)},getCoordinates(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=at(null===(t=this.$geometry)||void 0===t?void 0:t.getCoordinates(),this.currentCoordinatesViewProj);return e?nn(this.getType(),i):this.coordinatesToDataProj(i)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(Q(t),"Invalid coordinates");const i=pu(t=e?nn(this.getType(),t):this.coordinatesToViewProj(t));on({coordinates:t,extent:i},{coordinates:this.currentCoordinatesViewProj,extent:this.extentViewProj})||(this.currentCoordinatesViewProj=t),this.$geometry&&!on({coordinates:t,extent:i},{coordinates:this.$geometry.getCoordinates(),extent:this.$geometry.getExtent()})&&this.$geometry.setCoordinates(t)},getFirstCoordinate(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$geometry)t=this.$geometry.getFirstCoordinate();else switch(this.getType()){case Yr.POINT:case Yr.CIRCLE:t=this.currentCoordinatesViewProj;break;case Yr.LINE_STRING:case Yr.MULTI_POINT:t=this.currentCoordinatesViewProj[0];break;case Yr.POLYGON:case Yr.MULTI_LINE_STRING:t=this.currentCoordinatesViewProj[0][0];break;case Yr.MULTI_POLYGON:t=this.currentCoordinatesViewProj[0][0][0]}return e?Qr(t):this.pointToDataProj(t)},getLastCoordinate(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$geometry)t=this.$geometry.getLastCoordinate();else{let e;switch(this.getType()){case Yr.POINT:case Yr.CIRCLE:t=this.currentCoordinatesViewProj;break;case Yr.LINE_STRING:case Yr.MULTI_POINT:t=this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length-1];break;case Yr.POLYGON:case Yr.MULTI_LINE_STRING:e=this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length-1],t=e[e.length-1];break;case Yr.MULTI_POLYGON:e=this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length-1],e=e[e.length-1],t=e[e.length-1]}}return e?Qr(t):this.pointToDataProj(t)},getLayout(){var t;return at(null===(t=this.$geometry)||void 0===t?void 0:t.getLayout(),du)},findPointOnSurface(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return zn({type:this.getType(),coordinates:this.getCoordinates(t)})},coordinatesViewProjChanged(t){this.setCoordinates(t,!0)},currentCoordinatesDataProjChanged(t){ut(t,this.coordinatesDataProj)||this.$emit("update:coordinates",Lt(t))},pointDataProjChanged(t,e){ut(t,e)||this.$emit("update:point",null==t?void 0:t.slice())}}};function pu(t){if(t)return Q(t[0])||(t=[t]),n.boundingExtent(t)}var fu={created(){this._text=void 0,this._textVm=void 0,gu.call(this)},methods:{getServices(){const t=this;return{get textStyleContainer(){return t}}},getTextStyleTarget(){throw new Error(`${this.vmName} not implemented method: getTextStyleTarget()`)},getText(){var t;return at(null===(t=this.getTextStyleTarget())||void 0===t?void 0:t.getText(),this._text)},getTextVm(){return this._textVm},setText(t){var e;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),Mt(!t||t instanceof c.Text,"Invalid text style");const i=this.getTextStyleTarget();var r;(i&&t!==i.getText()&&(i.setText(t),this.scheduleRefresh()),t!==this._text)&&(this._text=t,this._textVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh())}}};function gu(){Object.defineProperties(this,{$text:{enumerable:!0,get:this.getText},$textVm:{enumerable:!0,get:this.getTextVm}})}var vu="tileloadstart",yu="tileloadend",bu="tileloaderror",wu={mixins:[Al],props:{cacheSize:Number,opaque:Boolean,tilePixelRatio:{type:Number,default:1},tileGridFactory:Function,transition:Number,tileKey:String,zDirection:{type:Number,default:0}},data:()=>({tileGrid:void 0}),computed:{tileGridIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"tile_grid")},derivedTileGridFactory(){return this.tileGridFactory},inputTileGridFactory(){if(it(this.derivedTileGridFactory))return ft(this.derivedTileGridFactory.bind(this))},resolvedDataProjection(){return at(this.projection,this.resolvedViewProjection)}},watch:{rev(){this.$source&&this.tileGrid!==this.$source.getTileGrid()&&(this.tileGrid=this.$source.getTileGrid())},...qa(["tileGridIdent","inputTileGridFactory","tileGrid","tileKey","opaque","tilePixelRatio","cacheSize","transition","zDirection"])},created(){it(this.inputTileGridFactory)&&(this.tileGrid=this.instanceFactoryCall(this.tileGridIdent,this.inputTileGridFactory.bind(this)))},methods:{subscribeAll(){Al.methods.subscribeAll.call(this)},getTileGrid(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getTileGrid(),this.tileGrid)},tileGridIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.tileGrid?this.setInstance(t,this.tileGrid):!t&&e&&this.unsetInstance(e)},inputTileGridFactoryChanged(t){for(;this.hasInstance(this.tileGridIdent);)this.unsetInstance(this.tileGridIdent);it(t)?this.tileGrid=this.instanceFactoryCall(this.tileGridIdent,t.bind(this)):this.tileGrid=null}}};const Su=X(K,Y(ht)),$u=X(Q,(t=>t.every(Su)));var Pu={mixins:[wu],props:{tileLoadFunction:Function,tileUrlFunc:Function,tileUrlFunction:Function,url:{type:String,validator:Su},urls:{type:Array,validator:$u}},data:()=>({currentTileLoadFunction:void 0,currentTileUrlFunction:void 0,currentUrls:[]}),computed:{urlTokens:()=>[],inputUrl(){if(this.url)return lt(this.url,$t(this,this.urlTokens))},parsedUrls(){const t=[];this.urls&&this.urls.length>0?t.push(...this.urls):this.url&&t.push(this.url);const e=$t(this,this.urlTokens);return t.map((t=>lt(t,e)))},inputUrls(){return this.parsedUrls.reduce(((t,e)=>t.concat(...na(e))),[])},inputTileUrlFunction(){return at(this.tileUrlFunction,this.tileUrlFunc)},inputTileLoadFunction(){return this.tileLoadFunction}},watch:{rev(){this.$source&&(this.currentTileLoadFunction!==this.$source.getTileLoadFunction()&&(this.currentTileLoadFunction=this.$source.getTileLoadFunction()),this.currentTileUrlFunction!==this.$source.getTileUrlFunction()&&(this.currentTileUrlFunction=this.$source.getTileUrlFunction()),ut(this.currentUrls,this.$source.getUrls())||this.inputTileUrlFunction||(this.currentUrls=this.$source.getUrls()))},...qa(["inputUrls","currentUrls","inputTileUrlFunction","currentTileUrlFunction","inputTileLoadFunction","currentTileLoadFunction"],["inputUrls","currentUrls"])},created(){var t;this.currentUrls=null===(t=this.inputUrls)||void 0===t?void 0:t.slice(),this.currentTileUrlFunction=this.inputTileUrlFunction,this.currentTileLoadFunction=this.inputTileLoadFunction},updated(){},methods:{subscribeAll(){wu.methods.subscribeAll.call(this),Iu.call(this)},getTileLoadFunction(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getTileLoadFunction(),this.currentTileLoadFunction)},setTileLoadFunction(t){Mt(it(t),"Invalid tile load function"),t!==this.currentTileLoadFunction&&(this.currentTileLoadFunction=t),this.$source&&t!==this.$source.getTileLoadFunction()&&this.$source.setTileLoadFunction(t)},getTileUrlFunction(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getTileUrlFunction(),this.currentTileUrlFunction)},setTileUrlFunction(t,e){var i;Mt(it(t),"Invalid tile url function"),e||(e=at(null===(i=this.inputUrls)||void 0===i?void 0:i.join("\n"),zr())),t!==this.currentTileUrlFunction&&(this.currentTileUrlFunction=t),this.$source&&t!==this.$source.getTileUrlFunction()&&this.$source.setTileUrlFunction(t,e)},getUrls(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getUrls(),this.currentUrls)},setUrls(t){Mt($u(t),"Invalid urls"),ut(t=t.slice(),this.currentUrls)||(this.currentUrls=t),this.$source&&(this.inputTileUrlFunction?this.$source.setTileUrlFunction(this.inputTileUrlFunction,t.join("\n")):ut(t,this.$source.getUrls())||this.$source.setUrls(t))},setUrl(t){Mt(Su(t),"Invalid url"),this.setUrls(na(t))},inputUrlsChanged(t){this.setUrls(t)},currentUrlsChanged(t){ut(t,this.urls)||this.$emit("update:urls",null==t?void 0:t.slice())},inputTileUrlFunctionChanged(t){this.setTileUrlFunction(t)},currentTileUrlFunctionChanged(t){t!==this.inputTileUrlFunction&&this.$emit("update:tileUrlFunction",t)},inputTileLoadFunctionChanged(t){this.setTileLoadFunction(t)},currentTileLoadFunctionChanged(t){t!==this.inputTileLoadFunction&&this.$emit("update:tileLoadFunction",t)}}};async function Iu(){const t=pa(this.$source,[vu,yu,bu]);this.subscribeTo(t,(t=>this.$emit(t.type,t)))}var ju={mixins:[Pu],props:{crossOrigin:String,reprojectionErrorThreshold:Number,tileClass:String,imageSmoothing:{type:Boolean,default:!0}},watch:{...qa(["crossOrigin","reprojectionErrorThreshold","tileClass","imageSmoothing"])},methods:{async setRenderReprojectionEdges(t){(await this.resolveSource()).setRenderReprojectionEdges(t)}}},Ou={mixins:[Fl],props:{preload:{type:Number,default:0},useInterimTilesOnError:{type:Boolean,default:!0}},data(){return{currentPreload:this.preload,currentUseInterimTilesOnError:this.useInterimTilesOnError}},watch:{rev(){this.$layer&&(this.currentPreload!==this.$layer.getPreload()&&(this.currentPreload=this.$layer.getPreload()),this.currentUseInterimTilesOnError!==this.$layer.getUseInterimTilesOnError()&&(this.currentUseInterimTilesOnError=this.$layer.getUseInterimTilesOnError()))},...qa(["preload","currentPreload","useInterimTilesOnError","currentUseInterimTilesOnError"])},methods:{subscribeAll(){Fl.methods.subscribeAll.call(this),xu.call(this)},getPreload(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getPreload(),this.currentPreload)},setPreload(t){Mt(J(t=Number(t)),"Invalid preload"),t!==this.currentPreload&&(this.currentPreload=t),this.$layer&&t!==this.$layer.getPreload()&&this.$layer.setPreload(t)},getUseInterimTilesOnError(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getUseInterimTilesOnError(),this.currentUseInterimTilesOnError)},setUseInterimTilesOnError(t){(t=!!t)!==this.currentUseInterimTilesOnError&&(this.currentUseInterimTilesOnError=t),this.$layer&&t!==this.$layer.getUseInterimTilesOnError()&&this.$layer.setUseInterimTilesOnError(t)},preloadChanged(t){this.setPreload(t)},currentPreloadChanged(t){t!==this.preload&&this.$emit("update:preload",t)},useInterimTilesOnErrorChanged(t){this.setUseInterimTilesOnError(t)},currentUseInterimTilesOnErrorChanged(t){t!==this.useInterimTilesOnError&&this.$emit("update:useInterimTilesOnError",t)}}};async function xu(){const t=At("current"),e=fa(this.$layer,["preload","useInterimTilesOnError"],!0,(e=>({...e,setter:this[t(e.prop)]})));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}))}var Cu={mixins:[hl,Fl],props:{renderOrder:Function,renderBuffer:{type:Number,default:100},declutter:Boolean,updateWhileAnimating:Boolean,updateWhileInteracting:Boolean},computed:{style(){if(!this.rev||!this.$style)return;let t=this.$style;return it(t)?t:t?(Q(t)||(t=[t]),t.map((t=>as(t,(t=>this.writeGeometryInDataProj(t)))))):void 0}},watch:{...qa(["renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","style"],["style"])},methods:{getServices(){return Jt(Fl.methods.getServices.call(this),hl.methods.getServices.call(this))},subscribeAll(){Fl.methods.subscribeAll.call(this),Tu.call(this)},getStyleTarget(){return this.$layer},async getFeatures(t){return(await this.resolveLayer()).getFeatures(t)},styleChanged(t,e){ut(t,e)||((ot(t)||Q(t))&&(t=Lt(t)),this.$emit("update:style",t))}}};async function Tu(){}const _u=X(K,Y(ht));var Ru={mixins:[gl,vl,Al],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{features:{type:Array,default:z,validator:t=>St(t,Is)},formatFactory:{type:Function,default:ys},loader:Function,loaderFactory:Function,loadingStrategy:{type:Function},strategyFactory:Function,url:{type:[String,Function],validator:t=>it(t)||_u(t)},overlaps:{type:Boolean,default:!0},useSpatialIndex:{type:Boolean,default:!0}},data:()=>({format:void 0,currentUrl:void 0,currentLoader:void 0}),computed:{featuresDataProj(){return wt(this.features,(t=>Cs(Lt(t))))},featuresViewProj(){return wt(this.features,(t=>Cs(this.writeFeatureInViewProj(this.readFeatureInDataProj(t)))))},featuresHash(){return vt(this.features,((t,e)=>(t[Os(e)]=!0,t)),{})},currentFeaturesDataProj(){return this.rev?wt(this.getFeatures(),(t=>this.writeFeatureInDataProj(t))):[]},currentFeaturesViewProj(){return this.rev?wt(this.getFeatures(),(t=>this.writeFeatureInViewProj(t))):[]},currentFeaturesHash(){return this.rev?vt(this.getFeatures(),((t,e)=>(t[Os(e)]=!0,t)),{}):{}},extentDataProj(){return this.rev?this.getExtent():void 0},extentViewProj(){return this.rev?this.getExtent(!0):void 0},inputUrl(){return this.createUrlFunc(this.url)},inputLoader(){let t=this.loader;return!t&&this.loaderFactory&&(t=this.loaderFactory()),this.createLoaderFunc(t)},inputLoadingStrategy(){let t=this.loadingStrategy;return!t&&this.strategyFactory&&(t=this.strategyFactory()),t||f.all},formatIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"format")},inputFormatFactory(){return ft(this.formatFactory.bind(this))}},watch:{rev(){this.$source&&this.currentUrl!==this.$source.getUrl()&&(this.currentUrl=this.$source.getUrl())},...qa(["featuresViewProj","currentFeaturesDataProj","extentDataProj","inputUrl","currentUrl","inputLoader","currentLoader","inputLoadingStrategy","inputFormatFactory","formatIdent","format","overlaps","useSpatialIndex"],["featuresViewProj","currentFeaturesDataProj","extentDataProj"])},created(){it(this.inputFormatFactory)&&(this.format=this.instanceFactoryCall(this.formatIdent,this.inputFormatFactory.bind(this))),this.currentUrl=this.inputUrl,this.currentLoader=this.inputLoader},updated(){},methods:{createSource(){return new e.Vector({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,format:this.format,loader:this.currentLoader,strategy:this.inputLoadingStrategy,url:this.currentUrl,overlaps:this.overlaps,useSpatialIndex:this.useSpatialIndex,features:this.$featuresCollection})},getServices(){const t=this;return Jt(Al.methods.getServices.call(this),{get featuresContainer(){return t}})},subscribeAll(){Al.methods.subscribeAll.call(this),vl.methods.subscribeAll.call(this),Fu.call(this)},addFeatures(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.$source)return vl.methods.addFeatures.call(this,e,i);const r=[];gt(e||[],(e=>{kt(e=this.initializeFeature(e,i),t.Feature);const n=this.$source.getFeatureById(Os(e));n?this.updateFeature(n,e):r.push(e)})),r.length&&this.$source.addFeatures(r)},addFeature(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.$source)return vl.methods.addFeature.call(this,t,e);t=this.initializeFeature(t,e);const i=this.$source.getFeatureById(Os(t));null==i?this.$source.addFeature(t):this.updateFeature(i,t)},removeFeatures(t){if(!this.$source)return vl.methods.removeFeatures.call(this,t);let e=!1;gt(t,(t=>{e=this.removeFeatureInternal(t)})),e&&this.$source.changed()},removeFeatureInternal(t){if(!(t=this.getFeatureById(Os(t))))return!1;const e=p.getUid(t);return e in this.$source.nullGeometryFeatures_?delete this.$source.nullGeometryFeatures_[e]:this.$source.featuresRtree_&&this.$source.featuresRtree_.remove(t),this.$source.removeFeatureInternal(t),!0},removeFeature(t){var e;if(!this.$source)return vl.methods.removeFeature.call(this,t);(t=this.$source.getFeatureById(Os((null===(e=t)||void 0===e?void 0:e.$feature)||t)))&&this.$source.removeFeature(t)},getFeatureById(t){return this.$source?this.$source.getFeatureById(t):vl.methods.getFeatureById.call(this,t)},getFeatures(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getFeatures(),vl.methods.getFeatures.call(this))},getFeaturesCollection(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getFeaturesCollection(),this._featuresCollection)},isEmpty(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.isEmpty(),0===this.$featuresCollection.getLength())},async clear(t){if(!this.$source)return this.clearFeatures();const e=await this.resolveSource();return new Promise((t=>{e.once("change",(()=>t())),e.clear()}))},forEachFeature(t){return this.$source?this.$source.forEachFeature(t):vl.methods.forEachFeature.call(this,t)},forEachFeatureInExtent(t,e){return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Kr(t):this.extentToViewProj(t),this.$source?this.$source.forEachFeatureInExtent(t,e):vl.methods.forEachFeatureInExtent.call(this,t,e,!0)},forEachFeatureIntersectingExtent(t,e){return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Kr(t):this.extentToViewProj(t),this.$source?this.$source.forEachFeatureIntersectingExtent(t,e):vl.methods.forEachFeatureIntersectingExtent.call(this,t,e,!0)},getFeaturesAtCoordinate(t){return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Qr(t):this.pointToViewProj(t),this.$source?this.$source.getFeaturesAtCoordinate(t):vl.methods.getFeaturesAtCoordinate.call(this,t,!0)},getFeaturesInExtent(t){return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Kr(t):this.extentToViewProj(t),this.$source?this.$source.getFeaturesInExtent(t):vl.methods.getFeaturesInExtent.call(this,t,!0)},getClosestFeatureToCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Qr(t):this.pointToViewProj(t),this.$source?this.$source.getClosestFeatureToCoordinate(t,e):vl.methods.getClosestFeatureToCoordinate.call(this,t,e,!0)},getExtent(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=this.$source?this.$source.getExtent():vl.methods.getFeaturesExtent.call(this,!0),e?t:this.extentToDataProj(t)},getFormat(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getFormat(),this.format)},getUrl(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.currentUrl)},setUrl(t){(t=this.createUrlFunc(t))!==this.currentUrl&&(this.currentUrl=t),this.$source&&t!==this.$source.getUrl()&&(this.$source.setUrl(t),this.refresh())},setLoader(t){var e;(t=this.createLoaderFunc(t))!==this.currentLoader&&(this.currentLoader=t,null===(e=this.$source)||void 0===e||e.setLoader(t),this.refresh())},removeLoadedExtent(t){var e;t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Kr(t):this.extentToViewProj(t),null===(e=this.$source)||void 0===e||e.removeLoadedExtent(t)},createUrlFunc(t){if(t)return it(t)||(t=U(t)),this.wrapUrlFunc(t)},wrapUrlFunc(t){let e=t;return e.wrapped||(e=(e,i,r)=>(e=Eu(e,r,this.resolvedDataProjection),r=this.resolvedDataProjection,t(e,i,r)),e.wrapped=!0),e},createLoaderFunc(t){if(it(t))return this.wrapLoaderFunc(t)},wrapLoaderFunc(e){let i=e;return i.wrapped||(i=async(i,r,n)=>{let o=await e(Eu(i,n,this.resolvedDataProjection),r,this.resolvedDataProjection);o&&(Q(o)&&o[0]instanceof t.Feature||(o=this.readSource(o)),Q(o)&&this.addFeatures(o))},i.wrapped=!0),i},readSource(t){return this.getFormat().readFeatures(t,{featureProjection:this.resolvedViewProjection,dataProjection:this.resolvedDataProjection})},async featuresViewProjChanged(t,e){ut(t,e)||(gt(this.getFeatures(),(t=>{this.featuresHash[Os(t)]||this.removeFeatureInternal(t)})),this.addFeatures(t,!0),await this.debounceChanged())},currentFeaturesDataProjChanged(t){ut(t,this.featuresDataProj)||this.$emit("update:features",Lt(t))},extentDataProjChanged(t,e){ut(t,e)||this.$emit("update:extent",null==t?void 0:t.slice())},inputUrlChanged(t){this.setUrl(t)},currentUrlChanged(t){t!==this.inputUrl&&this.$emit("update:url",t)},inputLoaderChanged(t){this.setLoader(t)},currentLoaderChanged(t){t!==this.inputLoader&&this.$emit("update:loader",t)},formatIdentChanged(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.format?this.setInstance(t,this.format):!t&&e&&this.unsetInstance(e)},inputFormatFactoryChanged(t){for(;this.hasInstance(this.formatIdent);)this.unsetInstance(this.formatIdent);it(t)?this.format=this.instanceFactoryCall(this.formatIdent,t.bind(this)):this.format=void 0},attributionsCollapsibleChanged:G,stateChanged:G}};function Fu(){}function Eu(t,e,i){return t=t.slice(),isFinite(t[0])&&isFinite(t[1])&&([t[0],t[1]]=to([t[0],t[1]],e,i)),isFinite(t[2])&&isFinite(t[3])&&([t[2],t[3]]=to([t[2],t[3]],e,i)),t}const Vu=t=>Hs(t,["LAYERS","VERSION","STYLES","FORMAT","TRANSPARENT","BGCOLOR","TIME"]);var Lu={props:{hidpi:{type:Boolean,default:!0},serverType:{type:String,validator:t=>Object.values(Jr).includes(t)},layers:{type:String,required:!0},styles:String,version:{type:String,default:"1.3.0"},transparent:{type:Boolean,default:!0},format:{type:String,default:"image/png"},bgColor:String,time:String,params:Object},data:()=>({currentParams:void 0}),computed:{inputLayers(){return Q(this.layers)?this.layers.join(","):this.layers},inputStyles(){return Q(this.styles)?this.styles.join(","):this.styles},customParams(){return this.params?Vu(this.params):void 0},inputParams(){return{...this.customParams||{},LAYERS:this.inputLayers,STYLES:this.inputStyles,VERSION:this.version,FORMAT:this.format,TRANSPARENT:this.transparent,BGCOLOR:this.bgColor,TIME:this.time}},...vt(["inputLayers","inputStyles","version","format","transparent","bgColor","time"],((t,e)=>{const i="input"===e.slice(0,5)?jt(e.slice(5)):e;return t["current"+It(i)]=function(){return at((this.currentParams||{})[i.toUpperCase()],(this.inputParams||{})[i.toUpperCase()])},t}),{})},watch:{rev(){this.$source&&(ut(this.currentParams,this.$source.getParams())||(this.currentParams=this.$source.getParams()))},...Kt(["currentLayers","currentStyles","currentVersion","currentFormat","currentTransparent","currentBgColor","currentTime"],(t=>function(e){const i=jt(t.slice(7));ut(e,this[Tt(this,"input"+It(i))?"input"+It(i):i])||this.$emit("update:"+i,nt(e)?Lt(e):e)})),...qa(["hidpi","serverType","inputParams","currentParams"],["inputParams","currentParams"])},created(){this.currentParams=this.inputParams&&Lt(this.inputParams)},methods:{async getFeatureInfoUrl(t,e,i){var r;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e||(e=null===(r=this.$viewVm)||void 0===r?void 0:r.getResolution()),i||(i=this.resolvedDataProjection),(await this.resolveSource()).getFeatureInfoUrl(t,e,i,n)},async getLegendUrl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await this.resolveSource()).getLegendUrl(t,e)},getParams(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getParams(),this.currentParams)},updateParams(t){ut(t=vt({...this.currentParams,...t},((t,e,i)=>({...t,[i.toUpperCase()]:e})),{}),this.currentParams)||(this.currentParams=t),this.$source&&!ut(t,this.$source.getParams())&&this.$source.updateParams(t)},updateParam(t,e){this.updateParams({[t.toUpperCase()]:e})},inputParamsChanged(t){this.updateParams(t)},currentParamsChanged(t){ut(t=t?Vu(t):void 0,this.customParams)||this.$emit("update:params",t&&Lt(t))}}};function Au(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Nu(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}var Mu=Nu((function(t){function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),ku=Au(Mu);function Du(t,e){var i=e-t.toString().length+1;return(new Array(parseInt(i>0&&i,10)).join("0")+t).toString().slice(-e)}var Gu=/{z}/g,Uu=/{0z}/g,zu=/{x\d?}/g,Zu=/{y\d?}/g,Bu=/{-y\d?}/g;function Wu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.createXYZ();return function(i){if(null!=i)return t.replace(Gu,qu(i[0])).replace(Uu,qu(i[0],!0)).replace(zu,Xu(i[1])).replace(Zu,Xu(i[2])).replace(Bu,(function(t){var r=i[0],n=e.getFullTileRange(r);if(!n)throw new Error("The {-y} placeholder requires a tile grid with extent.");return Xu(n.getHeight()-i[2]-1)(t)}))}}function Yu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.createXYZ();return Ju(t.map((function(t){return Wu(t,e)})))}function qu(t,e){return function(){return e?Du(t,2):t.toString()}}function Xu(t){return function(e){var i=e.match(/\d/);return i?Du(t,9).slice(3*(i[0]-1),3*i[0]):t.toString()}}function Hu(t){var e=[],i=/{(\d)-(\d)}/.exec(t)||/{([a-z])-([a-z])}/.exec(t);if(i)for(var r=i[1].charCodeAt(0),n=i[2].charCodeAt(0),o=r;o<=n;++o)e.push(t.replace(i[0],String.fromCharCode(o)));else e.push(t);return e}function Ju(t){return 1===t.length?t[0]:function(e,i,r){if(null!=e){var n=function(t,e){var i=t%e;return i*e<0?i+e:i}((e[1]<<e[0])+e[2],t.length);return t[n](e,i,r)}}}"undefined"!=typeof window&&"object"===ku(window.ol)&&(window.ol.tileCacheUrlFn={createTileUrlFunction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.createXYZ();return Yu(Hu(t),e)},createTileUrlFunctionFromTemplate:Wu,createTileUrlFunctionFromTemplates:Yu});const Ku=q(J,X(Q,(t=>2===t.length&&t.every(J))));var Qu={mixins:[ju],props:{projection:{...Al.props.projection,default:Hn},maxZoom:{type:Number,default:42},minZoom:{type:Number,default:0,validator:t=>t>=0},maxResolution:Number,tileSize:{type:[Number,Array],default:()=>[256,256],validator:Ku}},computed:{inputTileSize(){return Q(this.tileSize)?this.tileSize.slice():[this.tileSize,this.tileSize]},derivedTileGridFactory(){if(it(this.tileGridFactory))return this.tileGridFactory;const t=ta(this.resolvedDataProjection),e=this.maxZoom,i=this.minZoom,r=this.maxResolution,n=this.inputTileSize;return()=>v.createXYZ({extent:t,maxZoom:e,minZoom:i,maxResolution:r,tileSize:n})},inputTileUrlFunction(){const t=at(this.tileUrlFunction,this.tileUrlFunc);return it(t)?t:0!==this.currentUrls.length?Yu(this.currentUrls,this.tileGrid):void 0}},methods:{createSource(){return new e.XYZ({attributions:this.currentAttributions,attributionsCollapsible:this.attributionsCollapsible,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,tilePixelRatio:this.tilePixelRatio,transition:this.transition,zDirection:this.zDirection,tileGrid:this.tileGrid,tileLoadFunction:this.currentTileLoadFunction,tileUrlFunction:this.currentTileUrlFunction,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileClass:this.tileClass,imageSmoothing:this.imageSmoothing})},tileKeyChanged:G,stateChanged:G}},tc=Object.freeze({__proto__:null,arcgisSource:Ja,baseLayer:el,controlsContainer:sl,eventBus:Sa,EVENT_BUS_PROP:wa,feature:ml,featureHelper:gl,featuresContainer:vl,fillStyleContainer:wl,geometry:$l,geometryContainer:ul,identMap:Ia,IDENTITY_MAP_PROP:$a,INSTANCES_POOL:Pa,imageLayer:Vl,imageSource:zl,imageStyle:Yl,imageStyleContainer:Xl,interaction:Jl,interactionsContainer:tu,layer:Fl,layersContainer:ru,olCmp:Ea,VM_PROP:Ca,FRAME_TIME:Ta,OlObjectState:_a,OlObjectEvent:Ra,OlObjectAction:Fa,LifecycleError:za,CanceledError:Za,isCreateError:Ba,isMountError:Wa,isUnmountError:function(t){return t instanceof za&&t.action===Fa.UNMOUNT},isDestroyError:function(t){return t instanceof za&&t.action===Fa.DESTROY},makeChangeOrRecreateWatchers:qa,overlaysContainer:su,projTransforms:Ka,regShapeStyle:hu,rxSubs:ja,services:xa,SERVICES_PROP:Oa,simpleGeometry:mu,source:Al,sourceContainer:_l,strokeStyleContainer:uu,stubVNode:Qa,style:Bl,styleContainer:hl,textStyleContainer:fu,tileImageSource:ju,tileLayer:Ou,tileSource:wu,urlTileSource:Pu,vectorLayer:Cu,vectorSource:Ru,waitForMap:tl,wmsSource:Lu,xyzSource:Qu});function ec(t,e,i,r,n,o,s,a,l,u){"boolean"!=typeof s&&(l=a,a=s,s=!1);const c="function"==typeof i?i.options:i;let h;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,n&&(c.functional=!0)),r&&(c._scopeId=r),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=h):e&&(h=s?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),h)if(c.functional){const t=c.render;c.render=function(e,i){return h.call(i),t(e,i)}}else{const t=c.beforeCreate;c.beforeCreate=t?[].concat(t,h):[h]}return i}const ic=ec({},undefined,{name:"VlSourceBingmaps",mixins:[ju],props:{hidpi:{type:Boolean,default:!1},culture:{type:String,default:"en-us"},apiKey:{type:String,required:!0},imagerySet:{type:String,required:!0},maxZoom:{type:Number,default:21}},computed:{tileGridIdent:G,inputTileGridFactory:G,inputUrl:G,inputUrls:G,inputTileUrlFunction:G,inputAttributions:G},watch:{...qa(["hidpi","culture","apiKey","imagerySet","maxZoom"])},methods:{createSource(){return new e.BingMaps({wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,hidpi:this.hidpi,culture:this.culture,key:this.apiKey,imagerySet:this.imagerySet,maxZoom:this.maxZoom})},getApiKey(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getApiKey(),this.apiKey)},getImagerySet(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getImagerySet(),this.imagerySet)},stateChanged:G,attributionsCollapsibleChanged:G,projectionChanged:G,tileGridIdentChanged:G,inputTileGridFactoryChanged:G,tileGridChanged:G,tileKeyChanged:G,tilePixelRatioChanged:G,zDirectionChanged:G,inputTileUrlFunctionChanged:G,inputUrlsChanged:G,crossOriginChanged:G,tileClassChanged:G}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function rc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rc.installed||(rc.installed=!0,e=$t(e,"dataProjection"),Object.assign(ic,e),t.component(ic.name,ic))}var nc=Object.freeze({__proto__:null,default:rc,install:rc,Source:ic}),oc={name:"VlSourceInnerAdapter",mixins:[Qa,_l,Ea],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},computed:{source(){if(this.rev&&this.$source)return{id:Ys(this.$source),type:this.$source.constructor.name}}},watch:{source:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:source",t&&Lt(t))}}},created(){Object.defineProperties(this,{$innerSourceContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.innerSourceContainer}}})},methods:{createOlObject(){const t=Z();return t.id=this.currentId,t},getServices(){return Jt(Ea.methods.getServices.call(this),_l.methods.getServices.call(this))},getSourceTarget(){return{getSource:()=>{var t;return null===(t=this.$innerSourceContainer)||void 0===t?void 0:t.getInnerSource()},setSource:t=>{var e;return null===(e=this.$innerSourceContainer)||void 0===e?void 0:e.setInnerSource(t)}}}}};var sc={name:"VlSourceCluster",components:{InnerSource:ec({},undefined,oc,undefined,undefined,undefined,!1,void 0,void 0,void 0)},mixins:[Ru],props:{distance:{type:Number,default:20},geometryFunction:{type:Function},geomFunc:Function,geomFuncFactory:Function},data(){return{currentDistance:this.distance}},computed:{inputGeometryFunction(){let t=this.geometryFunction||this.geomFunc;return!t&&this.geomFuncFactory&&(t=this.geomFuncFactory()),t||lc},innerSource(){if(this.rev&&this.$innerSource)return{id:Ys(this.$innerSource),type:this.$innerSource.constructor.name}},inputUrl:G,inputLoader:G,inputLoadingStrategy:G,formatIdent:G,inputFormatFactory:G},watch:{rev(){this.$source&&this.currentDistance!==this.$source.getDistance()&&(this.currentDistance=this.$source.getDistance())},distance(t){this.setDistance(t)},currentDistance(t){t!==this.distance&&this.$emit("update:distance",t)},innerSource:{deep:!0,handler(t,e){t!==e&&this.$emit("update:innerSource",t&&Lt(t))}},...qa(["inputGeometryFunction"])},created(){this._innerSource=void 0,this._innerSourceVm=void 0,ac.call(this)},updated(){},methods:{createSource(){return new e.Cluster({attributions:this.currentAttributions,wrapX:this.wrapX,source:this.$innerSource,distance:this.currentDistance,geometryFunction:this.inputGeometryFunction})},getServices(){const t=this;return Jt(Ru.methods.getServices.call(this),{get innerSourceContainer(){return t}})},getDistance(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getDistance(),this.currentDistance)},setDistance(t){Mt(J(t),"Invalid distance"),t!==this.currentDistance&&(this.currentDistance=t),this.$source&&t!==this.$source.getDistance()&&this.$source.setDistance(t)},getInnerSource(){return this._innerSource},getInnerSourceVm(){return this._innerSourceVm},setInnerSource(t){var i,r;(Mt(!(t=(null===(i=t)||void 0===i?void 0:i.$source)||t)||t instanceof e.Source),t||(t=void 0),t!==this._innerSource)&&(this._innerSource=t,this._innerSourceVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh());this.$source&&t!==this.$source.getSource()&&(this.$source.setSource(t),this.scheduleRefresh())},projectionChanged:G,inputUrlChanged:G,inputLoaderChanged:G,inputLoadingStrategyChanged:G,inputFormatFactoryChanged:G,formatIdentChanged:G,formatChanged:G,overlapsChanged:G,useSpatialIndexChanged:G}};function ac(){Object.defineProperties(this,{$innerSource:{enumerable:!0,get:this.getInnerSource},$innerSourceVm:{enumerable:!0,get:this.getInnerSourceVm}})}function lc(t){const e=t.getGeometry();if(!e)return;const i=zn(e);return i?Dn(i):void 0}const uc=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[i("InnerSource",{attrs:{id:"vl-"+t.currentId+"-inner-source"}},[t._t("default")],2)],1)},staticRenderFns:[]},undefined,sc,undefined,false,undefined,!1,void 0,void 0,void 0);function cc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cc.installed||(cc.installed=!0,e=$t(e,"dataProjection"),Object.assign(uc,e),t.component(uc.name,uc))}var hc=Object.freeze({__proto__:null,default:cc,install:cc,Source:uc});const dc=t=>It(Rt(t));var mc={name:"VlInteractionDraw",mixins:[Jl,hl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},clickTolerance:{type:Number,default:6},snapTolerance:{type:Number,default:12},type:{type:String,required:!0,validator:t=>Object.values(Yr).includes(dc(t))},stopClick:{type:Boolean,default:!1},maxPoints:Number,minPoints:Number,finishCondition:Function,geometryFunction:Function,geometryName:{type:String,default:"geometry"},condition:{type:Function,default:y.noModifierKeys},freehand:{type:Boolean,default:!1},freehandCondition:{type:Function,default:y.shiftKeyOnly},wrapX:{type:Boolean,default:!1},dragVertexDelay:{type:Number,default:500}},computed:{inputType(){return dc(this.type)}},watch:{...qa(["source","clickTolerance","snapTolerance","inputType","stopClick","maxPoints","minPoints","finishCondition","geometryFunction","geometryName","condition","freehand","freehandCondition","wrapX","dragVertexDelay"])},methods:{async createInteraction(){let i,r=this._source=await this.getInstance(this.source);return Mt(!!r,`Source "${this.source}" not found in identity map.`),r instanceof e.Vector||(it(r.getFeaturesCollection)?i=r.getFeaturesCollection():it(r.getFeatures)&&(i=r.getFeatures()),kt(i,t.Collection,`Source "${this.source}" doesn't provide features collection.`),r=null),new h.Draw({source:r,features:i,clickTolerance:this.clickTolerance,snapTolerance:this.snapTolerance,type:this.inputType,stopClick:this.stopClick,maxPoints:this.maxPoints,minPoints:this.minPoints,finishCondition:this.finishCondition,geometryFunction:this.geometryFunction,geometryName:this.geometryName,condition:this.condition,freehand:this.freehand,freehandCondition:this.freehandCondition,wrapX:this.wrapX,dragVertexDelay:this.dragVertexDelay,style:this.$style})},getServices(){return Jt(Jl.methods.getServices.call(this),hl.methods.getServices.call(this))},subscribeAll(){Jl.methods.subscribeAll.call(this),pc.call(this)},getStyleTarget(){return{getStyle:()=>this._style,setStyle:()=>{this.scheduleRecreate()}}},async getOverlay(){return(await this.resolveInteraction()).getOverlay()},async abortDrawing(){(await this.resolveInteraction()).abortDrawing()},async finishDrawing(){(await this.resolveInteraction()).finishDrawing()},async appendCoordinates(t){t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?tn(t):this.lineToViewProj(t),(await this.resolveInteraction()).appendCoordinates(t)},async removeLastPoint(){(await this.resolveInteraction()).removeLastPoint()},async getPointerCount(){return(await this.resolveInteraction()).getPointerCount()}}};function pc(){const t=pa(this.$interaction,"drawstart").pipe(oi((t=>({...t,feature:Cs(t.feature)}))),Or((()=>this.setInteracting(!0)))),e=()=>{var t,e;return null!==(t=this._source)&&void 0!==t&&null!==(e=t.vm)&&void 0!==e&&e.length?ga(this._source.vm[0],"update:features").pipe(ur()):We(!0).pipe(function(t,e){void 0===e&&(e=ti);var i=Bi(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new Wi(i,e))}}(100))},i=Ci(t,pa(this.$interaction,"drawend").pipe(Si((t=>e().pipe(cr(t)))),Or((()=>this.setInteracting(!1))))).pipe(oi((t=>{let{type:e,feature:i}=t;const r=this.resolvedViewProjection,n=this.resolvedDataProjection;return{type:e,feature:i,get json(){return this._json||(this._json=bs(this.feature,r,n,6)),this._json}}})));this.subscribeTo(i,(t=>this.$emit(t.type,t)))}const fc=ec({},undefined,mc,undefined,undefined,undefined,!1,void 0,void 0,void 0);function gc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gc.installed||(gc.installed=!0,e=$t(e,"dataProjection"),Object.assign(fc,e),t.component(fc.name,fc))}var vc=Object.freeze({__proto__:null,default:gc,install:gc,Interaction:fc}),yc={name:"VlGeomCircle",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:an},radius:{type:Number,default:0},radiusProjection:{type:String,validator:t=>!!u.get(t)}},data(){return{currentRadiusViewProj:this.radius}},computed:{type:U(Yr.CIRCLE),resolvedRadiusProjection(){return this.radiusProjection||this.resolvedDataProjection},radiusDataProj(){return st(this.radius)},radiusViewProj(){return this.radiusToViewProj(this.radius,this.coordinatesDataProj)},currentRadiusDataProj(){return this.radiusToDataProj(this.currentRadiusViewProj)}},watch:{radiusViewProj(t){this.setRadius(t,!0)},currentRadiusDataProj(t){t!==this.radiusDataProj&&this.$emit("update:radius",t)}},created(){this.currentRadiusViewProj=this.radiusViewProj},methods:{createGeometry(){return new s.Circle(this.currentCoordinatesViewProj,this.currentRadiusViewProj)},getCoordinates(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCenter(t)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setCenter(t,e)},getCenter(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=at(null===(t=this.$geometry)||void 0===t?void 0:t.getCenter(),this.currentCoordinatesViewProj);return e?Qr(i):this.pointToDataProj(i)},setCenter(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(an(t),"Invalid center"),ut(t=e?Qr(t):this.pointToViewProj(t),this.currentCoordinatesViewProj)||(this.currentCoordinatesViewProj=t),this.$geometry&&!ut(t,this.$geometry.getCenter())&&this.$geometry.setCenter(t)},getRadius(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=at(null===(t=this.$geometry)||void 0===t?void 0:t.getRadius(),this.currentRadiusViewProj);return e?st(i):this.radiusToDataProj(i)},setRadius(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(J(t),"Invalid radius"),(t=e?st(t):this.radiusToDataProj(t))!==this.currentRadiusViewProj&&(this.currentRadiusViewProj=t),this.$geometry&&t!==this.$geometry.getRadius()&&this.$geometry.setRadius(t)},setCenterAndRadius(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=i?Qr(t):this.pointToViewProj(t),e=i?st(e):this.radiusToViewProj(e),this.$geometry?this.$geometry.setCenterAndRadius(t,e):(this.setCenter(t,!0),this.setRadius(e,!0))},radiusToViewProj(t){return bo(t,this.resolvedRadiusProjection,this.resolvedViewProjection)},radiusToDataProj(t){return bo(t,this.resolvedViewProjection,this.resolvedRadiusProjection)}}};const bc=ec({},undefined,yc,undefined,undefined,undefined,!1,void 0,void 0,void 0);var wc={name:"VlGeomPoint",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:an}},computed:{type:U(Yr.POINT)},methods:{createGeometry(){return new s.Point(this.currentCoordinatesViewProj)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(an(t),"Invalid coordinates"),mu.methods.setCoordinates.call(this,t,e)}}};const Sc=ec({},undefined,wc,undefined,undefined,undefined,!1,void 0,void 0,void 0);const $c=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",(function(){return[i("PointGeom",{attrs:{id:"vl-"+t.currentId+"-default-geom",coordinates:[0,0]}})]}),{id:t.currentId,properties:t.currentProperties})],2)},staticRenderFns:[]},undefined,{name:"VlFeature",components:{PointGeom:Sc},mixins:[ml]},undefined,false,undefined,!1,void 0,void 0,void 0);var Pc={name:"VlGeomLineString",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:ln}},computed:{type:U(Yr.LINE_STRING)},methods:{createGeometry(){return new s.LineString(this.currentCoordinatesViewProj)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(ln(t),"Invalid coordinates"),mu.methods.setCoordinates.call(this,t,e)}}};const Ic=ec({},undefined,Pc,undefined,undefined,undefined,!1,void 0,void 0,void 0);var jc={name:"VlGeomMultiLineString",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:hn}},computed:{type:U(Yr.MULTI_LINE_STRING)},methods:{createGeometry(){return new s.MultiLineString(this.currentCoordinatesViewProj)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(hn(t),"Invalid coordinates"),mu.methods.setCoordinates.call(this,t,e)}}};const Oc=ec({},undefined,jc,undefined,undefined,undefined,!1,void 0,void 0,void 0);var xc={name:"VlGeomMultiPoint",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:cn}},computed:{type:U(Yr.MULTI_POINT)},methods:{createGeometry(){return new s.MultiPoint(this.currentCoordinatesViewProj)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(cn(t),"Invalid coordinates"),mu.methods.setCoordinates.call(this,t,e)}}};const Cc=ec({},undefined,xc,undefined,undefined,undefined,!1,void 0,void 0,void 0);var Tc={name:"VlGeomMultiPolygon",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:dn}},computed:{type:U(Yr.MULTI_POLYGON)},methods:{createGeometry(){return new s.MultiPolygon(this.currentCoordinatesViewProj)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(dn(t),"Invalid coordinates"),mu.methods.setCoordinates.call(this,t,e)}}};const _c=ec({},undefined,Tc,undefined,undefined,undefined,!1,void 0,void 0,void 0);var Rc={name:"VlGeomPolygon",mixins:[mu],props:{coordinates:{...mu.props.coordinates,validator:un}},computed:{type:U(Yr.POLYGON)},methods:{createGeometry(){return new s.Polygon(this.currentCoordinatesViewProj)},setCoordinates(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(un(t),"Invalid coordinates"),mu.methods.setCoordinates.call(this,t,e)}}};const Fc=ec({},undefined,Rc,undefined,undefined,undefined,!1,void 0,void 0,void 0);function Ec(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ec.installed||(Ec.installed=!0,e=$t(e,"dataProjection"),Object.assign($c,e),Object.assign(bc,e),Object.assign(Sc,e),Object.assign(Ic,e),Object.assign(Fc,e),Object.assign(Cc,e),Object.assign(Oc,e),Object.assign(_c,e),t.component($c.name,$c),t.component(bc.name,bc),t.component(Sc.name,Sc),t.component(Ic.name,Ic),t.component(Fc.name,Fc),t.component(Cc.name,Cc),t.component(Oc.name,Oc),t.component(_c.name,_c))}var Vc=Object.freeze({__proto__:null,default:Ec,install:Ec,Feature:$c,CircleGeom:bc,PointGeom:Sc,LineStringGeom:Ic,PolygonGeom:Fc,MultiPointGeom:Cc,MultiLineStringGeom:Oc,MultiPolygonGeom:_c});const Lc=X(K,(t=>null!=u.get(t)));function Ac(){Object.defineProperties(this,{$geolocation:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}}})}function Nc(){const t=At("set"),e=Ci(fa(this.$geolocation,"projection",!0,(t=>({...t,value:u.get(t.value).getCode()}))),fa(this.$geolocation,["tracking","trackingOptions"],!0)).pipe(oi((e=>({...e,setter:i=>{this[t(e.prop)](i),this.scheduleRefresh()}}))));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}));const i=fa(this.$geolocation,["accuracy","accuracyGeometry","altitude","altitudeAccuracy","heading","speed","position"],!0);this.subscribeTo(i,this.scheduleRefresh.bind(this))}const Mc=ec({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",null,{accuracy:t.accuracy,accuracyGeometry:t.accuracyGeometryDataProj,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,position:t.positionDataProj,speed:t.speed})],2)},staticRenderFns:[]},undefined,{name:"VlGeoloc",mixins:[Ka,Ea,tl],stubVNode:{empty(){return this.vmId}},props:{tracking:{type:Boolean,default:!0},trackingOptions:Object,projection:{type:String,validator:Lc}},data(){return{viewProjection:Hn,dataProjection:Hn,currentTracking:this.tracking,currentTrackingOptions:this.trackingOptions&&Lt(this.trackingOptions),currentProjection:this.projection}},computed:{resolvedDataProjection(){var t;return at(this.currentProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.dataProjection,this.resolvedViewProjection)},accuracy(){return this.rev?this.getAccuracy():void 0},accuracyGeometryDataProj(){return this.rev?this.writeGeometryInDataProj(this.getAccuracyGeometry()):void 0},accuracyGeometryViewProj(){return this.rev?this.writeGeometryInViewProj(this.getAccuracyGeometry()):void 0},altitude(){return this.rev?this.getAltitude():void 0},altitudeAccuracy(){return this.rev?this.getAltitudeAccuracy():void 0},heading(){return this.rev?this.getHeading():void 0},speed(){return this.rev?this.getSpeed():void 0},positionDataProj(){return this.rev?this.getPosition():void 0},positionViewProj(){return this.rev?this.pointToViewProj(this.getPosition()):void 0}},watch:{rev(){this.$geolocation&&(this.currentTracking!==this.$geolocation.getTracking()&&(this.currentTracking=this.$geolocation.getTracking()),ut(this.currentTrackingOptions,this.$geolocation.getTrackingOptions())||(this.currentTrackingOptions=this.$geolocation.getTrackingOptions()),this.currentProjection!==this.$geolocation.getProjection().getCode()&&(this.currentProjection=this.$geolocation.getProjection().getCode()))},tracking(t){this.setTracking(t)},currentTracking(t){t!==this.tracking&&this.$emit("update:tracking",t)},tracingOptions:{deep:!0,handler(t){this.setTrackingOptions(t)}},currentTrackingOptions:{deep:!0,handler(t){ut(t,this.trackingOptions)||this.$emit("update:tracingOptions",t&&Lt(t))}},projection(t){this.setProjection(t)},currentProjection(t){t!==this.projection&&this.$emit("update:projection",t)},accuracy(t,e){t!==e&&this.$emit("update:accuracy",t)},accuracyGeometryDataProj(t,e){ut(t,e)||this.$emit("update:accuracyGeometry",t)},currentAltitude(t,e){t!==e&&this.$emit("update:altitude",t)},altitudeAccuracy(t,e){t!==e&&this.$emit("update:altitudeAccuracy",t)},heading(t,e){t!==e&&this.$emit("update:heading",t)},speed(t,e){t!==e&&this.$emit("update:speed",t)},positionDataProj(t,e){ut(t,e)||this.$emit("update:position",t)}},created(){Ac.call(this)},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},createOlObject(){const e=new t.Geolocation({tracking:this.currentTracking,trackingOptions:this.currentTrackingOptions,projection:this.resolvedDataProjection});return e.set("id",this.currentId),e},mount(){return this.setTracking(this.tracking),Ea.methods.mount.call(this)},unmount(){return this.setTracking(!1),Ea.methods.unmount.call(this)},subscribeAll(){Ea.methods.subscribeAll.call(this),Nc.call(this)},resolveGeolocation:Ea.methods.resolveOlObject,getIdInternal(){return this.$geolocation.get("id")},setIdInternal(t){t!==this.getIdInternal()&&this.$geolocation.set("id",t)},getAccuracy(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAccuracy()},getAccuracyGeometry(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAccuracyGeometry()},getAltitude(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAltitude()},getAltitudeAccuracy(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAltitudeAccuracy()},getHeading(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getHeading()},getPosition(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getPosition()},getProjection(){var t;return at(null===(t=this.$geolocation)||void 0===t?void 0:t.getProjection(),this.currentProjection)},setProjection(t){Mt(Lc(t),"Invalid projection"),(t=u.get(t)).getCode()!==this.currentProjection&&(this.currentProjection=t.getCode()),this.$geolocation&&t!==this.$geolocation.getProjection()&&this.$geolocation.setProjection(t)},getSpeed(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getSpeed()},getTracking(){var t;return at(null===(t=this.$geolocation)||void 0===t?void 0:t.getTracking(),this.currentTracking)},setTracking(t){t!==this.currentTracking&&(this.currentTracking=t),this.$geolocation&&t!==this.$geolocation.getTracking()&&this.$geolocation.setTracking(t)},getTrackingOptions(){var t;return at(null===(t=this.$geolocation)||void 0===t?void 0:t.getTrackingOptions(),this.currentTrackingOptions)},setTrackingOptions(t){ut(t,this.currentTrackingOptions)||(this.currentTrackingOptions=t),this.$geolocation&&!ut(t,this.$geolocation.getTrackingOptions())&&this.$geolocation.setTrackingOptions(t)}}},undefined,false,undefined,!1,void 0,void 0,void 0);function kc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kc.installed||(kc.installed=!0,e=$t(e,"dataProjection"),Object.assign(Mc,e),t.component(Mc.name,Mc))}var Dc=Object.freeze({__proto__:null,default:kc,install:kc,Geoloc:Mc});function Gc(){Object.defineProperties(this,{$fillStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.fillStyleContainer}}})}const Uc=ec({},undefined,{name:"VlStyleFill",mixins:[Bl],props:{color:{type:[String,Array],default:()=>[255,255,255,.4]}},data(){return{currentColor:es(this.color)}},computed:{inputColor(){return es(this.color)}},watch:{rev(){this.$style&&this.setColor(this.getColor())},inputColor:{deep:!0,handler(t){this.setColor(t)}},currentColor:{deep:!0,handler(t){ut(t,this.inputColor)||this.$emit("update:color",null==t?void 0:t.slice())}}},created(){Gc.call(this)},methods:{createStyle(){return new c.Fill({color:this.currentColor})},async mount(){var t;return null===(t=this.$fillStyleContainer)||void 0===t||t.setFill(this),Bl.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$fillStyleContainer)||void 0===t?void 0:t.getFillVm())===this&&this.$fillStyleContainer.setFill(null),Bl.methods.unmount.call(this)},async refresh(){var t;await Promise.all([Bl.methods.refresh.call(this),null===(t=this.$fillStyleContainer)||void 0===t?void 0:t.refresh()])},syncNonObservable(){Bl.methods.syncNonObservable.call(this),this.setColor(this.getColor())},getColor(){var t;return es(at(null===(t=this.$style)||void 0===t?void 0:t.getColor(),this.currentColor))},setColor(t){ut(t=es(t),this.currentColor)||(this.currentColor=t,this.scheduleRefresh()),this.$style&&!ut(t,this.$style.getColor())&&(this.$style.setColor(t),this.scheduleRefresh())}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function zc(){Object.defineProperties(this,{$strokeStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.strokeStyleContainer}}})}const Zc=ec({},undefined,{name:"VlStyleStroke",mixins:[Bl],props:{color:{type:[Array,String],default:"#3399cc"},lineCap:{type:String,default:"round"},lineJoin:{type:String,default:"round"},lineDash:Array,lineDashOffset:{type:Number,default:0},miterLimit:{type:Number,default:10},width:{type:Number,default:1.25}},data(){var t;return{currentColor:es(this.color),currentLineCap:this.lineCap,currentLineJoin:this.lineJoin,currentLineDash:null===(t=this.lineDash)||void 0===t?void 0:t.slice(),currentLineDashOffset:this.lineDashOffset,currentMiterLimit:this.miterLimit,currentWidth:this.width}},computed:{inputColor(){return es(this.color)},inputLineDash(){var t;return null===(t=this.lineDash)||void 0===t?void 0:t.slice()}},watch:{rev(){this.$style&&(this.setColor(this.getColor()),this.setLineCap(this.getLineCap()),this.setLineJoin(this.getLineJoin()),this.setLineDash(this.getLineDash()),this.setLineDashOffset(this.getLineDashOffset()),this.setMiterLimit(this.getMiterLimit()),this.setWidth(this.getWidth()))},...Kt(["inputColor","lineCap","lineJoin","inputLineDash","lineDashOffset","miterLimit","width"],(t=>{const e="set"+It("input"===t.slice(0,5)?jt(t.slice(5)):t);return{deep:["inputColor","inputLineDash"].includes(t),handler(t){this[e](t)}}})),...Kt(["currentColor","currentLineCap","currentLineJoin","currentLineDash","currentLineDashOffset","currentMiterLimit","currentWidth"],(t=>{const e="current"===t.slice(0,7)?jt(t.slice(7)):t,i="input"+It(e);return{deep:["currentColor","currentLineDash"].includes(t),handler(t){ut(t,at(this[i],this[e]))||this.$emit(`update:${e}`,nt(t)?Lt(t):t)}}})),inputColor:{deep:!0,handler(t){this.setColor(t)}},currentColor:{deep:!0,handler(t){ut(t,this.inputColor)||this.$emit("update:color",null==t?void 0:t.slice())}},lineCap(t){this.setLineCap(t)},currentLineCap(t){t!==this.lineCap&&this.$emit("update:lineCap",t)},lineJoin(t){this.setLineJoin(t)},currentLineJoin(t){t!==this.lineJoin&&this.$emit("update:lineJoin",t)},inputLineDash:{deep:!0,handler(t){this.setLineDash(t)}},currentLineDash:{deep:!0,handler(t){ut(t,this.currentLineDash)||this.$emit("update:lineDash",null==t?void 0:t.slice())}},lineDashOffset(t){this.setLineDashOffset(t)},currentLineDashOffset(t){t!==this.lineDashOffset&&this.$emit("update:lineDashOffset",t)},miterLimit(t){this.setMiterLimit(t)},currentMiterLimit(t){t!==this.miterLimit&&this.$emit("update:miterLimit",t)},width(t){this.setWidth(t)},currentWidth(t){t!==this.width&&this.$emit("update:width",t)}},created(){zc.call(this)},methods:{createStyle(){return new c.Stroke({color:this.currentColor,lineCap:this.currentLineCap,lineJoin:this.currentLineJoin,lineDash:this.currentLineDash,lineDashOffset:this.currentLineDashOffset,miterLimit:this.currentMiterLimit,width:this.currentWidth})},async mount(){var t;return null===(t=this.$strokeStyleContainer)||void 0===t||t.setStroke(this),Bl.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$strokeStyleContainer)||void 0===t?void 0:t.getStrokeVm())===this&&this.$strokeStyleContainer.setStroke(null),Bl.methods.unmount.call(this)},async refresh(){var t;await Promise.all([Bl.methods.refresh.call(this),null===(t=this.$strokeStyleContainer)||void 0===t?void 0:t.refresh()])},syncNonObservable(){Bl.methods.syncNonObservable.call(this),this.setColor(this.getColor()),this.setLineCap(this.getLineCap()),this.setLineJoin(this.getLineJoin()),this.setLineDash(this.getLineDash()),this.setLineDashOffset(this.getLineDashOffset()),this.setMiterLimit(this.getMiterLimit()),this.setWidth(this.getWidth())},getColor(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getColor(),this.currentColor)},setColor(t){ut(t=es(t),this.currentColor)||(this.currentColor=t,this.scheduleRefresh()),this.$style&&!ut(t,this.$style.getColor())&&(this.$style.setColor(t),this.scheduleRefresh())},getLineCap(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getLineCap(),this.currentLineCap)},setLineCap(t){t!==this.currentLineCap&&(this.currentLineCap=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getLineCap()&&(this.$style.setLineCap(t),this.scheduleRefresh())},getLineJoin(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getLineJoin(),this.currentLineJoin)},setLineJoin(t){t!==this.currentLineJoin&&(this.currentLineJoin=t),this.$style&&t!==this.$style.getLineJoin()&&(this.$style.setLineJoin(t),this.scheduleRefresh())},getLineDash(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getLineDash(),this.currentLineDash)},setLineDash(t){var e;ut(t=null===(e=t)||void 0===e?void 0:e.slice(),this.currentLineDash)||(this.currentLineDash=t,this.scheduleRefresh()),this.$style&&!ut(t,this.$style.getLineDash())&&(this.$style.setLineDash(t),this.scheduleRefresh())},getLineDashOffset(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getLineDashOffset(),this.currentLineDashOffset)},setLineDashOffset(t){t!==this.currentLineDashOffset&&(this.currentLineDashOffset=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getLineDashOffset()&&(this.$style.setLineDashOffset(t),this.scheduleRefresh())},getMiterLimit(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getMiterLimit(),this.currentMiterLimit)},setMiterLimit(t){t!==this.currentMiterLimit&&(this.currentMiterLimit=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getMiterLimit()&&(this.$style.setMiterLimit(t),this.scheduleRefresh())},getWidth(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getWidth(),this.currentWidth)},setWidth(t){t!==this.currentWidth&&(this.currentWidth=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getWidth()&&(this.$style.setWidth(t),this.scheduleRefresh())}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);const Bc=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",(function(){return[i("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style"}}),t._v(" "),i("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style"}})]}))],2)},staticRenderFns:[]},undefined,{name:"VlStyleCircle",components:{FillStyle:Uc,StrokeStyle:Zc},mixins:[hu],props:{radius:{...hu.props.radius,default:5}},data(){return{currentRadius:this.radius}},watch:{rev(){this.$style&&this.setRadius(this.getRadius())},currentRadius(t){t!==this.radius&&this.$emit("update:radius",t)}},methods:{createStyle(){return new c.Circle({displacement:this.inputDisplacement,radius:this.currentRadius,fill:this.$fill,stroke:this.$stroke})},syncNonObservable(){hu.methods.syncNonObservable.call(this),this.setRadius(this.getRadius())},getRadius(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRadius(),this.currentRadius)},setRadius(t){t!==this.currentRadius&&(this.currentRadius=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRadius()&&(this.$style.setRadius(t),this.scheduleRefresh())},radiusChanged(t){this.setRadius(t)},pointsChanged:G,radius1Changed:G,radius2Changed:G,angleChanged:G}},undefined,false,undefined,!1,void 0,void 0,void 0);var Wc="fraction",Yc={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},qc={name:"VlStyleIcon",mixins:[Yl],props:{src:String,size:{type:Array,validator:t=>2===t.length},img:Image,imgSize:{type:Array,validator:t=>2===t.length},anchor:{type:Array,default:()=>[.5,.5],validator:t=>2===t.length},anchorOrigin:{type:String,default:Yc.TOP_LEFT},anchorXUnits:{type:String,default:Wc},anchorYUnits:{type:String,default:Wc},color:[Array,String],crossOrigin:String,offset:{type:Array,default:()=>[0,0],validator:t=>2===t.length},offsetOrigin:{type:String,default:Yc.TOP_LEFT}},data(){var t;return{currentAnchor:null===(t=this.anchor)||void 0===t?void 0:t.slice()}},computed:{inputSize(){var t;return null===(t=this.size)||void 0===t?void 0:t.slice()},inputImgSize(){var t;return null===(t=this.imgSize)||void 0===t?void 0:t.slice()},inputAnchor(){var t;return null===(t=this.anchor)||void 0===t?void 0:t.slice()},inputColor(){return this.color?es(this.color):void 0},inputOffset(){var t;return null===(t=this.offset)||void 0===t?void 0:t.slice()}},watch:{rev(){this.$style&&this.setAnchor(this.getAnchor())},inputAnchor:{deep:!0,handler(t){this.setAnchor(t)}},currentAnchor:{deep:!0,handler(t){ut(t,this.inputAnchor)||this.$emit("update:anchor",null==t?void 0:t.slice())}},...qa(["src","inputSize","img","inputImgSize","anchorOrigin","anchorXUnits","anchorYUnits","anchorYUnits","inputColor","crossOrigin","inputOffset","offsetOrigin"],["inputSize","inputImgSize","inputColor","inputOffset"])},methods:{createStyle(){return Mt(this.src&&!this.img||!this.src&&this.img,"vl-style-icon one of 'image' or 'src' prop must be provided.'"),Mt(!this.img||this.img&&!ht(this.imgSize),"vl-style-icon 'imgSize' must be set when image is provided."),new c.Icon({opacity:this.currentOpacity,scale:this.currentScale,rotateWithView:this.currentRotateWithView,rotation:this.currentRotation,displacement:this.inputDisplacement,anchor:this.currentAnchor,anchorOrigin:this.anchorOrigin,anchorXUnits:this.anchorXUnits,anchorYUnits:this.anchorYUnits,color:this.inputColor,crossOrigin:this.crossOrigin,offset:this.inputOffset,offsetOrigin:this.offsetOrigin,size:this.inputSize,src:this.src,img:this.img,imgSize:this.inputImgSize})},syncNonObservable(){Yl.methods.syncNonObservable.call(this),this.setAnchor(this.getAnchor())},getAnchor(){var t,e;const i=null===(t=this.$style)||void 0===t||null===(e=t.getAnchor())||void 0===e?void 0:e.slice();return i?this.transformAnchor(i):this.currentAnchor},transformAnchor(t){const e=this.getSize();if(e)return this.anchorXUnits===Wc&&(t[0]/=e[0]),this.anchorYUnits===Wc&&(t[1]/=e[1]),[Yc.TOP_RIGHT,Yc.BOTTOM_RIGHT].includes(this.anchorOrigin)&&(t[0]=1-t[0]),[Yc.BOTTOM_LEFT,Yc.BOTTOM_RIGHT].includes(this.anchorOrigin)&&(t[1]=1-t[1]),t[0]=st(t[0],3),t[1]=st(t[1],3),t},setAnchor(t){var e;ut(t=null===(e=t)||void 0===e?void 0:e.slice(),this.currentAnchor)||(this.currentAnchor=t,this.scheduleRefresh()),this.$style&&!ut(t,this.transformAnchor(this.$style.getAnchor()))&&(this.$style.setAnchor(t),this.scheduleRefresh())},getColor(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getColor(),this.inputColor)},getImage(t){var e;return null===(e=this.$style)||void 0===e?void 0:e.getImage(t)},getPixelRatio(t){var e;return null===(e=this.$style)||void 0===e?void 0:e.getPixelRatio(t)},getOrigin(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getOrigin()},getSize(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getSize(),this.inputSize)},getSrc(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getSrc(),this.src)},async load(){(await this.resolveStyle()).load()}}};const Xc=ec({},undefined,qc,undefined,undefined,undefined,!1,void 0,void 0,void 0);const Hc=ec({},undefined,{name:"VlStyleRegShape",mixins:[hu],methods:{createStyle(){return new c.RegularShape({rotation:this.currentRotation,rotateWithView:this.currentRotateWithView,displacement:this.inputDisplacement,points:this.points,radius:this.radius,radius1:this.radius1,radius2:this.radius2,angle:this.angle,fill:this.$fill,stroke:this.$stroke})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Jc(){Object.defineProperties(this,{$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}}})}const Kc=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",(function(){return[i("CircleStyle",{attrs:{id:"vl-"+t.currentId+"-default-circle-style"}}),t._v(" "),i("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style"}}),t._v(" "),i("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style"}})]}))],2)},staticRenderFns:[]},undefined,{name:"VlStyle",components:{CircleStyle:Bc,FillStyle:Uc,StrokeStyle:Zc},mixins:[Ka,wl,uu,fu,Xl,ul,Bl,tl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{zIndex:{type:Number,default:0},renderer:Function,condition:[Boolean,Function]},data(){return{viewProjection:Hn,dataProjection:Hn,currentZIndex:this.zIndex,currentRenderer:this.renderer}},computed:{stroke(){if(this.rev&&this.$stroke)return us(this.$stroke)},fill(){if(this.rev&&this.$fill)return ls(this.$fill)},text(){if(this.rev&&this.$text)return hs(this.$text)},image(){if(this.rev&&this.$image)return cs(this.$image)},geometryDataProj(){if(this.rev&&this.$geometry)return this.writeGeometryInDataProj(this.$geometry)},geometryViewProj(){if(this.rev&&this.$geometry)return this.writeGeometryInViewProj(this.$geometry)}},watch:{rev(){this.$style&&(this.setZIndex(this.getZIndex()),this.setRenderer(this.getRenderer()))},...Kt(["zIndex","renderer"],(t=>{const e="set"+It("input"===t.slice(0,5)?jt(t.slice(5)):t);return function(t){this[e](t)}})),...Kt(["currentZIndex","currentRenderer"],(t=>{const e="current"===t.slice(0,7)?jt(t.slice(7)):t,i="input"+It(e);return function(t){ut(t,at(this[i],this[e]))||this.$emit(`update:${e}`,nt(t)?Lt(t):t)}})),...Kt(["fill","stroke","text","image","geometryDataProj"],(t=>(t=t.replace(/(DataProj|ViewProj)$/i,""),{deep:!0,handler(e,i){ut(e,i)||this.$emit(`update:${t}`,nt(e)?Lt(e):e)}})))},created(){Jc.call(this)},updated(){},methods:{async beforeInit(){await Promise.all([Bl.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},createStyle(){return new c.Style({zIndex:this.currentZIndex,renderer:this.currentRenderer,fill:this.$fill,stroke:this.$stroke,image:this.$image,text:this.$text,geometry:this.$geometry})},async mount(){var t;return null===(t=this.$styleContainer)||void 0===t||t.addStyle(this),Bl.methods.mount.call(this)},async unmount(){var t;return null===(t=this.$styleContainer)||void 0===t||t.removeStyle(this),Bl.methods.unmount.call(this)},async refresh(){var t;await Promise.all([Bl.methods.refresh.call(this),null===(t=this.$styleContainer)||void 0===t?void 0:t.refresh()])},getServices(){return Jt(Bl.methods.getServices.call(this),wl.methods.getServices.call(this),uu.methods.getServices.call(this),fu.methods.getServices.call(this),Xl.methods.getServices.call(this),ul.methods.getServices.call(this))},syncNonObservable(){Bl.methods.syncNonObservable.call(this),this.setZIndex(this.getZIndex()),this.setRenderer(this.getRenderer())},getFillStyleTarget(){return this.$style},getStrokeStyleTarget(){return this.$style},getTextStyleTarget(){return this.$style},getImageStyleTarget(){return this.$style},getGeometryTarget(){return this.$style},getZIndex(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getZIndex(),this.currentZIndex)},setZIndex(t){t!==this.currentZIndex&&(this.currentZIndex=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getZIndex()&&(this.$style.setZIndex(t),this.scheduleRefresh())},getRenderer(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRenderer(),this.currentRenderer)},setRenderer(t){t!==this.currentRenderer&&(this.currentRenderer=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRenderer()&&(this.$style.setRenderer(t),this.scheduleRefresh())},getGeometryFunction(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getGeometryFunction()}}},undefined,false,undefined,!1,void 0,void 0,void 0);var Qc={name:"VlStyleBackgroundAdapter",mixins:[Qa,wl,uu,Ea],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},computed:{stroke(){if(this.rev&&this.$strokeStyle)return us(this.$strokeStyle)},fill(){if(this.rev&&this.$fill)return ls(this.$fill)}},watch:{...Kt(["fill","stroke"],(t=>function(e,i){ut(e,i)||this.$emit(`update:${t}`,nt(e)?Lt(e):e)}))},created(){Object.defineProperties(this,{$bgStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.bgStyleContainer}}})},methods:{createOlObject(){const t=Z();return t.id=this.currentId,t},getServices(){return Jt(Ea.methods.getServices.call(this),wl.methods.getServices.call(this),uu.methods.getServices.call(this))},getFillStyleTarget(){return{getFill:()=>{var t;return null===(t=this.$bgStyleContainer)||void 0===t?void 0:t.getBackgroundFill()},setFill:t=>{var e;return null===(e=this.$bgStyleContainer)||void 0===e?void 0:e.setBackgroundFill(t)}}},getStrokeStyleTarget(){return{getStroke:()=>{var t;return null===(t=this.$bgStyleContainer)||void 0===t?void 0:t.getBackgroundStroke()},setStroke:t=>{var e;return null===(e=this.$bgStyleContainer)||void 0===e?void 0:e.setBackgroundStroke(t)}}}}};function th(){Object.defineProperties(this,{$textStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.textStyleContainer}},$bgFill:{enumerable:!0,get:this.getBackgroundFill},$bgFillVm:{enumerable:!0,get:()=>this._bgFillVm},$bgStroke:{enumerable:!0,get:this.getBackgroundStroke},$bgStrokeVm:{enumerable:!0,get:()=>this._bgStrokeVm}})}const eh=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",(function(){return[i("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style",color:"#333"}}),t._v(" "),i("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style",color:"#eee"}})]})),t._v(" "),i("BackgroundStyle",{attrs:{id:"vl-"+t.currentId+"-background-style"}},[t._t("background")],2)],2)},staticRenderFns:[]},undefined,{name:"VlStyleText",components:{BackgroundStyle:ec({},undefined,Qc,undefined,undefined,undefined,!1,void 0,void 0,void 0),FillStyle:Uc,StrokeStyle:Zc},mixins:[wl,uu,Bl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{font:{type:String,default:"10px sans-serif"},maxAngle:Number,placement:String,offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},overflow:Boolean,rotateWithView:{type:Boolean,default:!1},rotation:{type:Number,default:0},scale:{type:Number,default:1},text:String,textAlign:String,textBaseline:String,padding:{type:Array,default:()=>[0,0,0,0],validate:t=>t.length&&4===t.length}},data(){var t;return{currentFont:this.font,currentMaxAngle:this.maxAngle,currentPlacement:this.placement,currentOffsetX:this.offsetX,currentOffsetY:this.offsetY,currentOverflow:this.overflow,currentRotateWithView:this.rotateWithView,currentRotation:this.rotation,currentScale:this.scale,currentText:this.text,currentTextAlign:this.textAlign,currentTextBaseline:this.textBaseline,currentPadding:null===(t=this.padding)||void 0===t?void 0:t.slice()}},computed:{inputPadding(){var t;return null===(t=this.padding)||void 0===t?void 0:t.slice()},stroke(){if(this.rev&&this.$stroke)return us(this.$stroke)},fill(){if(this.rev&&this.$fill)return ls(this.$fill)},backgroundFill(){if(this.rev&&this.$bgFill)return ls(this.$bgFill)},backgroundStroke(){if(this.rev&&this.$bgStroke)return us(this.$bgStroke)}},watch:{rev(){this.$style&&(this.setFont(this.getFont()),this.setMaxAngle(this.getMaxAngle()),this.setPlacement(this.getPlacement()),this.setOffsetX(this.getOffsetX()),this.setOffsetY(this.getOffsetY()),this.setOverflow(this.getOverflow()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale()),this.setText(this.getText()),this.setTextAlign(this.getTextAlign()),this.setTextBaseline(this.getTextBaseline()),this.setPadding(this.getPadding()))},...Kt(["font","maxAngle","placement","offsetX","offsetY","overflow","rotateWithView","rotation","scale","text","textAlign","textBaseline","inputPadding"],(t=>{const e="set"+It("input"===t.slice(0,5)?jt(t.slice(5)):t);return{deep:["inputPadding"].includes(t),handler(t){this[e](t)}}})),...Kt(["currentFont","currentMaxAngle","currentPlacement","currentOffsetX","currentOffsetY","currentOverflow","currentRotateWithView","currentRotation","currentScale","currentText","currentTextAlign","currentTextBaseline","currentPadding"],(t=>{const e="current"===t.slice(0,7)?jt(t.slice(7)):t,i="input"+It(e);return{deep:["currentPadding"].includes(t),handler(t){ut(t,at(this[i],this[e]))||this.$emit(`update:${e}`,nt(t)?Lt(t):t)}}})),...Kt(["fill","stroke","backgroundFill","backgroundStroke"],(t=>({deep:!0,handler(e,i){ut(e,i)||this.$emit(`update:${t}`,nt(e)?Lt(e):e)}})))},created(){this._bgFill=void 0,this._bgFillVm=void 0,this._bgStroke=void 0,this._bgStrokeVm=void 0,th.call(this)},methods:{createStyle(){return new c.Text({font:this.currentFont,maxAngle:this.currentMaxAngle,placement:this.currentPlacement,offsetX:this.currentOffsetX,offsetY:this.currentOffsetY,overflow:this.currentOverflow,rotateWithView:this.currentRotateWithView,rotation:this.currentRotation,scale:this.currentScale,text:this.currentText,textAlign:this.currentTextAlign,textBaseline:this.currentTextBaseline,padding:this.currentPadding,fill:this.$fill,stroke:this.$stroke,backgroundFill:this.$bgFill,backgroundStroke:this.$bgStroke})},async mount(){var t;return null===(t=this.$textStyleContainer)||void 0===t||t.setText(this),Bl.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$textStyleContainer)||void 0===t?void 0:t.getTextVm())===this&&await this.$textStyleContainer.setText(null),Bl.methods.unmount.call(this)},async refresh(){var t;await Promise.all([Bl.methods.refresh.call(this),null===(t=this.$textStyleContainer)||void 0===t?void 0:t.refresh()])},getServices(){const t=this;return Jt(Bl.methods.getServices.call(this),wl.methods.getServices.call(this),uu.methods.getServices.call(this),{get bgStyleContainer(){return t}})},syncNonObservable(){Bl.methods.syncNonObservable.call(this),this.setFont(this.getFont()),this.setMaxAngle(this.getMaxAngle()),this.setPlacement(this.getPlacement()),this.setOffsetX(this.getOffsetX()),this.setOffsetY(this.getOffsetY()),this.setOverflow(this.getOverflow()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale()),this.setText(this.getText()),this.setTextAlign(this.getTextAlign()),this.setTextBaseline(this.getTextBaseline()),this.setPadding(this.getPadding())},getFont(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getFont(),this.currentFont)},setFont(t){t!==this.currentFont&&(this.currentFont=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getFont()&&(this.$style.setFont(t),this.scheduleRefresh())},getMaxAngle(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getMaxAngle(),this.currentMaxAngle)},setMaxAngle(t){t!==this.currentMaxAngle&&(this.currentMaxAngle=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getMaxAngle()&&(this.$style.setMaxAngle(t),this.scheduleRefresh())},getOffsetX(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getOffsetX(),this.currentOffsetX)},setOffsetX(t){t!==this.currentOffsetX&&(this.currentOffsetX=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOffsetX()&&(this.$style.setOffsetX(t),this.scheduleRefresh())},getOffsetY(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getOffsetY(),this.currentOffsetY)},setOffsetY(t){t!==this.currentOffsetY&&(this.currentOffsetY=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOffsetY()&&(this.$style.setOffsetY(t),this.scheduleRefresh())},getOverflow(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getOverflow(),this.currentOverflow)},setOverflow(t){t!==this.currentOverflow&&(this.currentOverflow=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOverflow()&&(this.$style.setOverflow(t),this.scheduleRefresh())},getPadding(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getPadding(),this.currentPadding)},setPadding(t){var e;ut(t=null===(e=t)||void 0===e?void 0:e.slice(),this.currentPadding)||(this.currentPadding=t,this.scheduleRefresh()),this.$style&&!ut(t,this.$style.getPadding())&&(this.$style.setPadding(t),this.scheduleRefresh())},getPlacement(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getPlacement(),this.currentPlacement)},setPlacement(t){t!==this.currentPlacement&&(this.currentPlacement=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getPlacement()&&(this.$style.setPlacement(t),this.scheduleRefresh())},getRotateWithView(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRotateWithView(),this.currentRotateWithView)},setRotateWithView(t){t!==this.currentRotateWithView&&(this.currentRotateWithView=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotateWithView()&&(this.$style.setRotateWithView(t),this.scheduleRefresh())},getRotation(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getRotation(),this.currentRotation)},setRotation(t){t!==this.currentRotation&&(this.currentRotation=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotation()&&(this.$style.setRotation(t),this.scheduleRefresh())},getScale(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getScale(),this.currentScale)},setScale(t){t!==this.currentScale&&(this.currentScale=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getScale()&&(this.$style.setScale(t),this.scheduleRefresh())},getText(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getText(),this.currentText)},setText(t){t!==this.currentText&&(this.currentText=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getText()&&(this.$style.setText(t),this.scheduleRefresh())},getTextAlign(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getTextAlign(),this.currentTextAlign)},setTextAlign(t){t!==this.currentTextAlign&&(this.currentTextAlign=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getTextAlign()&&(this.$style.setTextAlign(t),this.scheduleRefresh())},getTextBaseline(){var t;return at(null===(t=this.$style)||void 0===t?void 0:t.getTextBaseline(),this.currentTextBaseline)},setTextBaseline(t){t!==this.currentTextBaseline&&(this.currentTextBaseline=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getTextBaseline()&&(this.$style.setTextBaseline(t),this.scheduleRefresh())},getFillStyleTarget(){return this.$style},getStrokeStyleTarget(){return this.$style},getBackgroundFill(){return this._bgFill},setBackgroundFill(t){var e,i;((t=(null===(e=t)||void 0===e?void 0:e.$fill)||t)||(t=void 0),t!==this._bgFill)&&(this._bgFill=t,this._bgFillVm=(null===(i=t)||void 0===i?void 0:i.vm)&&t.vm[0],this.scheduleRefresh());this.$style&&t!==this.$style.getBackgroundFill()&&(this.$style.setBackgroundFill(t),this.scheduleRefresh())},getBackgroundStroke(){return this._bgStroke},setBackgroundStroke(t){var e,i;((t=(null===(e=t)||void 0===e?void 0:e.$stroke)||t)||(t=void 0),t!==this._bgStroke)&&(this._bgStroke=t,this._bgStrokeVm=(null===(i=t)||void 0===i?void 0:i.vm)&&t.vm[0],this.scheduleRefresh());this.$style&&t!==this.$style.getBackgroundStroke()&&(this.$style.setBackgroundStroke(t),this.scheduleRefresh())}}},undefined,false,undefined,!1,void 0,void 0,void 0);function ih(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ih.installed||(ih.installed=!0,e=$t(e,"dataProjection"),Object.assign(Bc,e),Object.assign(Uc,e),Object.assign(Xc,e),Object.assign(Hc,e),Object.assign(Zc,e),Object.assign(Kc,e),Object.assign(eh,e),t.component(Bc.name,Bc),t.component(Uc.name,Uc),t.component(Xc.name,Xc),t.component(Hc.name,Hc),t.component(Zc.name,Zc),t.component(Kc.name,Kc),t.component(eh.name,eh),t.component("VlStyleBox",{name:"VlStyleBox",extends:Kc,created(){}}))}var rh=Object.freeze({__proto__:null,default:ih,install:ih,CircleStyle:Bc,FillStyle:Uc,IconStyle:Xc,RegShapeStyle:Hc,StrokeStyle:Zc,Style:Kc,TextStyle:eh}),nh={name:"VlLayerGraticuleLatStyleAdapter",mixins:[Qa,fu,Ea],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},computed:{text(){if(this.rev&&this.$text)return hs(this.$text)}},watch:{text:{deep:!0,handler(t,e){ut(t,e)&&this.$emit("update:text",t&&Lt(t))}}},created(){Object.defineProperties(this,{$latStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.latStyleContainer}}})},methods:{createOlObject(){const t=Z();return t.id=this.currentId,t},getServices(){return Jt(Ea.methods.getServices.call(this),fu.methods.getServices.call(this))},getTextStyleTarget(){return{getText:()=>{var t;return null===(t=this.$latStyleContainer)||void 0===t?void 0:t.getLatLabelStyle()},setText:t=>{var e;return null===(e=this.$latStyleContainer)||void 0===e?void 0:e.setLatLabelStyle(t)}}}}};const oh=ec({},undefined,nh,undefined,undefined,undefined,!1,void 0,void 0,void 0);var sh={name:"VlLayerGraticuleLonStyleAdapter",mixins:[Qa,fu,Ea],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},computed:{text(){if(this.rev&&this.$text)return hs(this.$text)}},watch:{text:{deep:!0,handler(t,e){ut(t,e)&&this.$emit("update:text",t&&Lt(t))}}},created(){Object.defineProperties(this,{$lonStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.lonStyleContainer}}})},methods:{createOlObject(){const t=Z();return t.id=this.currentId,t},getServices(){return Jt(Ea.methods.getServices.call(this),fu.methods.getServices.call(this))},getTextStyleTarget(){return{getText:()=>{var t;return null===(t=this.$lonStyleContainer)||void 0===t?void 0:t.getLonLabelStyle()},setText:t=>{var e;return null===(e=this.$lonStyleContainer)||void 0===e?void 0:e.setLonLabelStyle(t)}}}}};var ah={name:"VlLayerGraticuleStrokeStyleAdapter",mixins:[Qa,uu,Ea],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},computed:{stroke(){if(this.rev&&this.$stroke)return us(this.$stroke)}},watch:{stroke:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:stroke",t&&Lt(t))}}},created(){Object.defineProperties(this,{$strokeStyleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.strokeStyleContainer}}})},methods:{createOlObject(){const t=Z();return t.id=this.currentId,t},getServices(){return Jt(Ea.methods.getServices.call(this),uu.methods.getServices.call(this))},getStrokeStyleTarget(){return{setStroke:t=>this.$strokeStyleContainer.setStrokeStyle(t),getStroke:()=>this.$strokeStyleContainer.getStrokeStyle()}}}};var lh={name:"VlLayerGraticule",components:{LonStyle:ec({},undefined,sh,undefined,undefined,undefined,!1,void 0,void 0,void 0),LatStyle:oh,GStrokeStyle:ec({},undefined,ah,undefined,undefined,undefined,!1,void 0,void 0,void 0),TextStyle:eh,FillStyle:Uc,StrokeStyle:Zc},mixins:[Cu],props:{maxLines:{type:Number,default:100},targetSize:{type:Number,default:100},showLabels:{type:Boolean,default:!1},lonLabelFormatter:Function,latLabelFormatter:Function,lonLabelPosition:{type:Number,default:0},latLabelPosition:{type:Number,default:1},intervals:{type:Array,default:()=>[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001]},wrapX:{type:Boolean,default:!0}},computed:{inputIntervals(){var t;return null===(t=this.intervals)||void 0===t?void 0:t.slice()},meridians(){return this.rev?wt(this.getMeridians(),(t=>this.writeGeometryInDataProj(t))):[]},parallels(){return this.rev?wt(this.getParallels(),(t=>this.writeGeometryInDataProj(t))):[]},lonLabelStyle(){if(this.rev&&this.$lonLabelStyle)return hs(this.$lonLabelStyle)},latLabelStyle(){if(this.rev&&this.$latLabelStyle)return hs(this.$latLabelStyle)},strokeStyle(){if(this.rev&&this.$strokeStyle)return us(this.$strokeStyle)}},watch:{meridians:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:meridians",Lt(t))}},parallels:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:parallels",Lt(t))}},lonLabelStyle:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:lonLabelStyle",t&&Lt(t))}},latLabelStyle:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:latLabelStyle",t&&Lt(t))}},strokeStyle:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:strokeStyle",t&&Lt(t))}},...qa(["maxLines","targetSize","showLabels","lonLabelFormatter","latLabelFormatter","lonLabelPosition","latLabelPosition","inputIntervals","wrapX"],["inputIntervals"])},created(){this._lonLabelStyle=void 0,this._lonLabelStyleVm=void 0,this._latLabelStyle=void 0,this._latLabelStyleVm=void 0,this._strokeStyle=void 0,this._strokeStyleVm=void 0,Object.defineProperties(this,{$lonLabelStyle:{enumerable:!0,get:this.getLonLabelStyle},$lonLabelStyleVm:{enumerable:!0,get:this.getLonLabelStyleVm},$latLabelStyle:{enumerable:!0,get:this.getLatLabelStyle},$latLabelStyleVm:{enumerable:!0,get:this.getLatLabelStyleVm},$strokeStyle:{enumerable:!0,get:this.getStrokeStyle},$strokeStyleVm:{enumerable:!0,get:this.getStrokeStyleVm}})},methods:{createLayer(){return new C.default({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,maxLines:this.maxLines,strokeStyle:this.$strokeStyle,targetSize:this.targetSize,showLabels:this.showLabels,lonLabelFormatter:this.lonLabelFormatter,latLabelFormatter:this.latLabelFormatter,lonLabelPosition:this.lonLabelPosition,latLabelPosition:this.latLabelPosition,lonLabelStyle:this.$lonLabelStyle,latLabelStyle:this.$latLabelStyle,intervals:this.inputIntervals,wrapX:this.wrapX})},getServices(){const t=this;return Jt(Cu.methods.getServices.call(this),{get lonStyleContainer(){return t},get latStyleContainer(){return t},get strokeStyleContainer(){return t}})},getMeridians(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getMeridians(),[])},getParallels(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getParallels(),[])},getLonLabelStyle(){return this._lonLabelStyle},getLonLabelStyleVm(){return this._lonLabelStyleVm},setLonLabelStyle(t){var e,i,r;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),Mt(!t||t instanceof c.Text,"Invalid lon label style"),t!==this._lonLabelStyle&&(this._lonLabelStyle=t,this._lonLabelStyleVm=(null===(i=t)||void 0===i?void 0:i.vm)&&(null===(r=t)||void 0===r?void 0:r.vm[0]),this.scheduleRecreate())},getLatLabelStyle(){return this._latLabelStyle},getLatLabelStyleVm(){return this._latLabelStyleVm},setLatLabelStyle(t){var e,i,r;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),Mt(!t||t instanceof c.Text,"Invalid lat label style"),t!==this._latLabelStyle&&(this._latLabelStyle=t,this._latLabelStyleVm=(null===(i=t)||void 0===i?void 0:i.vm)&&(null===(r=t)||void 0===r?void 0:r.vm[0]),this.scheduleRecreate())},getStrokeStyle(){return this._strokeStyle},getStrokeStyleVm(){return this._strokeStyleVm},setStrokeStyle(t){var e,i,r;(t=null===(e=t)||void 0===e?void 0:e.$style)||(t=void 0),Mt(!t||t instanceof c.Stroke,"Invalid stroke style"),t!==this._strokeStyle&&(this._strokeStyle=t,this._strokeStyleVm=(null===(i=t)||void 0===i?void 0:i.vm)&&(null===(r=t)||void 0===r?void 0:r.vm[0]),this.scheduleRecreate())}}};const uh=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[i("LonStyle",{attrs:{id:"vl-"+t.currentId+"-lon-style"}},[t._t("lon",(function(){return[i("TextStyle",{attrs:{id:"vl-"+t.currentId+"-default-text-style",font:"'12px Calibri,sans-serif'","text-baseline":"bottom"}},[i("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style",color:"rgba(0,0,0,1)"}}),t._v(" "),i("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style",color:"rgba(255,255,255,1)",width:3}})],1)]}))],2),t._v(" "),i("LatStyle",{attrs:{id:"vl-"+t.currentId+"-lat-style"}},[t._t("lat",(function(){return[i("TextStyle",{attrs:{id:"vl-"+t.currentId+"-default-text-style",font:"'12px Calibri,sans-serif'","text-align":"end"}},[i("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style",color:"rgba(0,0,0,1)"}}),t._v(" "),i("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style",color:"rgba(255,255,255,1)",width:3}})],1)]}))],2),t._v(" "),i("GStrokeStyle",{attrs:{id:"vl-"+t.currentId+"-graticule-style"}},[t._t("stroke",(function(){return[i("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-graticule-stroke-style",color:"rgba(0,0,0,0.2)"}})]}))],2)],1)},staticRenderFns:[]},undefined,lh,undefined,false,undefined,!1,void 0,void 0,void 0);function ch(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ch.installed||(ch.installed=!0,e=$t(e,"dataProjection"),Object.assign(uh,e),t.component(uh.name,uh),t.component("VlGraticule",{name:"VlGraticule",extends:uh,created(){}}))}var hh=Object.freeze({__proto__:null,default:ch,install:ch,Layer:uh}),dh={name:"VlLayerGroup",mixins:[ru,el],computed:{layers(){return this.rev?wt(this.getLayers(),(t=>({id:Ns(t),type:t.constructor.name}))):[]}},watch:{layers:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:layers",t.slice())}}},methods:{createLayer(){return new S.Group({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,layers:this.$layersCollection})},getServices(){return Jt(el.methods.getServices.call(this),ru.methods.getServices.call(this))},subscribeAll(){ru.methods.subscribeAll.call(this),el.methods.subscribeAll.call(this)}}};const mh=ec({},undefined,dh,undefined,undefined,undefined,!1,void 0,void 0,void 0);function ph(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ph.installed||(ph.installed=!0,e=$t(e,"dataProjection"),Object.assign(mh,e),t.component(mh.name,mh))}var fh=Object.freeze({__proto__:null,default:ph,install:ph,Layer:mh});function gh(){const t=At("set"),e=fa(this.$layer,["blur","gradient","radius"],!0,(e=>({...e,setter:this[t(e.prop)]})));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}))}const vh=ec({},undefined,{name:"VlLayerHeatmap",mixins:[Cu],props:{gradient:{type:Array,default:()=>["#0000ff","#00ffff","#00ff00","#ffff00","#ff0000"]},radius:{type:Number,default:8},blur:{type:Number,default:15},weight:{type:[String,Function],default:"weight"}},data(){return{currentGradient:this.gradient.slice(),currentRadius:this.radius,currentBlur:this.blur}},computed:{inputGradient(){return this.gradient.slice()}},watch:{rev(){this.$layer&&(ut(this.currentGradient,this.$layer.getGradient())||(this.currentGradient=this.$layer.getGradient()),this.currentRadius!==this.$layer.getRadius()&&(this.currentRadius=this.$layer.getRadius()),this.currentBlur!==this.$layer.getBlur()&&(this.currentBlur=this.$layer.getBlur()))},inputGradient(t){this.setGradient(t)},currentGradient:{deep:!0,handler(t){ut(t,this.inputGradient)||this.$emit("update:gradient",t.slice())}},radius(t){this.setRadius(t)},currentRadius(t){t!==this.radius&&this.$emit("update:radius",t)},blur(t){this.setBlur(t)},currentBlur(t){t!==this.blur&&this.$emit("update:blur",t)},...qa(["weight"])},methods:{createLayer(){return new S.Heatmap({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,blur:this.currentBlur,gradient:this.currentGradient,radius:this.currentRadius,weight:this.weight})},subscribeAll(){Cu.methods.subscribeAll.call(this),gh.call(this)},getBlur(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getBlur(),this.currentBlur)},setBlur(t){Mt(J(t=Number(t)),"Invalid blur"),t!==this.currentBlur&&(this.currentBlur=t),this.$layer&&t!==this.$layer.getBlur()&&this.$layer.setBlur(t)},getGradient(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getGradient(),this.currentGradient)},setGradient(t){Mt(Q(t),"Invalid gradient"),ut(t=t.slice(),this.currentGradient)||(this.currentGradient=t),this.$layer&&!ut(t,this.$layer.getGradient())&&this.$layer.setGradient(t)},getRadius(){var t;return at(null===(t=this.$layer)||void 0===t?void 0:t.getRadius(),this.currentRadius)},setRadius(t){Mt(J(t=Number(t)),"Invalid radius"),t!==this.currentRadius&&(this.currentRadius=t),this.$layer&&t!==this.$layer.getRadius()&&this.$layer.setRadius(t)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function yh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yh.installed||(yh.installed=!0,e=$t(e,"dataProjection"),Object.assign(vh,e),t.component(vh.name,vh))}var bh=Object.freeze({__proto__:null,default:yh,install:yh,Layer:vh});const wh=X(K,Y(ht));var Sh={name:"VlSourceImageArcgisRest",mixins:[Ja,zl],props:{crossOrigin:String,imageLoadFunction:Function,imageLoadFunc:Function,imageSmoothing:{type:Boolean,default:!0},ratio:{type:Number,default:1.5},url:{type:String,required:!0,validator:wh}},data(){return{currentImageLoadFunction:this.imageLoadFunction,currentUrl:this.url}},computed:{inputImageLoadFunction(){return this.imageLoadFunction||this.imageLoadFunc}},watch:{rev(){this.$source&&(this.currentImageLoadFunction!==this.$source.getImageLoadFunction()&&(this.currentImageLoadFunction=this.$source.getImageLoadFunction()),this.currentUrl!==this.$source.getUrl()&&(this.currentUrl=this.$source.getUrl()))},url(t){this.setUrl(t)},currentUrl(t){t!==this.url&&this.$emit("update:url",t)},inputImageLoadFunction(t){this.setImageLoadFunction(t)},currentImageLoadFunction(t){t!==this.imageLoadFunction&&this.$emit("update:imageLoadFunction",t)},...qa(["crossOrigin","imageSmoothing","ratio"])},created(){this.currentImageLoadFunction=this.inputImageLoadFunction},updated(){},methods:{createSource(){return new e.ImageArcGISRest({attributions:this.currentAttributions,projection:this.resolvedDataProjection,resolutions:this.inputResolutions,crossOrigin:this.crossOrigin,hidpi:this.hidpi,imageLoadFunction:this.currentImageLoadFunction,imageSmoothing:this.imageSmoothing,params:this.currentParams,ratio:this.ratio,url:this.currentUrl})},getUrl(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.currentUrl)},setUrl(t){Mt(wh(t),"Invalid url"),t!==this.currentUrl&&(this.currentUrl=t),this.$source&&t!==this.$source.getUrl()&&this.$source.setUrl(t)},getImageLoadFunction(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getImageLoadFunction(),this.currentImageLoadFunction)},setImageLoadFunction(t){Mt(it(t),"Invalid image load function"),t!==this.currentImageLoadFunction&&(this.currentImageLoadFunction=t),this.$source&&t!==this.$source.getImageLoadFunction()&&this.$source.setImageLoadFunction(t)},stateChanged:G}};const $h=ec({},undefined,Sh,undefined,undefined,undefined,!1,void 0,void 0,void 0);function Ph(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ph.installed||(Ph.installed=!0,e=$t(e,"dataProjection"),Object.assign($h,e),t.component($h.name,$h))}var Ih=Object.freeze({__proto__:null,default:Ph,install:Ph,Source:$h});const jh=ec({},undefined,{name:"VlLayerImage",mixins:[Vl],methods:{createLayer(){return new S.Image({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Oh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oh.installed||(Oh.installed=!0,e=$t(e,"dataProjection"),Object.assign(jh,e),t.component(jh.name,jh))}var xh=Object.freeze({__proto__:null,default:Oh,install:Oh,Layer:jh});const Ch=ec({},undefined,{name:"VlSourceImageStatic",mixins:[zl],props:{crossOrigin:String,imageExtent:{type:Array,validator:t=>4===t.length},imgExtent:{type:Array,validator:t=>4===t.length},extent:{type:Array,validator:t=>4===t.length},imageLoadFunction:Function,imgLoadFunc:Function,loadFunc:Function,imageSize:{type:Array,validator:t=>2===t.length},imgSize:{type:Array,validator:t=>2===t.length},size:{type:Array,validator:t=>2===t.length},imageSmoothing:{type:Boolean,default:!0},url:{type:String,required:!0,validator:Y(ht)}},computed:{inputImageExtent(){var t;return null===(t=at(this.imageExtent,this.imgExtent,this.extent))||void 0===t?void 0:t.slice()},inputImageLoadFunction(){return at(this.imageLoadFunction,this.imgLoadFunc,this.loadFunc)},inputImageSize(){var t;return null===(t=at(this.imageSize,this.imgSize,this.size))||void 0===t?void 0:t.slice()}},watch:{...qa(["crossOrigin","inputImageExtent","inputImageLoadFunction","inputImageSize","imageSmoothing","url"],["inputImageExtent","inputImageSize"])},created(){},updated(){},methods:{createSource(){return new e.ImageStatic({attributions:this.currentAttributions,projection:this.resolvedDataProjection,crossOrigin:this.crossOrigin,imageExtent:this.inputImageExtent,imageLoadFunction:this.inputImageLoadFunction,imageSize:this.inputImageSize,imageSmoothing:this.imageSmoothing,url:this.url})},getUrl(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.url)},getImageExtent(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getImageExtent(),this.inputImageExtent)},stateChanged:G}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Th(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Th.installed||(Th.installed=!0,e=$t(e,"dataProjection"),Object.assign(Ch,e),t.component(Ch.name,Ch))}var _h=Object.freeze({__proto__:null,default:Th,install:Th,Source:Ch});const Rh=X(K,Y(ht));var Fh={name:"VlSourceImageWms",mixins:[Lu,zl],props:{crossOrigin:String,imageLoadFunction:Function,imageLoadFunc:Function,imageSmoothing:{type:Boolean,default:!0},ratio:{type:Number,default:1.5},url:{type:String,required:!0,validator:Rh}},data(){return{currentImageLoadFunction:this.imageLoadFunction,currentUrl:this.url}},computed:{inputImageLoadFunction(){return this.imageLoadFunction||this.imageLoadFunc}},watch:{rev(){this.$source&&(this.currentUrl!==this.$source.getUrl()&&(this.currentUrl=this.$source.getUrl()),this.currentImageLoadFunction!==this.$source.getImageLoadFunction()&&(this.currentImageLoadFunction=this.$source.getImageLoadFunction()))},url(t){this.setUrl(t)},currentUrl(t){t!==this.url&&this.$emit("update:url",t)},inputImageLoadFunction(t){this.setImageLoadFunction(t)},currentImageLoadFunc(t){t!==this.imageLoadFunction&&this.$emit("update:imageLoadFunction",t)},...qa(["crossOrigin","imageSmoothing","ratio"])},created(){this.currentImageLoadFunction=this.inputImageLoadFunction},updated(){},methods:{createSource(){return new e.ImageWMS({attributions:this.currentAttributions,projection:this.resolvedDataProjection,resolutions:this.inputResolutions,crossOrigin:this.crossOrigin,hidpi:this.hidpi,serverType:this.serverType,imageLoadFunction:this.currentImageLoadFunction,imageSmoothing:this.imageSmoothing,params:this.currentParams,ratio:this.ratio,url:this.currentUrl})},getUrl(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.currentUrl)},setUrl(t){Mt(Rh(t),"Invalid url"),t!==this.currentUrl&&(this.currentUrl=t),this.$source&&t!==this.$source.getUrl()&&this.$source.setUrls(t)},getImageLoadFunction(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getImageLoadFunction(),this.currentImageLoadFunction)},setImageLoadFunction(t){Mt(it(t),"Invalid image load function"),t!==this.currentImageLoadFunction&&(this.currentImageLoadFunction=t),this.$source&&t!==this.$source.getImageLoadFunction()&&this.$source.setImageLoadFunction(t)},stateChanged:G}};const Eh=ec({},undefined,Fh,undefined,undefined,undefined,!1,void 0,void 0,void 0);function Vh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vh.installed||(Vh.installed=!0,e=$t(e,"dataProjection"),Object.assign(Eh,e),t.component(Eh.name,Eh))}var Lh=Object.freeze({__proto__:null,default:Vh,install:Vh,Source:Eh}),Ah={SINGLECLICK:"singleclick",CLICK:ha,DBLCLICK:da,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Nh="postrender",Mh="movestart",kh="moveend";const Dh=ec({},undefined,{name:"VlLayerVector",mixins:[Cu],props:{renderMode:String},created(){},updated(){},methods:{createLayer(){return new S.Vector({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Gh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gh.installed||(Gh.installed=!0,e=$t(e,"dataProjection"),Object.assign(Dh,e),t.component(Dh.name,Dh))}var Uh=Object.freeze({__proto__:null,default:Gh,install:Gh,Layer:Dh});const zh=ec({},undefined,{name:"VlSourceVector",mixins:[Ru]},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Zh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zh.installed||(Zh.installed=!0,e=$t(e,"dataProjection"),Object.assign(zh,e),t.component(zh.name,zh))}var Bh=Object.freeze({__proto__:null,default:Zh,install:Zh,Source:zh}),Wh={name:"VlView",mixins:[Ka,Ea,tl],stubVNode:{empty(){return this.vmId}},props:{center:{type:Array,default:()=>[0,0],validator:t=>2===t.length&&t.every(J)},constrainOnlyCenter:Boolean,extent:{type:Array,validator:t=>4===t.length&&t.every(J)},smoothExtentConstraint:{type:Boolean,default:!0},rotation:{type:Number,default:0},enableRotation:{type:Boolean,default:!0},constrainRotation:{type:[Boolean,Number],default:!0},resolution:Number,resolutions:{type:Array,validator:t=>t.every(J)},maxResolution:Number,minResolution:Number,constrainResolution:Boolean,smoothResolutionConstraint:{type:Boolean,default:!0},zoom:{type:Number,default:0},zoomFactor:{type:Number,default:2},maxZoom:{type:Number,default:28},minZoom:{type:Number,default:0},multiWorld:Boolean,projection:{type:String,default:Hn,validator:t=>null!=u.get(t)},showFullExtent:Boolean},data(){var t;return{dataProjection:this.projection,currentProjection:this.projection,currentCenterViewProj:Qr(this.center),currentZoom:this.zoom,currentRotation:this.rotation,currentResolution:this.resolution,currentMinZoom:this.minZoom,currentMaxZoom:this.maxZoom,currentResolutions:null===(t=this.resolutions)||void 0===t?void 0:t.slice(),currentMaxResolution:this.maxResolution,currentMinResolution:this.minResolution}},computed:{centerDataProj(){return Qr(this.center)},centerViewProj(){return this.pointToViewProj(this.center)},currentCenterDataProj(){return this.pointToDataProj(this.currentCenterViewProj)},extentDataProj(){return Kr(this.extent)},extentViewProj(){return this.extentToViewProj(this.extent)},inputResolutions(){var t;return null===(t=this.resolutions)||void 0===t?void 0:t.slice()},visibleExtentDataProj(){var t;if(this.rev)return null===(t=this.getExtent())||void 0===t?void 0:t.slice()},visibleExtentViewProj(){var t;if(this.rev)return null===(t=this.getExtent(!0))||void 0===t?void 0:t.slice()},animating(){return!(!this.rev||!this.getAnimating())},interacting(){return!(!this.rev||!this.getInteracting())},resolvedViewProjection(){return this.currentProjection}},watch:{rev(){this.$view&&(this.currentProjection!==this.$view.getProjection().getCode()&&(this.currentProjection=this.$view.getProjection().getCode()),ut(this.currentCenterViewProj,Qr(this.$view.getCenter()))||(this.currentCenterViewProj=Qr(this.$view.getCenter())),this.currentZoom!==this.$view.getZoom()&&(this.currentZoom=this.$view.getZoom()),this.currentRotation!==this.$view.getRotation()&&(this.currentRotation=this.$view.getRotation()),this.currentResolution!==this.$view.getResolution()&&(this.currentResolution=this.$view.getResolution()),this.currentMinZoom!==this.$view.getMinZoom()&&(this.currentMinZoom=this.$view.getMinZoom()),this.currentMaxZoom!==this.$view.getMaxZoom()&&(this.currentMaxZoom=this.$view.getMaxZoom()),ut(this.currentResolutions,this.$view.getResolutions())||(this.currentResolutions=this.$view.getResolutions()),this.currentMaxResolution!==this.$view.getMaxResolution()&&(this.currentMaxResolution=this.$view.getMaxResolution()),this.currentMinResolution!==this.$view.getMinResolution()&&(this.currentMinResolution=this.$view.getMinResolution()))},centerViewProj:{deep:!0,handler(t){this.getAnimating()||this.setCenter(t,!0)}},currentCenterDataProj:{deep:!0,handler(t){ut(t,this.centerDataProj)||this.$emit("update:center",t.slice())}},rotation(t){this.getAnimating()||this.setRotation(t)},currentRotation(t){t!==this.rotation&&this.$emit("update:rotation",t)},resolution(t){this.getAnimating()||this.setResolution(t)},currentResolution(t){t!==this.resolution&&this.$emit("update:resolution",t)},constrainResolution(t){this.setConstrainResolution(t)},zoom(t){this.getAnimating()||this.setZoom(t)},currentZoom(t){t!==this.zoom&&this.$emit("update:zoom",t)},minZoom(t){this.setMinZoom(t)},currentMinZoom(t){t!==this.minZoom&&this.$emit("update:minZoom",t)},maxZoom(t){this.setMaxZoom(t)},currentMaxZoom(t){t!==this.maxZoom&&this.$emit("update:maxZoom",t)},inputResolutions:{deep:!0,handler(t){if(!ut(t,this.currentResolutions))return this.currentResolutions=null==t?void 0:t.slice(),this.scheduleRecreate()}},currentResolutions:{deep:!0,handler(t){ut(t,this.inputResolutions)||this.$emit("update:resolutions",null==t?void 0:t.slice())}},maxResolution(t){if(t!==this.currentMaxResolution)return this.currentMaxResolution=t,this.scheduleRecreate()},currentMaxResolution(t){t!==this.maxResolution&&this.$emit("update:maxResolution",t)},minResolution(t){if(t!==this.currentMinResolution)return this.currentMinResolution=t,this.scheduleRecreate()},currentMinResolution(t){t!==this.minResolution&&this.$emit("update:minResolution",t)},projection(t){var e;if(t!==this.currentProjection)return this.currentProjection=this.dataProjection=t,this.currentResolution=this.resolution,this.currentResolutions=null===(e=this.inputResolutions)||void 0===e?void 0:e.slice(),this.currentMaxResolution=this.maxResolution,this.currentMinResolution=this.minResolution,this.scheduleRecreate()},currentProjection(t){t!==this.projection&&this.$emit("update:projection",t)},animating(t,e){t!==e&&this.$emit("update:animating",t)},interacting(t,e){t!==e&&this.$emit("update:interacting",t)},visibleExtentDataProj:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:visibleExtent",null==t?void 0:t.slice())}},...qa(["constrainOnlyCenter","smoothExtentConstraint","enableRotation","constrainRotation","constrainResolution","smoothResolutionConstraint","zoomFactor","multiWorld","extentViewProj"],["extentViewProj"])},created(){Yh.call(this),this.currentCenterViewProj=this.centerViewProj.slice()},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},createOlObject(){const e=new t.View({center:this.currentCenterViewProj,constrainOnlyCenter:this.constrainOnlyCenter,extent:this.extentViewProj,smoothExtentConstraint:this.smoothExtentConstraint,rotation:this.currentRotation,enableRotation:this.enableRotation,constrainRotation:this.constrainRotation,resolution:this.currentResolution,resolutions:this.currentResolutions,maxResolution:this.currentMaxResolution,minResolution:this.currentMinResolution,constrainResolution:this.constrainResolution,smoothResolutionConstraint:this.smoothResolutionConstraint,zoom:this.currentZoom,zoomFactor:this.zoomFactor,maxZoom:this.currentMaxZoom,minZoom:this.currentMinZoom,multiWorld:this.multiWorld,projection:this.currentProjection,showFullExtent:this.showFullExtent});return ra(e,this.currentId),e},async mount(){var t;return null===(t=this.$viewContainer)||void 0===t||t.setView(this),Ea.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$viewContainer)||void 0===t?void 0:t.getViewVm())===this&&this.$viewContainer.setView(null),Ea.methods.unmount.call(this)},subscribeAll(){Ea.methods.subscribeAll.call(this),qh.call(this)},getIdInternal(){return ea(this.$view)},setIdInternal(t){t!==this.getIdInternal()&&ia(this.$view,t)},resolveView:Ea.methods.resolveOlObject,async animate(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];let r=G;it(e[e.length-1])&&(r=e[e.length-1],e=e.slice(0,e.length-1)),e.forEach((t=>{Q(t.center)&&(t.viewProj||(t.center=this.pointToViewProj(t.center)))}));const n=await this.resolveView();return new Promise((t=>{n.animate(...e,(e=>{r(e),t(e)}))}))},async fit(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};js(t)?t=e.viewProj?this.readGeometryInViewProj(t):this.readGeometryInDataProj(t):it(t.resolveOlObject)&&(t=await t.resolveOlObject());const i=e.callback||G,r=await this.resolveView();return new Promise((n=>{r.fit(t,{...e,callback:t=>{i(t),n(t)}})}))},async cancelAnimations(){(await this.resolveView()).cancelAnimations()},getAnimating(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getAnimating(),!1)},async beginInteraction(){(await this.resolveView()).beginInteraction()},async endInteraction(t,e,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3]||(i=this.pointToViewProj(i)),(await this.resolveView()).endInteraction(t,e,i)},getInteracting(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getInteracting(),!1)},async calculateExtent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=(await this.resolveView()).calculateExtent(t);return e?Kr(i):this.extentToDataProj(i)},getExtent(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$view)return;const e=this.$view.calculateExtent();return t?Kr(e):this.extentToDataProj(e)},async centerOn(t,e,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3]||(t=this.pointToViewProj(t)),(await this.resolveView()).centerOn(t,e,i)},getCenter(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$view)return t?this.currentCenterViewProj:this.currentCenterDataProj;const e=this.$view.getCenter();return t?e:this.pointToDataProj(e)},setCenter(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(Q(t)&&2===t.length,"Invalid center"),t=e?Qr(t):this.pointToViewProj(t),this.$view&&!ut(t,Qr(this.$view.getCenter()))?this.$view.setCenter(t):ut(t,this.currentCenterViewProj)||(this.currentCenterViewProj=t)},getResolution(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getResolution(),this.currentResolution)},setResolution(t){Mt(J(t=Number(t)),"Invalid resolution"),this.$view&&t!==this.$view.getResolution()?this.$view.setResolution(t):t!==this.currentResolution&&(this.currentResolution=t)},async getResolutionForExtent(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(t=this.extentToViewProj(t)),(await this.resolveView()).getResolutionForExtent(t,e)},async getResolutionForZoom(t){return(await this.resolveView()).getResolutionForZoom(t)},getResolutions(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getResolutions(),this.currentResolutions)},getMaxResolution(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getMaxResolution(),this.currentMaxResolution)},getMinResolution(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getMinResolution(),this.currentMinResolution)},getZoom(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getZoom(),this.currentZoom)},setZoom(t){Mt(J(t=Number(t)),"Invalid zoom"),this.$view&&t!==this.$view.getZoom()?this.$view.setZoom(t):t!==this.currentZoom&&(this.currentZoom=t)},async getZoomForResolution(t){return(await this.resolveView()).getZoomForResolution(t)},getMaxZoom(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getMaxZoom(),this.currentMaxZoom)},setMaxZoom(t){Mt(J(t=Number(t)),"Invalid maxZoom"),this.$view&&t!==this.$view.getMaxZoom()?this.$view.setMaxZoom(t):t!==this.currentMaxZoom&&(this.currentMaxZoom=t)},getMinZoom(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getMinZoom(),this.currentMinZoom)},setMinZoom(t){Mt(J(t=Number(t)),"Invalid minZoom"),this.$view&&t!==this.$view.getMinZoom()?this.$view.setMinZoom(t):t!==this.currentMinZoom&&(this.currentMinZoom=t)},getProjection(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getProjection(),u.get(this.currentProjection))},getRotation(){var t;return at(null===(t=this.$view)||void 0===t?void 0:t.getRotation(),this.currentRotation)},setRotation(t){Mt(J(t=Number(t)),"Invalid rotation"),this.$view&&t!==this.$view.getRotation()?this.$view.setRotation(t):t!==this.currentRotation&&(this.currentRotation=t)}}};function Yh(){Object.defineProperties(this,{$view:{enumerable:!0,get:()=>this.$olObject},$viewContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewContainer}},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}}})}async function qh(){const t=At("set"),e=Ci(fa(this.$view,["id"],!0)).pipe(oi((e=>({...e,setter:i=>{const r=[i];"center"===e.prop&&r.push(!0),this[t(e.prop)](...r)}}))));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}))}const Xh=ec({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",null,{center:t.currentCenterDataProj,zoom:t.currentZoom,resolution:t.currentResolution,rotation:t.currentRotation,extent:t.visibleExtentDataProj})],2)},staticRenderFns:[]},undefined,Wh,undefined,false,undefined,!1,void 0,void 0,void 0);var Hh={name:"VlMap",components:{ViewCmp:Xh,VectorLayerCmp:Dh,VectorSourceCmp:zh},mixins:[Ka,ru,sl,tu,su,vl,Ea],props:{defaultControls:{type:[Object,Boolean],default:!0},defaultInteractions:{type:[Object,Boolean],default:!0},keyboardEventTarget:[String,Element,Document],moveTolerance:{type:Number,default:1},pixelRatio:{type:Number,default:()=>window.devicePixelRatio||1},maxTilesLoading:{type:Number,default:16},tabindex:[String,Number],dataProjection:{type:String,validator:t=>null!=u.get(t)},wrapX:{type:Boolean,default:!0},updateWhileAnimating:{type:Boolean,default:!1},updateWhileInteracting:{type:Boolean,default:!1}},data(){return{viewProjection:Hn,withCustomView:!1,size:void 0,currentDataProjection:this.dataProjection}},computed:{resolvedDataProjection(){var t;return at(this.currentDataProjection,this.dataProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.viewProjection)},view(){if(this.rev&&this.$view)return{id:ea(this.$view),type:this.$view.constructor.name}},layers(){return this.rev?wt(this.getLayers(),(t=>({id:Ns(t),type:t.constructor.name}))):[]},controls(){return this.rev?wt(this.getControls(),(t=>({id:Zr(t),type:t.constructor.name}))):[]},interactions(){return this.rev?wt(this.getInteractions(),(t=>({id:Fs(t),type:t.constructor.name}))):[]},overlays(){return this.rev?wt(this.getOverlays(),(t=>({id:Zs(t),type:t.constructor.name}))):[]},featuresDataProj(){return this.rev?wt(this.getFeatures(),(t=>this.writeFeatureInDataProj(t))):[]},featuresViewProj(){return this.rev?wt(this.getFeatures(),(t=>this.writeFeatureInViewProj(t))):[]}},watch:{rev(){this.$map&&(ut(this.size,this.$map.getSize())||(this.size=this.$map.getSize()))},size:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:size",null==t?void 0:t.slice())}},defaultControls:{deep:!0,handler(t){this.initDefaultControls(t)}},defaultInteractions:{deep:!0,handler(t){this.initDefaultInteractions(t)}},dataProjection(t){this.setDataProjection(t)},view:{deep:!0,handler(t,e){t!==e&&this.$emit("update:view",t)}},layers:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:layers",t.slice())}},controls:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:controls",t.slice())}},interactions:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:interactions",t.slice())}},overlays:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:overlays",t.slice())}},featuresDataProj:{deep:!0,handler(t,e){ut(t,e)||this.$emit("update:features",Lt(t))}},...qa(["keyboardEventTarget","moveTolerance","pixelRatio","maxTilesLoading"])},created(){this._view=new t.View({center:[0,0],zoom:2}),this._viewVm=void 0,Jh.call(this),this.initDefaultControls(this.defaultControls),this.initDefaultInteractions(this.defaultInteractions)},methods:{async createOlObject(){const e=new t.Map({pixelRatio:this.pixelRatio,moveTolerance:this.moveTolerance,keyboardEventTarget:this.keyboardEventTarget,maxTilesLoading:this.maxTilesLoading,controls:this.$controlsCollection,interactions:this.$interactionsCollection,layers:this.$layersCollection,overlays:this.$overlaysCollection,view:this.$view});return Gs(e,this.currentId),zs(e,this.resolvedDataProjection),this.size&&e.setSize(this.size),e},async mount(){return this.setTarget(this.$el),Ea.methods.mount.call(this)},async unmount(){return this.setTarget(null),Ea.methods.unmount.call(this)},subscribeAll(){Ea.methods.subscribeAll.call(this),ru.methods.subscribeAll.call(this),sl.methods.subscribeAll.call(this),tu.methods.subscribeAll.call(this),su.methods.subscribeAll.call(this),vl.methods.subscribeAll.call(this),Kh.call(this),this.subscribeTo(va(this,(()=>{var t;return null===(t=this.$viewVm)||void 0===t?void 0:t.resolvedViewProjection})),(t=>{let{value:e}=t;this.viewProjection=e||Hn}))},getServices(){const t=this;return Jt(Ea.methods.getServices.call(this),ru.methods.getServices.call(this),sl.methods.getServices.call(this),tu.methods.getServices.call(this),su.methods.getServices.call(this),vl.methods.getServices.call(this),{get mapVm(){return t},get viewVm(){return t.$viewVm},get viewContainer(){return t}})},getIdInternal(){return Ds(this.$map)},setIdInternal(t){t!==this.getIdInternal()&&Gs(this.$map,t)},resolveMap:Ea.methods.resolveOlObject,async forEachFeatureAtPixel(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await this.resolveMap()).forEachFeatureAtPixel(t,e,i)},async forEachLayerAtPixel(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await this.resolveMap()).forEachLayerAtPixel(t,e,i)},async getCoordinateFromPixel(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=(await this.resolveMap()).getCoordinateFromPixel(t);return e?Qr(i):this.pointToDataProj(i)},async getEventCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=(await this.resolveMap()).getEventCoordinate(t);return e?Qr(i):this.pointToDataProj(i)},async getEventPixel(t){return(await this.resolveMap()).getEventPixel(t)},async getFeaturesAtPixel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await this.resolveMap()).getFeaturesAtPixel(t,e)},async hasFeatureAtPixel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await this.resolveMap()).hasFeatureAtPixel(t,e)},async getPixelFromCoordinate(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(t=this.pointToViewProj(t)),(await this.resolveMap()).getPixelFromCoordinate(t)},getSize(){var t;return at(null===(t=this.$map)||void 0===t?void 0:t.getSize(),this.size)},setSize(t){Mt(Q(t)&&2===t.length,"Invalid size"),ut(t=t.slice(),this.size)||(this.size=t),this.$map&&!ut(t,this.$map.getSize())&&this.$map.setSize(t)},async updateSize(){(await this.resolveMap()).updateSize()},async render(){const t=await this.resolveMap();return new Promise((e=>{t.once("postrender",(()=>e())),t.render()}))},getTarget(){var t;return at(null===(t=this.$map)||void 0===t?void 0:t.getTarget(),this.$el)},setTarget(t){this.$map&&t!==this.$map.getTarget()&&(this.$map.setTarget(t),this.$emit("update:target",t))},getViewport(){var t;return null===(t=this.$map)||void 0===t?void 0:t.getViewport()},getView(){var t;return at(null===(t=this.$map)||void 0===t?void 0:t.getView(),this._view)},getViewVm(){return this._viewVm},setView(e){var i,r,n;(Mt(!(e=(null===(i=e)||void 0===i?void 0:i.$view)||e)||e instanceof t.View,"Invalid view"),e!==this._view)&&(this._view=e,this._viewVm=(null===(r=e)||void 0===r?void 0:r.vm)&&(null===(n=e)||void 0===n?void 0:n.vm[0]));this.$map&&e!==this.$map.getView()&&this.$map.setView(e),this.scheduleRefresh()},getDataProjection(){return at(this.$map&&Us(this.$map),this.resolvedDataProjection)},setDataProjection(t){Mt(null!=(t=u.get(t)),"Invalid projection"),t.getCode()!==this.currentDataProjection&&(this.currentDataProjection=t.getCode()),this.$map&&t.getCode()!==Us(this.$map)&&zs(this.$map,t.getCode())},focus(){this.$el.focus()},async refresh(){return await this.updateSize(),await this.render(),Ea.methods.refresh.call(this)},isInteracting(){return!!this.$map&&this.getInteractions().some((t=>!!t.get("interacting")))},featuresOverlaySourceCreated(t){t.addFeatures(this.getFeatures());const e=ga(this,"addfeature").pipe(oi((t=>{let{feature:e}=t;return e})),ya(Ta));this.subscribeTo(e,(e=>t.addFeatures(e)));const i=ga(this,"removefeature").pipe(oi((t=>{let{feature:e}=t;return e})),ya(Ta));this.subscribeTo(i,(e=>t.removeFeatures(e)))},resolvedDataProjectionChanged(t){t!==this.dataProjection&&this.$emit("update:dataProjection",t)}}};function Jh(){Object.defineProperties(this,{$map:{enumerable:!0,get:()=>this.$olObject},$view:{enumerable:!0,get:this.getView},$viewVm:{enumerable:!0,get:this.getViewVm},$featuresOverlayVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$refs)||void 0===t?void 0:t.featuresOverlay}},$featuresOverlaySourceVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$refs)||void 0===t?void 0:t.featuresOverlaySource}}})}async function Kh(){const t=At("set"),e=Ci(fa(this.$map,"view",!0).pipe(Or((t=>{let{value:e}=t;this._viewSubs&&this.unsubscribe(this._viewSubs),e&&(this._viewSubs=this.subscribeTo(fa(e,"id",!0),this.scheduleRefresh.bind(this))),this.viewProjection=(null==e?void 0:e.getProjection().getCode())||Hn,this.withCustomView=e&&(!e.vm||e.vm.some((t=>t!==this.$refs.view)))}))),fa(this.$map,["dataProjection","size","target"],!0)).pipe(oi((e=>({...e,setter:this[t(e.prop)]}))));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}));const i=Ci(pa(this.$map,[Ah.CLICK,Ah.DBLCLICK,Ah.SINGLECLICK]),pa(this.$map,[Ah.POINTERDRAG,Ah.POINTERMOVE],null,[Qi(((t,e)=>ut({t:t.type,c:t.coordinate},{t:e.type,c:e.coordinate})))])).pipe(oi((t=>Pt({...t,pixel:t.pixel,coordinate:this.pointToDataProj(t.coordinate)},["pixel_","coordinate_"])))),r=pa(this.$map,[Mh,kh,Nh,xl,Cl,Tl]);this.subscribeTo(Ci(i,r),(t=>this.$emit(t.type,t)))}const Qh=ec({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.vmClass,attrs:{id:t.vmId,tabindex:t.tabindex}},[t._t("default"),t._v(" "),t.withCustomView?t._e():i("ViewCmp",{ref:"view",attrs:{id:"vl-"+t.currentId+"-default-view"}}),t._v(" "),i("VectorLayerCmp",{ref:"featuresOverlay",attrs:{id:"vl-"+t.currentId+"-default-layer",overlay:!0,"update-while-animating":t.updateWhileAnimating,"update-while-interacting":t.updateWhileInteracting},on:{prerender:function(e){return t.$emit("dl:prerender",e)},postrender:function(e){return t.$emit("dl:postrender",e)}}},[i("VectorSourceCmp",{ref:"featuresOverlaySource",attrs:{id:"vl-"+t.currentId+"-default-source","wrap-x":t.wrapX,projection:t.currentDataProjection},on:{created:t.featuresOverlaySourceCreated}},[t._t("overlay")],2)],1)],2)},staticRenderFns:[]},undefined,Hh,undefined,false,undefined,!1,void 0,void 0,void 0);function td(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};td.installed||(td.installed=!0,e=$t(e,"dataProjection"),Object.assign(Qh,e),Object.assign(Xh,e),t.component(Qh.name,Qh),t.component(Xh.name,Xh))}var ed=Object.freeze({__proto__:null,default:td,install:td,Map:Qh,View:Xh});const id=ec({},undefined,{name:"VlSourceMapbox",mixins:[Qu],props:{attributions:{...Al.props.attributions,default:'&copy; <a href="https://www.mapbox.com/" target="_blank">MapBox</a>.'},url:{...Pu.props.url,default:"https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}"},accessToken:{type:String,required:!0},mapId:{type:String,required:!0},tileFormat:{type:String,default:"png"}},computed:{tileNameSuffix(){return(t=function(t){return(t=at(t,1))>1?2:1}(t=this.tilePixelRatio))>1?["@",t,"x"].join(""):"";var t},urlTokens:()=>["mapId","accessToken","tileNameSuffix","tileFormat"]}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function rd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rd.installed||(rd.installed=!0,e=$t(e,"dataProjection"),Object.assign(id,e),t.component(id.name,id))}var nd=Object.freeze({__proto__:null,default:rd,install:rd,Source:id}),od={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};const sd=ec({},undefined,{name:"VlLayerVectorTile",mixins:[Ou,Cu],props:{renderMode:{type:String,default:od.HYBRID,validator:t=>Object.values(od).includes(t)}},watch:{...qa(["renderMode"])},methods:{createLayer(){return new S.VectorTile({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,preload:this.currentPreload,useInterimTilesOnError:this.currentUseInterimTilesOnError,renderMode:this.renderMode})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function ad(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ad.installed||(ad.installed=!0,e=$t(e,"dataProjection"),Object.assign(sd,e),t.component(sd.name,sd))}var ld=Object.freeze({__proto__:null,default:ad,install:ad,Layer:sd});const ud=ec({},undefined,{name:"VlLayerMapboxVector",extends:sd,props:{styleUrl:{type:String,required:!0},accessToken:{type:String,required:!0},sourceId:String,layerIds:{type:Array,validate:t=>Q(t)&&t.every(K)},declutter:{...Cu.props.declutter,default:!0}},watch:{...qa(["styleUrl","accessToken","sourceId","layerIds"],["layerIds"])},methods:{createLayer(){return new S.MapboxVector({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,preload:this.currentPreload,useInterimTilesOnError:this.currentUseInterimTilesOnError,styleUrl:this.styleUrl,accessToken:this.accessToken,source:this.sourceId,layers:this.layerIds})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function cd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cd.installed||(cd.installed=!0,e=$t(e,"dataProjection"),Object.assign(ud,e),t.component(ud.name,ud))}var hd=Object.freeze({__proto__:null,default:cd,install:cd,Layer:ud}),dd={name:"VlInteractionModify",mixins:[Jl,hl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},condition:{type:Function,default:y.primaryAction},deleteCondition:{type:Function,default:y.altKeyOnly},insertVertexCondition:{type:Function,default:y.always},pixelTolerance:{type:Number,default:10},wrapX:{type:Boolean,default:!1}},watch:{...qa(["source","condition","deleteCondition","insertVertexCondition","pixelTolerance","wrapX"])},methods:{async createInteraction(){let i,r=this._source=await this.getInstance(this.source);return Mt(!!r,`Source "${this.source}" not found in identity map.`),r instanceof e.Vector?(i=r.getFeaturesCollection(),i&&(kt(i,t.Collection,`Source "${this.source}" doesn't provide features collection.`),r=null)):(it(r.getFeaturesCollection)?i=r.getFeaturesCollection():it(r.getFeatures)&&(i=r.getFeatures()),kt(i,t.Collection,`Source "${this.source}" doesn't provide features collection.`),r=null),new h.Modify({source:r,features:i,condition:this.condition,deleteCondition:this.deleteCondition,insertVertexCondition:this.insertVertexCondition,pixelTolerance:this.pixelTolerance,wrapX:this.wrapX,style:this.$style})},getServices(){return Jt(Jl.methods.getServices.call(this),hl.methods.getServices.call(this))},subscribeAll(){Jl.methods.subscribeAll.call(this),md.call(this)},getStyleTarget(){return{getStyle:()=>this._style,setStyle:()=>{this.scheduleRecreate()}}},async getOverlay(){return(await this.resolveInteraction()).getOverlay()},async getPointerCount(){return(await this.resolveInteraction()).getPointerCount()},async removePoint(){return(await this.resolveInteraction()).removePoint()}}};function md(){let e;const i=pa(this.$interaction,"modifystart").pipe(Or((t=>{this.setInteracting(!0),e=[],t.features.forEach((t=>{e[t.getId()]=t.getRevision()}))}))),r=pa(this.$interaction,"modifyend").pipe(oi((t=>({...t,modified:t.features.getArray().reduce(((t,i,r)=>(e[i.getId()]!==i.getRevision()&&(t[r]=i.getId()),t)),{})}))),Or((()=>this.setInteracting(!1)))),n=Ci(i,r).pipe(oi((e=>{let{type:i,features:r,modified:n}=e;const o=this.resolvedViewProjection,s=this.resolvedDataProjection;return{type:i,features:r instanceof t.Collection?r.getArray():r,modified:n||{},get json(){return this._json||(this._json=wt(this.features,(t=>bs(t,o,s,6)))),this._json}}})));this.subscribeTo(n,(t=>this.$emit(t.type,t)))}const pd=ec({},undefined,dd,undefined,undefined,undefined,!1,void 0,void 0,void 0);function fd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fd.installed||(fd.installed=!0,e=$t(e,"dataProjection"),Object.assign(pd,e),t.component(pd.name,pd))}var gd=Object.freeze({__proto__:null,default:fd,install:fd,Interaction:pd});const vd=ec({},undefined,{name:"VlSourceOsm",mixins:[Qu],props:{attributions:{...Al.props.attributions,default:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'},url:{...Pu.props.url,default:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"},maxZoom:{...Qu.props.maxZoom,default:19}},computed:{tileGridIdent:G,inputTileGridFactory:G,inputTileUrlFunction:G},watch:{...qa(["inputUrl","maxZoom"])},methods:{createSource(){return new e.OSM({attributions:this.currentAttributions,wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,tileLoadFunction:this.currentTileLoadFunction,url:this.currentUrls[0],crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,maxZoom:this.maxZoom})},inputUrlChanged(t){this.setUrl(t)},tileClassChanged:G,inputTileUrlFunctionChanged:G,inputTileGridFactoryChanged:G,tileGridChanged:G,tilePixelRatioChanged:G,transitionChanged:G,zDirectionChanged:G,attributionsCollapsibleChanged:G,projectionChanged:G}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function yd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yd.installed||(yd.installed=!0,e=$t(e,"dataProjection"),Object.assign(vd,e),t.component(vd.name,vd))}var bd=Object.freeze({__proto__:null,default:yd,install:yd,Source:vd}),wd={name:"VlOverlay",mixins:[Ka,Ea,tl],props:{offset:{type:Array,default:()=>[0,0],validator:t=>2===t.length},position:{type:Array,validator:t=>2===t.length},positioning:{type:String,default:Xr.TOP_LEFT,validator:t=>Object.values(Xr).includes(t)},stopEvent:{type:Boolean,default:!0},insertFirst:{type:Boolean,default:!0},autoPan:[Boolean,Object],autoPanMargin:Number,autoPanAnimation:Object,autoPanOptions:Object,className:String},data(){return{visible:!1,viewProjection:Hn,dataProjection:Hn,currentOffset:this.offset.slice(),currentPositionViewProj:Qr(this.position),currentPositioning:this.positioning}},computed:{positionDataProj(){return Qr(this.position)},positionViewProj(){return this.pointToViewProj(this.position)},currentPositionDataProj(){return this.pointToDataProj(this.currentPositionViewProj)},inputOffset(){return this.offset.slice()},inputAutoPan(){return ot(this.autoPan)?Lt(this.autoPan):this.autoPan},inputAutoPanAnimation(){return ot(this.autoPanAnimation)?Lt(this.autoPanAnimation):this.autoPanAnimation},inputAutoPanOptions(){return ot(this.autoPanOptions)?Lt(this.autoPanOptions):this.autoPanOptions},classes(){return[this.vmClass,this.visible?"visible":void 0].filter(W)}},watch:{rev(){this.$overlay&&(ut(this.currentOffset,this.$overlay.getOffset())||(this.currentOffset=this.$overlay.getOffset()),ut(this.currentPositionViewProj,this.$overlay.getPosition())||(this.currentPositionViewProj=this.$overlay.getPosition()),this.currentPositioning!==this.$overlay.getPositioning()&&(this.currentPositioning=this.$overlay.getPositioning()))},inputOffset:{deep:!0,handler(t){this.setOffset(t)}},currentOffset:{deep:!0,handler(t){ut(t,this.inputOffset)||this.$emit("update:offset",t.slice())}},positionViewProj:{deep:!0,handler(t){this.setPosition(t,!0)}},currentPositionDataProj:{deep:!0,handler(t){ut(t,this.positionDataProj)||this.$emit("update:position",null==t?void 0:t.slice())}},positioning(t){this.setPositioning(t)},currentPositioning(t){t!==this.positioning&&this.$emit("update:positioning",t)},...qa(["stopEvent","insertFirst","autoPanMargin","className","inputAutoPan","inputAutoPanAnimation","inputAutoPanOptions"],["inputAutoPan","inputAutoPanAnimation","inputAutoPanOptions"])},methods:{async beforeInit(){Sd.call(this),await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},createOlObject(){const e=new t.Overlay({id:this.currentId,element:this.$el,offset:this.currentOffset,position:this.currentPositionViewProj,positioning:this.currentPositioning,stopEvent:this.stopEvent,insertFirst:this.insertFirst,autoPan:this.inputAutoPan,autoPanMargin:this.autoPanMargin,autoPanAnimation:this.inputAutoPanAnimation,autoPanOptions:this.inputAutoPanOptions,className:this.className});return Ws(e,this.currentId),e},async mount(){var t;return this.visible=!0,null===(t=this.$overlaysContainer)||void 0===t||t.addOverlay(this.$overlay),Ea.methods.mount.call(this)},async unmount(){var t;return null===(t=this.$overlaysContainer)||void 0===t||t.removeOverlay(this.$overlay),this.visible=!1,Ea.methods.unmount.call(this)},subscribeAll(){Ea.methods.subscribeAll.call(this),$d.call(this)},getIdInternal(){return Zs(this.$overlay)},setIdInternal(t){t!==this.getIdInternal()&&Bs(this.$overlay,t)},resolveOverlay:Ea.methods.resolveOlObject,getOffset(){var t;return at(null===(t=this.$overlay)||void 0===t?void 0:t.getOffset(),this.currentOffset)},setOffset(t){Mt(Q(t)&&2===t.length,"Invalid offset"),ut(t=t.slice(),this.currentOffset)||(this.currentOffset=t),this.$overlay&&!ut(t,this.$overlay.getOffset())&&this.$overlay.setOffset(t)},getPosition(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$overlay)return t?this.currentPositionViewProj:this.currentPositionDataProj;const e=this.$overlay.getPosition();return t?Qr(e):this.pointToDataProj(e)},setPosition(t){var e;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(null==t||Q(t)&&2===t.length,"Invalid position"),t=null===(e=t)||void 0===e?void 0:e.slice(),i||(t=this.pointToViewProj(t)),ut(t,this.currentPositionViewProj)||(this.currentPositionViewProj=t),this.$overlay&&!ut(t,this.$overlay.getPosition())&&this.$overlay.setPosition(t)},getPositioning(){var t;return(null===(t=this.$overlay)||void 0===t?void 0:t.getPositioning())||this.currentPositioning},setPositioning(t){t!==this.currentPositioning&&(this.currentPositioning=t),this.$overlay&&t!==this.$overlay.getPositioning()&&this.$overlay.setPositioning(t)},async panIntoView(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(await this.resolveOverlay()).panIntoView(t)}}};function Sd(){Object.defineProperties(this,{$overlay:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}},$overlaysContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.overlaysContainer}}})}function $d(){const t=At("set"),e=fa(this.$overlay,["offset","position","positioning"],!0,(e=>({...e,setter:i=>{const r=[i];"position"===e.prop&&r.push(!0),this[t(e.prop)](...r)}})));this.subscribeTo(e,(t=>{let{setter:e,value:i}=t;return e(i)}))}const Pd=ec({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classes,attrs:{id:t.vmId}},[t._t("default",null,{id:t.currentId,position:t.currentPositionDataProj,offset:t.currentOffset,positioning:t.currentPositioning})],2)},staticRenderFns:[]},undefined,wd,undefined,false,undefined,!1,void 0,void 0,void 0);function Id(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Id.installed||(Id.installed=!0,e=$t(e,"dataProjection"),Object.assign(Pd,e),t.component(Pd.name,Pd))}var jd=Object.freeze({__proto__:null,default:Id,install:Id,Overlay:Pd}),Od=Nu((function(t){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.__esModule=!0,t.exports.default=t.exports})),xd=Au(Od),Cd=Au(Nu((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),Td=Nu((function(t){function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports})),_d=Au(Td),Rd=Nu((function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),Fd=Au(Rd),Ed=Nu((function(t){t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rd(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports})),Vd=Nu((function(t){function e(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=e=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=e=function(t,e,i){var r=Ed(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},t.exports.__esModule=!0,t.exports.default=t.exports),e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),Ld=Au(Vd),Ad=Nu((function(t){function e(i,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),Nd=Au(Nu((function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ad(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports}))),Md=Nu((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports})),kd=Nu((function(t){var e=Mu.default;t.exports=function(t,i){if(i&&("object"===e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return Md(t)},t.exports.__esModule=!0,t.exports.default=t.exports})),Dd=Au(kd);function Gd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=["Assertion failed",e].join(": "),!t)throw new Error(e)}function Ud(t){return t}function zd(t,e){return-1!==t.indexOf(e)}function Zd(t){return"[object Array]"===Object.prototype.toString.call(t)}var Bd="rotatestart",Wd="rotating",Yd="rotateend",qd=function(){function t(e,i,r,n){Cd(this,t),this.propagationStopped_=!1,this.type_=e,this.features_=i,this.angle_=r,this.anchor_=n}return _d(t,[{key:"preventDefault",value:function(){this.propagationStopped_=!0}},{key:"stopPropagation",value:function(){this.propagationStopped_=!0}},{key:"propagationStopped",get:function(){return this.propagationStopped_}},{key:"type",get:function(){return this.type_}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.angle_}},{key:"anchor",get:function(){return this.anchor_}}]),t}(),Xd="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Hd=-1!==Xd.indexOf("macintosh"),Jd=-1!==Xd.indexOf("webkit")&&-1==Xd.indexOf("edge");function Kd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=Fd(t);if(e){var n=Fd(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return Dd(this,i)}}var Qd="rotate-anchor",tm="rotate-arrow",em="angle",im="anchor",rm=function(i){Nd(n,i);var r=Kd(n);function n(){var i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Cd(this,n),(o=r.call(this,{handleDownEvent:nm,handleUpEvent:om,handleDragEvent:sm,handleMoveEvent:am})).previousCursor_=void 0,o.anchorFeature_=void 0,o.arrowFeature_=void 0,o.lastCoordinate_=void 0,o.anchorMoving_=!1,o.overlay_=new S.Vector({style:s.style||lm(),source:new e.Vector({features:new t.Collection})}),o.condition_=s.condition?s.condition:y.always,o.features_=void 0,s.features)if(Zd(s.features))o.features_=new t.Collection(s.features);else{if(!(s.features instanceof t.Collection))throw new Error("Features option should be an array or collection of features, got "+ku(s.features));o.features_=s.features}else o.features_=new t.Collection;return o.allowAnchorMovement=void 0===s.allowAnchorMovement||s.allowAnchorMovement,o.setAnchor(s.anchor||um(o.features_)),o.setAngle(s.angle||0),o.features_.on("add",(i=o).onFeatureAdd_.bind(i)),o.features_.on("remove",(i=o).onFeatureRemove_.bind(i)),o.on("change:angle",(i=o).onAngleChange_.bind(i)),o.on("change:anchor",(i=o).onAnchorChange_.bind(i)),o.createOrUpdateAnchorFeature_(),o.createOrUpdateArrowFeature_(),o}return _d(n,[{key:"setMap",value:function(t){this.overlay_.setMap(t),Ld(Fd(n.prototype),"setMap",this).call(this,t)}},{key:"setActive",value:function(t){this.overlay_&&this.overlay_.setMap(t?this.map:void 0),Ld(Fd(n.prototype),"setActive",this).call(this,t)}},{key:"setAngle",value:function(t){Gd(!isNaN(parseFloat(t)),"Numeric value passed"),this.set(em,parseFloat(t))}},{key:"getAngle",value:function(){return this.get(em)}},{key:"setAnchor",value:function(t){Gd(null==t||Zd(t)&&2===t.length,"Array of two elements passed"),this.set(im,null!=t?t.map(parseFloat):um(this.features_))}},{key:"getAnchor",value:function(){return this.get(im)}},{key:"createOrUpdateAnchorFeature_",value:function(){var e,i=this.getAngle(),r=this.getAnchor();r&&(this.anchorFeature_?(this.anchorFeature_.getGeometry().setCoordinates(r),this.anchorFeature_.set(em,i)):(this.anchorFeature_=new t.Feature((e={geometry:new s.Point(r)},xd(e,em,i),xd(e,Qd,!0),e)),this.overlay_.getSource().addFeature(this.anchorFeature_)))}},{key:"createOrUpdateArrowFeature_",value:function(){var e,i=this.getAngle(),r=this.getAnchor();r&&(this.arrowFeature_?(this.arrowFeature_.getGeometry().setCoordinates(r),this.arrowFeature_.set(em,i)):(this.arrowFeature_=new t.Feature((e={geometry:new s.Point(r)},xd(e,em,i),xd(e,tm,!0),e)),this.overlay_.getSource().addFeature(this.arrowFeature_)))}},{key:"resetAngleAndAnchor_",value:function(){this.resetAngle_(),this.resetAnchor_()}},{key:"resetAngle_",value:function(){this.set(em,0,!0),this.arrowFeature_&&this.arrowFeature_.set(em,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(em,this.getAngle())}},{key:"resetAnchor_",value:function(){this.set(im,um(this.features_),!0),this.getAnchor()&&(this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor()),this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor()))}},{key:"onFeatureAdd_",value:function(){this.resetAngleAndAnchor_(),this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()}},{key:"onFeatureRemove_",value:function(){this.resetAngleAndAnchor_(),this.features_.getLength()?(this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()):(this.overlay_.getSource().clear(),this.anchorFeature_=this.arrowFeature_=void 0)}},{key:"onAngleChange_",value:function(t){var e=this,i=t.oldValue;this.features_.forEach((function(t){return t.getGeometry().rotate(e.getAngle()-i,e.getAnchor())})),this.arrowFeature_&&this.arrowFeature_.set(em,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(em,this.getAngle())}},{key:"onAnchorChange_",value:function(){var t=this.getAnchor();t&&(this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(t),this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(t))}},{key:"dispatchRotateStartEvent_",value:function(t){this.dispatchEvent(new qd(Bd,t,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotatingEvent_",value:function(t){this.dispatchEvent(new qd(Wd,t,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotateEndEvent_",value:function(t){this.dispatchEvent(new qd(Yd,t,this.getAngle(),this.getAnchor()))}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.getAngle()},set:function(t){this.setAngle(t)}},{key:"anchor",get:function(){return this.getAnchor()},set:function(t){this.setAnchor(t)}},{key:"map",set:function(t){this.setMap(t)},get:function(){return this.getMap()}},{key:"active",set:function(t){this.setActive(t)},get:function(){return this.getActive()}}]),n}(h.Pointer);function nm(t){if(!y.mouseOnly(t))return!1;if(0==(i=t.originalEvent).button&&!(Jd&&Hd&&i.ctrlKey)&&this.condition_(t)){var e=t.map.forEachFeatureAtPixel(t.pixel,Ud);if(zd(["click","singleclick","dblclick"],t.type)&&zd([this.anchorFeature_,this.arrowFeature_],e))return!1;if(e&&!this.lastCoordinate_&&(zd(this.features_.getArray(),e)||e===this.arrowFeature_))return this.lastCoordinate_=t.coordinate,am.call(this,t),this.dispatchRotateStartEvent_(this.features_),!0;if(e&&e===this.anchorFeature_&&this.allowAnchorMovement)return this.anchorMoving_=!0,am.call(this,t),!0}var i;return!1}function om(t){return this.lastCoordinate_?(this.lastCoordinate_=void 0,am.call(this,t),this.dispatchRotateEndEvent_(this.features_),!0):!!this.anchorMoving_&&(this.anchorMoving_=!1,am.call(this,t),!0)}function sm(t){var e=t.coordinate,i=this.anchorFeature_.getGeometry().getCoordinates();if(this.lastCoordinate_){var r=[this.lastCoordinate_[0]-i[0],this.lastCoordinate_[1]-i[1]],n=[e[0]-i[0],e[1]-i[1]],o=Math.atan2(r[0]*n[1]-n[0]*r[1],r[0]*n[0]+r[1]*n[1]);this.setAngle(this.getAngle()+o),this.dispatchRotatingEvent_(this.features_),this.lastCoordinate_=e}else this.anchorMoving_&&this.setAnchor(e)}function am(t){var e=t.map,i=t.pixel,r=e.getTargetElement(),n=e.forEachFeatureAtPixel(i,Ud),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(r.style.cursor="-webkit-"+t,r.style.cursor="-moz-"+t),r.style.cursor=t};this.lastCoordinate_?(this.previousCursor_=r.style.cursor,o("grabbing",!0)):n&&(zd(this.features_.getArray(),n)||n===this.arrowFeature_)?(this.previousCursor_=r.style.cursor,o("grab",!0)):n&&n===this.anchorFeature_&&this.allowAnchorMovement||this.anchorMoving_?(this.previousCursor_=r.style.cursor,o("crosshair")):(o(this.previousCursor_||""),this.previousCursor_=void 0)}function lm(){var t,e=[255,255,255,.8],i=[0,153,255,.8],r=[255,255,255,.01],n=(xd(t={},Qd,[new c.Style({image:new c.RegularShape({fill:new c.Fill({color:[0,153,255,.8]}),stroke:new c.Stroke({color:i,width:1}),radius:4,points:6}),zIndex:1/0})]),xd(t,tm,[new c.Style({fill:new c.Fill({color:r}),stroke:new c.Stroke({color:e,width:4}),text:new c.Text({font:"12px sans-serif",offsetX:20,offsetY:-20,fill:new c.Fill({color:"blue"}),stroke:new c.Stroke({color:e,width:3})}),zIndex:1/0}),new c.Style({fill:new c.Fill({color:r}),stroke:new c.Stroke({color:i,width:2}),zIndex:1/0})]),t);return function(t,e){var i,r=t.get(em)||0;switch(!0){case t.get(Qd):return(i=n[Qd])[0].getImage().setRotation(-r),i;case t.get(tm):i=n[tm];var o=t.getGeometry().getCoordinates(),a=new s.Polygon([[[o[0],o[1]-6*e],[o[0]+8*e,o[1]-12*e],[o[0],o[1]+30*e],[o[0]-8*e,o[1]-12*e],[o[0],o[1]-6*e]]]);return a.rotate(r,o),i[0].setGeometry(a),i[1].setGeometry(a),i[0].getText().setText(Math.round(180*-r/Math.PI)+"°"),i}}}function um(e){if((e=e instanceof t.Collection?e.getArray():e).length)return n.getCenter(function(e){if((e=e instanceof t.Collection?e.getArray():e).length)return new s.GeometryCollection(e.map((function(t){return t.getGeometry()}))).getExtent()}(e))}"undefined"!=typeof window&&window.ol&&window.ol.interaction&&(window.ol.interaction.RotateFeature=rm);var cm="addfeature",hm="removefeature",dm={name:"VlInteractionRotate",mixins:[Jl,hl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},angle:{type:Number,default:0},anchor:{type:Array,validator:t=>t.length>=2},condition:{type:Function,default:y.always},allowAnchorMovement:{type:Boolean,default:!0}},data(){return{currentAnchorViewProj:Qr(this.anchor),currentAngle:this.angle}},computed:{anchorDataProj(){return Qr(this.anchor)},anchorViewProj(){return this.pointToViewProj(this.anchor)},currentAnchorDataProj(){return this.pointToDataProj(this.currentAnchorViewProj)}},watch:{rev(){this.$interaction&&(ut(this.currentAnchorViewProj,this.$interaction.getAnchor())||(this.currentAnchorViewProj=this.$interaction.getAnchor()),this.currentAngle!==this.$interaction.getAngle()&&(this.currentAngle=this.$interaction.getAngle()))},anchorViewProj:{deep:!0,handler(t){t&&this.setAnchor(t,!0)}},currentAnchorDataProj:{deep:!0,handler(t){ut(t,this.anchorDataProj)||this.$emit("update:anchor",null==t?void 0:t.slice())}},angle(t){this.setAngle(t)},currentAngle(t){t!==this.angle&&this.$emit("update:angle",t)},...qa(["source","condition","allowAnchorMovement"])},created(){var t;this.currentAnchorViewProj=null===(t=this.anchorViewProj)||void 0===t?void 0:t.slice()},methods:{async createInteraction(){const i=this._source=await this.getInstance(this.source);let r;return Mt(!!i,`Source "${this.source}" not found in identity map.`),i instanceof e.Vector?(r=i.getFeaturesCollection(),r||(r=new t.Collection(i.getFeatures()),this.subscribeTo(pa(i,cm),(t=>{let{feature:e}=t;return e&&r.push(e)})),this.subscribeTo(pa(i,hm),(t=>{let{feature:e}=t;return e&&r.remove(e)}))),kt(r,t.Collection,`Source "${this.source}" doesn't provide features collection.`)):(it(i.getFeaturesCollection)?r=i.getFeaturesCollection():it(i.getFeatures)&&(r=i.getFeatures()),kt(r,t.Collection,`Source "${this.source}" doesn't provide features collection.`)),new rm({features:r,angle:this.currentAngle,anchor:this.currentAnchorViewProj,allowAnchorMovement:this.allowAnchorMovement,condition:this.condition,style:this.$style})},getServices(){return Jt(Jl.methods.getServices.call(this),hl.methods.getServices.call(this))},subscribeAll(){Jl.methods.subscribeAll.call(this),mm.call(this)},getStyleTarget(){return{getStyle:()=>this._style,setStyle:()=>{this.scheduleRecreate()}}},getAngle(){var t;return at(null===(t=this.$interaction)||void 0===t?void 0:t.getAngle(),this.currentAngle)},setAngle(t){Mt(J(t),"Invalid angle"),t!==this.currentAngle&&(this.currentAngle=t),this.$interaction&&t!==this.$interaction.getAngle()&&this.$interaction.setAngle(t)},getAnchor(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=at(null===(t=this.$interaction)||void 0===t?void 0:t.getAnchor(),this.currentAnchorViewProj);return e?Qr(i):this.pointToDataProj(i)},setAnchor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Mt(an(t),"Invalid anchor"),ut(t=e?Qr(t):this.pointToViewProj(t),this.currentAnchorViewProj)||(this.currentAnchorViewProj=t),this.$interaction&&!ut(t,this.$interaction.getAnchor())&&this.$interaction.setAnchor(t)}}};function mm(){const e=At("set"),i=fa(this.$interaction,["angle","anchor"],!0,(t=>({...t,setter:i=>{const r=[i];"anchor"===t.prop&&r.push(!0),this[e(t.prop)](...r)}})));this.subscribeTo(i,(t=>{let{setter:e,value:i}=t;return e(i)}));const r=Ci(pa(this.$interaction,"rotatestart").pipe(Or((()=>this.setInteracting(!0)))),pa(this.$interaction,"rotateend").pipe(Or((()=>this.setInteracting(!1)))),pa(this.$interaction,"rotating")).pipe(oi((e=>{let{type:i,features:r,angle:n,anchor:o}=e;const s=this.resolvedViewProjection,a=this.resolvedDataProjection;return{type:i,features:r instanceof t.Collection?r.getArray():r,angle:n,anchor:this.pointToDataProj(o),get json(){return this._json||(this._json=wt(this.features,(t=>bs(t,s,a,6)))),this._json}}})));this.subscribeTo(r,(t=>this.$emit(t.type,t)))}const pm=ec({},undefined,dm,undefined,undefined,undefined,!1,void 0,void 0,void 0);function fm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fm.installed||(fm.installed=!0,e=$t(e,"dataProjection"),Object.assign(pm,e),t.component(pm.name,pm))}var gm=Object.freeze({__proto__:null,default:fm,install:fm,Interaction:pm}),vm={name:"VlInteractionSelect",mixins:[vl,hl,Jl],props:{filter:{type:Function,default:U(!0)},layers:{type:[Array,Function],default:void 0},hitTolerance:{type:Number,default:0},multi:{type:Boolean,default:!1},features:{type:Array,default:z,validator:t=>t.every(q(K,J,Is))},addCondition:{type:Function,default:y.never},condition:{type:Function,default:y.singleClick},removeCondition:{type:Function,default:y.never},toggleCondition:{type:Function,default:y.shiftKeyOnly},useFeatureStyle:Boolean},data(){return{currentHitTolerance:this.hitTolerance}},computed:{featuresDataProj(){return wt(this.features,(t=>(Is(t)&&(t=Cs(Lt(t))),t)))},featuresViewProj(){return wt(this.features,(t=>(Is(t)&&(t=this.writeFeatureInViewProj(this.readFeatureInDataProj(t))),t)))},currentFeaturesDataProj(){return this.rev?wt(this.getFeatures(),(t=>this.writeFeatureInDataProj(t))):[]},currentFeaturesViewProj(){return this.rev?wt(this.getFeatures(),(t=>this.writeFeatureInViewProj(t))):[]},currentFeatureIds(){return wt(this.currentFeaturesDataProj,(t=>Os(t)))},layerFilter(){return Array.isArray(this.layers)?t=>this.layers.includes(Ns(t)):this.layers},style(){if(!this.rev||!this.$style)return;let t=this.$style;return it(t)?t:t?(Q(t)||(t=[t]),t.map((t=>as(t,(t=>this.writeGeometryInDataProj(t)))))):void 0}},watch:{rev(){this.$interaction&&this.currentHitTolerance!==this.$interaction.getHitTolerance()&&(this.currentHitTolerance=this.$interaction.getHitTolerance())},featuresViewProj:{deep:!0,handler(t){const e=wt(t,(t=>nt(t)?Os(t):t));ut(e,this.currentFeatureIds)||(this.unselectAll(),gt(t,this.select.bind(this)))}},currentFeaturesDataProj:{deep:!0,handler(t){ut(t,this.featuresDataProj)||this.$emit("update:features",t&&Lt(t))}},hitTolerance(t){this.setHitTolerance(t)},currentHitTolerance(t){t!==this.hitTolerance&&this.$emit("update:hitTolerance",t)},style:{deep:!0,handler(t,e){ut(t,e)||((ot(t)||Q(t))&&(t=Lt(t)),this.$emit("update:style",t))}},...qa(["filter","multi","wrapX","addCondition","condition","removeCondition","toggleCondition"])},methods:{createInteraction(){return new h.Select({multi:this.multi,filter:this.filter,layers:this.layerFilter,hitTolerance:this.currentHitTolerance,addCondition:this.addCondition,condition:this.condition,removeCondition:this.removeCondition,toggleCondition:this.toggleCondition,style:this.$style,features:this.$featuresCollection})},getServices(){return Jt(Jl.methods.getServices.call(this),vl.methods.getServices.call(this),hl.methods.getServices.call(this))},subscribeAll(){Jl.methods.subscribeAll.call(this),vl.methods.subscribeAll.call(this),ym.call(this)},getStyleTarget(){return{getStyle:()=>this._style,setStyle:()=>{this.scheduleRecreate()}}},getStyle(){var t;let e=at(null===(t=this.getStyleTarget())||void 0===t?void 0:t.getStyle(),this._style);return void 0===e&&this.useFeatureStyle&&(e=null),e},select(t){(t=this.resolveFeature(t))&&this.addFeature(t)},unselect(t){(t=this.resolveFeature(t))&&this.removeFeature(t)},unselectAll(){this.clearFeatures()},resolveFeature(e){var i;if(!e)return;if((e=(null===(i=e)||void 0===i?void 0:i.$feature)||e)instanceof t.Feature)return e;const r=K(e)||J(e)?e:Os(e);if(!r)throw new Error(`${this.vmName} undefined feature id`);return e=null,gt(this.$mapVm.getLayers(),(t=>{if(this.layerFilter&&!this.layerFilter(t))return;const i=t.getSource();return it(null==i?void 0:i.getFeatureById)&&(e=i.getFeatureById(r)),!e})),e},updateFeature(t){},getHitTolerance(){var t;return at(null===(t=this.$interaction)||void 0===t?void 0:t.getHitTolerance(),this.currentHitTolerance)},setHitTolerance(t){Mt(J(t),"Invalid tolerance"),t!==this.currentHitTolerance&&(this.currentHitTolerance=t),this.$interaction&&t!==this.$interaction.getHitTolerance()&&this.$interaction.setHitTolerance(t)},async getLayer(t){return t=this.resolveFeature(t),(await this.resolveInteraction()).getLayer(t)}}};function ym(){const t=Ci(ga(this,"addfeature",(t=>({type:"select",feature:t.feature,get json(){return t.json}}))),ga(this,"removefeature",(t=>({type:"unselect",feature:t.feature,get json(){return t.json}}))));this.subscribeTo(t,(t=>this.$emit(t.type,t)))}const bm=ec({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",null,{features:t.currentFeaturesDataProj})],2)},staticRenderFns:[]},undefined,vm,undefined,false,undefined,!1,void 0,void 0,void 0);function wm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wm.installed||(wm.installed=!0,e=$t(e,"dataProjection"),Object.assign(bm,e),t.component(bm.name,bm))}var Sm=Object.freeze({__proto__:null,default:wm,install:wm,Interaction:bm}),$m={name:"VlInteractionSnap",mixins:[Jl],props:{source:{type:String,required:!0},edge:{type:Boolean,default:!0},vertex:{type:Boolean,default:!0},pixelTolerance:{type:Number,default:10}},watch:{...qa(["source","edge","vertex","pixelTolerance"])},methods:{async createInteraction(){let i,r=await this.getInstance(this.source);return Mt(!!r,`Source "${this.source}" not found in identity map.`),r instanceof e.Vector||(it(r.getFeaturesCollection)?i=r.getFeaturesCollection():it(r.getFeatures)&&(i=r.getFeatures()),kt(i,t.Collection,`Source "${this.source}" doesn't provide features collection.`),r=null),new h.Snap({source:r,features:i,edge:this.edge,vertex:this.vertex,pixelTolerance:this.pixelTolerance})}}};const Pm=ec({},undefined,$m,undefined,undefined,undefined,!1,void 0,void 0,void 0);function Im(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Im.installed||(Im.installed=!0,e=$t(e,"dataProjection"),Object.assign(Pm,e),t.component(Pm.name,Pm))}var jm=Object.freeze({__proto__:null,default:Im,install:Im,Interaction:Pm});const Om=ec({},undefined,{name:"VlSourceSputnik",mixins:[Qu],props:{attributions:{...Al.props.attributions,default:'&copy; <a href="http://rt.ru/" target="_blank">Ростелеком</a>. '},url:{...Pu.props.url,default:"http://tiles.maps.sputnik.ru/{z}/{x}/{y}.png?apikey={apikey}"},apiKey:{type:String}},computed:{urlTokens:()=>["apiKey"]}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function xm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xm.installed||(xm.installed=!0,e=$t(e,"dataProjection"),Object.assign(Om,e),t.component(Om.name,Om))}var Cm=Object.freeze({__proto__:null,default:xm,install:xm,Source:Om});const Tm=ec({},undefined,{name:"VlSourceStamen",mixins:[Qu],props:{layer:{type:String,required:!0}},computed:{tileGridIdent:G,inputTileGridFactory:G,inputTileUrlFunction:G},methods:{createSource(){return new e.Stamen({wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,url:this.currentUrls[0],reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,minZoom:this.minZoom,maxZoom:this.maxZoom,layer:this.layer})},inputUrlChanged(t){this.setUrl(t)},attributionsCollapsibleChanged:G,projectionChanged:G,inputTileGridFactoryChanged:G,tileGridChanged:G,zDirectionChanged:G,inputTileUrlFunctionChanged:G,crossOriginChanged:G,tileClassChanged:G}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function _m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_m.installed||(_m.installed=!0,e=$t(e,"dataProjection"),Object.assign(Tm,e),t.component(Tm.name,Tm))}var Rm=Object.freeze({__proto__:null,default:_m,install:_m,Source:Tm}),Fm={name:"VlStyleFunc",mixins:[Qa,Ka,hl,Ea,tl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{function:{type:Function},func:Function,factory:Function},data:()=>({viewProjection:Hn,dataProjection:Hn}),computed:{inputFunction(){let t=this.function||this.func;return!t&&this.factory&&(t=this.factory()),t}},watch:{...qa(["inputFunction"])},created(){Em.call(this)},updated(){},methods:{async beforeInit(){await Promise.all([Ea.methods.beforeInit.call(this),tl.methods.beforeInit.call(this)])},createOlObject(){const t=this.inputFunction,e=this.createStyleFunc(this.$style,this.getDefaultStyle()),i=function(i,r){const n=t(i,r);return null==n||Array.isArray(n)&&n.length||n instanceof c.Style?n:e(i,r)};return i.id=this.currentId,i},getServices(){return Jt(Ea.methods.getServices.call(this),hl.methods.getServices.call(this))},async mount(){var t;return null===(t=this.$styleContainer)||void 0===t||t.setStyle(this),Ea.methods.mount.call(this)},async unmount(){var t;return(null===(t=this.$styleContainer)||void 0===t?void 0:t.getStyle())===this.$styleFunction&&this.$styleContainer.setStyle(null),Ea.methods.unmount.call(this)},getStyleTarget(){return{getStyle:()=>this._style,setStyle:async()=>{await this.scheduleRecreate()}}}}};function Em(){Object.defineProperties(this,{$styleFunction:{enumerable:!0,get:()=>this.$olObject},$mapVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.mapVm}},$viewVm:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.viewVm}},$styleContainer:{enumerable:!0,get:()=>{var t;return null===(t=this.$services)||void 0===t?void 0:t.styleContainer}}})}const Vm=ec({},undefined,Fm,undefined,undefined,undefined,!1,void 0,void 0,void 0);function Lm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lm.installed||(Lm.installed=!0,e=$t(e,"dataProjection"),Object.assign(Vm,e),t.component(Vm.name,Vm))}var Am=Object.freeze({__proto__:null,default:Lm,install:Lm,Style:Vm});const Nm=ec({},undefined,{name:"VlSourceTileArcgisRest",mixins:[Ja,ju],computed:{inputTileUrlFunction:G},methods:{createSource(){return new e.TileArcGISRest({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,urls:this.currentUrls,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,hidpi:this.hidpi,params:this.currentParams})},stateChanged:G,attributionsCollapsibleChanged:G,tileKeyChanged:G,opaqueChanged:G,tilePixelRatioChanged:G,zDirectionChanged:G,inputTileUrlFunctionChanged:G,tileClassChanged:G}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Mm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mm.installed||(Mm.installed=!0,e=$t(e,"dataProjection"),Object.assign(Nm,e),t.component(Nm.name,Nm),t.component("VlSourceArcgisRest",{name:"VlSourceArcgisRest",extends:Nm,created(){}}))}var km=Object.freeze({__proto__:null,default:Mm,install:Mm,Source:Nm});const Dm=ec({},undefined,{name:"VlLayerTile",mixins:[Ou],methods:{createLayer(){return new S.Tile({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,preload:this.currentPreload,useInterimTilesOnError:this.currentUseInterimTilesOnError})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Gm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gm.installed||(Gm.installed=!0,e=$t(e,"dataProjection"),Object.assign(Dm,e),t.component(Dm.name,Dm))}var Um=Object.freeze({__proto__:null,default:Gm,install:Gm,Layer:Dm});const zm=ec({},undefined,{name:"VlSourceTileWms",mixins:[Lu,ju],props:{gutter:{type:Number,default:0}},computed:{inputTileUrlFunction:G},watch:{...qa(["gutter"])},methods:{createSource(){return new e.TileWMS({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,urls:this.currentUrls,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileClass:this.tileClass,imageSmoothing:this.imageSmoothing,gutter:this.gutter,hidpi:this.hidpi,serverType:this.serverType,params:this.currentParams})},stateChanged:G,attributionsCollapsibleChanged:G,tileKeyChanged:G,opaqueChanged:G,tilePixelRatioChanged:G,zDirectionChanged:G,inputTileUrlFunctionChanged:G}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Zm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zm.installed||(Zm.installed=!0,e=$t(e,"dataProjection"),Object.assign(zm,e),t.component(zm.name,zm),t.component("VlSourceWms",{name:"VlSourceWms",extends:zm,created(){}}))}var Bm=Object.freeze({__proto__:null,default:Zm,install:Zm,Source:zm}),Wm={name:"VlInteractionTranslate",mixins:[Jl],stubVNode:{empty:!1,attrs(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},layers:[String,Array],filter:Function,hitTolerance:{type:Number,default:0}},data(){return{currentHitTolerance:this.hitTolerance}},computed:{inputFilter(){if(it(this.filter))return this.filter;let t=this.layers;return t?(K(t)&&(t=[t]),(e,i)=>t.includes(Ns(i))):void 0}},watch:{rev(){this.$interaction&&this.currentHitTolerance!==this.$interaction.getHitTolerance()&&(this.currentHitTolerance=this.$interaction.getHitTolerance())},hitTolerance(t){this.setHitTolerance(t)},currentHitTolerance(t){t!==this.hitTolerance&&this.$emit("update:hitTolerance",t)},...qa(["source","inputFilter"])},methods:{async createInteraction(){const i=this._source=await this.getInstance(this.source);let r;return Mt(!!i,`Source "${this.source}" not found in identity map.`),i instanceof e.Vector?(r=i.getFeaturesCollection(),r||(r=new t.Collection(i.getFeatures()),this.subscribeTo(pa(i,cm),(t=>{let{feature:e}=t;return e&&r.push(e)})),this.subscribeTo(pa(i,hm),(t=>{let{feature:e}=t;return e&&r.remove(e)}))),kt(r,t.Collection,`Source "${this.source}" doesn't provide features collection.`)):(it(i.getFeaturesCollection)?r=i.getFeaturesCollection():it(i.getFeatures)&&(r=i.getFeatures()),kt(r,t.Collection,`Source "${this.source}" doesn't provide features collection.`)),new h.Translate({features:r,filter:this.inputFilter,hitTolerance:this.currentHitTolerance})},subscribeAll(){Jl.methods.subscribeAll.call(this),Ym.call(this)},getHitTolerance(){var t;return at(null===(t=this.$interaction)||void 0===t?void 0:t.getHitTolerance(),this.currentHitTolerance)},setHitTolerance(t){Mt(J(t),"Invalid hit tolerance"),t!==this.currentHitTolerance&&(this.currentHitTolerance=t),this.$interaction&&t!==this.$interaction.getHitTolerance()&&this.$interaction.setHitTolerance(t)}}};function Ym(){const e=Ci(pa(this.$interaction,"translatestart").pipe(Or((()=>this.setInteracting(!0)))),pa(this.$interaction,"translateend").pipe(Or((()=>this.setInteracting(!1)))),pa(this.$interaction,"translating")).pipe(oi((e=>{let{type:i,features:r,coordinate:n,startCoordinate:o}=e;const s=this.resolvedViewProjection,a=this.resolvedDataProjection;return{type:i,features:r instanceof t.Collection?r.getArray():r,coordinate:this.pointToDataProj(n),startCoordinate:this.pointToDataProj(o),get json(){return this._json||(this._json=wt(this.features,(t=>bs(t,s,a,6)))),this._json}}})));this.subscribeTo(e,(t=>this.$emit(t.type,t)))}const qm=ec({},undefined,Wm,undefined,undefined,undefined,!1,void 0,void 0,void 0);function Xm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xm.installed||(Xm.installed=!0,e=$t(e,"dataProjection"),Object.assign(qm,e),t.component(qm.name,qm))}var Hm=Object.freeze({__proto__:null,default:Xm,install:Xm,Interaction:qm});const Jm=ec({},undefined,{name:"VlLayerVectorImage",mixins:[Cu],props:{imageRatio:{type:Number,default:1}},watch:{...qa(["imageRatio"])},methods:{createLayer(){return new S.VectorImage({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,imageRatio:this.imageRatio})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Km(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Km.installed||(Km.installed=!0,e=$t(e,"dataProjection"),Object.assign(Jm,e),t.component(Jm.name,Jm))}var Qm=Object.freeze({__proto__:null,default:Km,install:Km,Layer:Jm});const tp=q(J,X(Q,(t=>2===t.length&&t.every(J))));var ep={name:"VlSourceVectorTile",mixins:[Pu,gl],props:{cacheSize:{...wu.props.cacheSize,default:128},zDirection:{...wu.props.zDirection,default:1},extent:{type:Array,validator:t=>4===t.length&&t.every(J)},formatFactory:{type:Function,default:ps},overlaps:{type:Boolean,default:!0},tileClass:Function,maxZoom:{type:Number,default:22},minZoom:{type:Number,default:0,validator:t=>t>=0},maxResolution:Number,tileSize:{type:[Number,Array],default:()=>[512,512],validator:tp}},data:()=>({format:void 0}),computed:{inputTileSize(){return Q(this.tileSize)?this.tileSize:[this.tileSize,this.tileSize]},derivedTileGridFactory(){if(it(this.tileGridFactory))return this.tileGridFactory;const t=this.extentDataProj||ta(this.resolvedDataProjection),e=this.maxZoom,i=this.minZoom,r=this.maxResolution,n=this.inputTileSize;return()=>v.createXYZ({extent:t,maxZoom:e,minZoom:i,maxResolution:r,tileSize:n})},extentDataProj(){return Kr(this.extent)},extentViewProj(){return this.extentToViewProj(this.extent)},formatIdent(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"format")},inputFormatFactory(){return ft(this.formatFactory.bind(this))},inputTileUrlFunction(){const t=at(this.tileUrlFunction,this.tileUrlFunc);return it(t)?t:0!==this.currentUrls.length?Yu(this.currentUrls,this.tileGrid):void 0}},watch:{formatIdent(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.format?this.setInstance(t,this.format):!t&&e&&this.unsetInstance(e)},inputFormatFactory(t){for(;this.hasInstance(this.formatIdent);)this.unsetInstance(this.formatIdent);it(t)?this.format=this.instanceFactoryCall(this.formatIdent,t.bind(this)):this.format=void 0},...qa(["extentViewProj","overlaps","tileClass"],["extentViewProj"])},created(){it(this.inputFormatFactory)&&(this.format=this.instanceFactoryCall(this.formatIdent,this.inputFormatFactory.bind(this)))},methods:{createSource(){return new e.VectorTile({attributions:this.currentAttributions,attributionsCollapsible:this.attributionsCollapsible,projection:this.resolvedDataProjection,state:this.currentState,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,transition:this.transition,zDirection:this.zDirection,tileLoadFunction:this.currentTileLoadFunction,tileUrlFunction:this.currentTileUrlFunction,format:this.format,extent:this.extentViewProj,overlaps:this.overlaps,tileClass:this.tileClass})},subscribeAll(){Pu.methods.subscribeAll.call(this),ip.call(this)},async getFeaturesInExtent(t){return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Kr(t):this.extentToViewProj(t),(await this.resolveSource()).getFeaturesInExtent(t)},async clear(){(await this.resolveSource()).clear()},tileKeyChanged:G,opaqueChanged:G,tilePixelRatioChanged:G}};function ip(){this.subscribeTo(pa(this.$source,yu),(e=>{e.tile&&gt(e.tile.getFeatures(),(e=>{e instanceof t.Feature&&this.initializeFeature(e)}))}))}const rp=ec({},undefined,ep,undefined,undefined,undefined,!1,void 0,void 0,void 0);function np(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};np.installed||(np.installed=!0,e=$t(e,"dataProjection"),Object.assign(rp,e),t.component(rp.name,rp))}var op=Object.freeze({__proto__:null,default:np,install:np,Source:rp}),sp={name:"VlSourceWmts",mixins:[ju],props:{layerName:{type:String,required:!0},styleName:{type:String,required:!0},matrixSet:{type:String,required:!0},dimensions:Object,format:{type:String,default:"image/jpeg"},requestEncoding:{type:String,default:"KVP"},version:{type:String,default:"1.0.0"},extent:{type:Array,validator:t=>4===t.length&&t.every(J)},resolutions:{type:Array,validator:t=>t.every(J)},origin:{type:Array,validator:t=>2===t.length&&t.every(J)},matrixIds:{type:Array,validator:t=>t.every(q(J,K))},maxZoom:{type:Number,default:42},minZoom:{type:Number,default:0},tileSize:{type:[Number,Array],default:()=>[256,256]}},computed:{extentDataProj(){return Kr(this.extent)},extentViewProj(){return this.extentToViewProj(this.extent)},originDataProj(){return Qr(this.origin)},originViewProj(){return this.pointToViewProj(this.origin)},inputTileSize(){return Q(this.tileSize)?this.tileSize:[this.tileSize,this.tileSize]},derivedTileGridFactory(){if(it(this.tileGridFactory))return this.tileGridFactory;const t=this.extentDataProj||ta(this.resolvedDataProjection),e=this.resolutions||ap(t,this.maxZoom,this.inputTileSize),i=this.originDataProj||pn(t,qr.TOP_LEFT),r=this.matrixIds||xt(this.minZoom,e.length),n=this.inputTileSize,o=this.minZoom;return()=>new T.default({extent:t,origin:i,resolutions:e,minZoom:o,matrixIds:r,tileSize:n})},inputTileUrlFunction:G},watch:{...qa(["dimensions","format","layerName","styleName","matrixSet","requestEncoding","version"],["dimensions"])},methods:{createSource(){return new e.WMTS({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,tilePixelRatio:this.tilePixelRatio,transition:this.transition,zDirection:this.zDirection,urls:this.currentUrls,tileLoadFunction:this.currentTileLoadFunction,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileClass:this.tileClass,imageSmoothing:this.imageSmoothing,dimensions:this.dimensions,format:this.format,layer:this.layerName,style:this.styleName,matrixSet:this.matrixSet,requestEncoding:this.requestEncoding,version:this.version})},getDimensions(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getDimensions(),this.dimensions)},getFormat(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getFormat(),this.format)},getLayer(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getLayer(),this.layerName)},getMatrixSet(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getMatrixSet(),this.matrixSet)},getRequestEncoding(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getRequestEncoding(),this.requestEncoding)},getStyle(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getStyle(),this.styleName)},getVersion(){var t;return at(null===(t=this.$source)||void 0===t?void 0:t.getVersion(),this.version)},attributionsCollapsibleChanged:G,stateChanged:G,tileKeyChanged:G,opaqueChanged:G,inputTileUrlFunctionChanged:G}};function ap(t,e,i,r){e=void 0!==e?e:42;const o=n.getHeight(t),s=n.getWidth(t);i=$.toSize(void 0!==i?i:256),r=r>0?r:Math.max(s/i[0],o/i[1]);const a=e+1,l=new Array(a);for(let t=0;t<a;++t)l[t]=r/Math.pow(2,t);return l}const lp=ec({},undefined,sp,undefined,undefined,undefined,!1,void 0,void 0,void 0);function up(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};up.installed||(up.installed=!0,e=$t(e,"dataProjection"),Object.assign(lp,e),t.component(lp.name,lp))}var cp=Object.freeze({__proto__:null,default:up,install:up,Source:lp});const hp=ec({},undefined,{name:"VlSourceXyz",mixins:[Qu]},undefined,undefined,undefined,!1,void 0,void 0,void 0);function dp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dp.installed||(dp.installed=!0,e=$t(e,"dataProjection"),Object.assign(hp,e),t.component(hp.name,hp))}var mp=Object.freeze({__proto__:null,default:dp,install:dp,Source:hp});function pp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pp.installed||(pp.installed=!0,t.use(nc,e),t.use(hc,e),t.use(vc,e),t.use(Vc,e),t.use(Dc,e),t.use(hh,e),t.use(fh,e),t.use(bh,e),t.use(Ih,e),t.use(xh,e),t.use(_h,e),t.use(Lh,e),t.use(ed,e),t.use(nd,e),t.use(hd,e),t.use(gd,e),t.use(bd,e),t.use(jd,e),t.use(gm,e),t.use(Sm,e),t.use(jm,e),t.use(Cm,e),t.use(Rm,e),t.use(rh,e),t.use(Am,e),t.use(km,e),t.use(Um,e),t.use(Bm,e),t.use(Hm,e),t.use(Qm,e),t.use(Uh,e),t.use(Bh,e),t.use(ld,e),t.use(op,e),t.use(cp,e),t.use(mp,e))}var fp=Object.freeze({__proto__:null,VERSION:"0.12.7",default:pp,install:pp,BingmapsSource:nc,ClusterSource:hc,DrawInteraction:vc,Feature:Vc,Geoloc:Dc,GraticuleLayer:hh,GroupLayer:fh,HeatmapLayer:bh,ImageArcgisRestSource:Ih,ImageLayer:xh,ImageStaticSource:_h,ImageWmsSource:Lh,Map:ed,MapboxSource:nd,MapboxVectorLayer:hd,ModifyInteraction:gd,OsmSource:bd,Overlay:jd,RotateInteraction:gm,SelectInteraction:Sm,SnapInteraction:jm,SputnikSource:Cm,StamenSource:Rm,Style:rh,StyleFunc:Am,TileArcgisRestSource:km,TileLayer:Um,TileWmsSource:Bm,TranslateInteraction:Hm,VectorImageLayer:Qm,VectorLayer:Uh,VectorSource:Bh,VectorTileLayer:ld,VectorTileSource:op,WmtsSource:cp,XyzSource:mp}),gp={...fp,mixins:tc,olExt:oa,rxExt:ba,utils:Ar};return void 0!==window.Vue&&window.Vue.use(fp),gp}));
//# sourceMappingURL=vuelayers.umd.min.js.map
