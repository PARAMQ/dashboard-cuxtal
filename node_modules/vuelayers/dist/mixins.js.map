{"version":3,"file":"mixins.js","sources":["../src/mixins/event-bus.js","../src/mixins/ident-map.js","../src/mixins/rx-subs.js","../src/mixins/services.js","../src/mixins/ol-cmp.js","../src/mixins/arcgis-source.js","../src/mixins/proj-transforms.js","../src/mixins/stub-vnode.js","../src/mixins/wait-for-map.js","../src/mixins/base-layer.js","../src/mixins/controls-container.js","../src/mixins/geometry-container.js","../src/mixins/style-container.js","../src/mixins/feature.js","../src/mixins/feature-helper.js","../src/mixins/features-container.js","../src/mixins/fill-style-container.js","../src/mixins/geometry.js","../src/mixins/source-container.js","../src/mixins/layer.js","../src/mixins/image-layer.js","../src/mixins/source.js","../src/mixins/image-source.js","../src/mixins/style.js","../src/mixins/image-style.js","../src/mixins/image-style-container.js","../src/mixins/interaction.js","../src/mixins/interactions-container.js","../src/mixins/layers-container.js","../src/mixins/overlays-container.js","../src/mixins/stroke-style-container.js","../src/mixins/reg-shape-style.js","../src/mixins/simple-geometry.js","../src/mixins/text-style-container.js","../src/mixins/tile-source.js","../src/mixins/url-tile-source.js","../src/mixins/tile-image-source.js","../src/mixins/tile-layer.js","../src/mixins/vector-layer.js","../src/mixins/vector-source.js","../src/mixins/wms-source.js","../src/mixins/xyz-source.js"],"sourcesContent":["import Vue from 'vue'\nimport { hasProp } from '../utils'\n\nexport const EVENT_BUS_PROP = '$vlEventBus'\n\nexport default {\n  beforeCreate () {\n    initEventBus()\n    // define local getter\n    Object.defineProperties(this, {\n      /**\n       * @type {Vue}\n       */\n      $eventBus: {\n        enumerable: true,\n        get: () => this[EVENT_BUS_PROP],\n      },\n    })\n  },\n}\n\nfunction initEventBus () {\n  if (\n    hasProp(Vue, EVENT_BUS_PROP) ||\n    hasProp(Vue.prototype, EVENT_BUS_PROP)\n  ) return\n\n  const bus = new Vue()\n\n  if (!hasProp(Vue, EVENT_BUS_PROP)) {\n    Object.defineProperties(Vue, {\n      [EVENT_BUS_PROP]: {\n        enumerable: true,\n        get: () => bus,\n      },\n    })\n  }\n\n  if (!hasProp(Vue.prototype, EVENT_BUS_PROP)) {\n    Object.defineProperties(Vue.prototype, {\n      [EVENT_BUS_PROP]: {\n        enumerable: true,\n        get: () => bus,\n      },\n    })\n  }\n}\n","import Vue from 'vue'\nimport { hasProp, identity, IdentityMap, keys, stubObject } from '../utils'\n\n// global prop\nexport const IDENTITY_MAP_PROP = '$vlIdentityMap'\nexport const INSTANCES_POOL = 'instances'\n\nexport default {\n  data () {\n    return {\n      idents: stubObject(),\n    }\n  },\n  beforeCreate () {\n    initIdentityMap()\n    // define local getter\n    Object.defineProperties(this, {\n      $identityMap: {\n        enumerable: true,\n        get: () => this[IDENTITY_MAP_PROP],\n      },\n    })\n  },\n  destroyed () {\n    this.unsetInstances()\n  },\n  methods: {\n    /**\n     * @param parts\n     * @return {string}\n     */\n    makeIdent (...parts) {\n      return parts.filter(identity).join('.')\n    },\n    /**\n     * Caches or reuse factory result in the identity map\n     * and returns result.\n     *\n     * @param {string|undefined} ident\n     * @param {function} factory\n     * @returns {*}\n     */\n    instanceFactoryCall (ident, factory) {\n      if (ident && this.hasInstance(ident)) {\n        return this.getInstance(ident)\n      }\n\n      const inst = factory()\n\n      if (ident) {\n        this.setInstance(ident, inst)\n      }\n\n      return inst\n    },\n    /**\n     * @param {string|undefined} ident\n     * @returns {*}\n     */\n    getInstance (ident) {\n      if (!ident || !this.hasInstance(ident)) return\n\n      this.idents[ident] = true\n\n      return this.$identityMap.get(ident, INSTANCES_POOL)\n    },\n    /**\n     * @param ident\n     * @param inst\n     */\n    setInstance (ident, inst) {\n      if (!ident) return\n\n      this.idents[ident] = true\n      this.$identityMap.set(ident, inst, INSTANCES_POOL)\n    },\n    /**\n     * @param {string|undefined} ident\n     * @returns {*}\n     */\n    hasInstance (ident) {\n      if (!ident) return\n\n      return this.$identityMap.has(ident, INSTANCES_POOL)\n    },\n    /**\n     * @param {string|undefined} ident\n     * @return {void}\n     */\n    unsetInstance (ident) {\n      if (!ident) return\n\n      delete this.idents[ident]\n      this.$identityMap.unset(ident, INSTANCES_POOL)\n    },\n    /**\n     * Unsets all self indets\n     * @return {void}\n     */\n    unsetInstances () {\n      keys(this.idents).forEach(::this.unsetInstance)\n    },\n    /**\n     * @param {string|undefined} fromIdent\n     * @param {string|undefined} toIdent\n     * @returns {boolean}\n     */\n    moveInstance (fromIdent, toIdent) {\n      return this.$identityMap.move(fromIdent, toIdent, INSTANCES_POOL)\n    },\n  },\n}\n\nfunction initIdentityMap () {\n  if (\n    hasProp(Vue, IDENTITY_MAP_PROP) ||\n    hasProp(Vue.prototype, IDENTITY_MAP_PROP)\n  ) return\n\n  const imap = new IdentityMap()\n\n  if (!hasProp(Vue, IDENTITY_MAP_PROP)) {\n    Object.defineProperties(Vue, {\n      [IDENTITY_MAP_PROP]: {\n        enumerable: true,\n        get: () => imap,\n      },\n    })\n  }\n\n  if (!hasProp(Vue.prototype, IDENTITY_MAP_PROP)) {\n    Object.defineProperties(Vue.prototype, {\n      [IDENTITY_MAP_PROP]: {\n        enumerable: true,\n        get: () => imap,\n      },\n    })\n  }\n}\n","import { retry } from 'rxjs/operators'\nimport { newLogger, noop } from '../utils'\n\n/**\n * RxJS subscriptions manager.\n */\nexport default {\n  beforeCreate () {\n    /**\n     * @type {Subscription[]}\n     * @private\n     */\n    this._rxSubs = []\n  },\n  destroyed () {\n    this.unsubscribeAll()\n  },\n  methods: {\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () { },\n    /**\n     * @return {void}\n     * @protected\n     */\n    unsubscribeAll () {\n      this._rxSubs.forEach(subs => subs.unsubscribe())\n      this._rxSubs = []\n    },\n    /**\n     * @param {Observable<T>} observable\n     * @param {function} [next] Next handler or Observer object.\n     * @param {function} [error] Error handler.\n     * @param {function} [complete] Complete handler.\n     * @return {Subscription}\n     * @protected\n     */\n    subscribeTo (observable, next = noop, error = noop, complete = noop) {\n      const errorWrap = err => {\n        if (process.env.NODE_ENV !== 'production') {\n          if (this.$logger) {\n            this.$logger.error(err.stack)\n          } else {\n            newLogger(this.vmName).error(err.stack)\n          }\n        }\n        error(err)\n      }\n\n      const subs = observable.pipe(\n        retry(3),\n      ).subscribe(next, errorWrap, complete)\n      this._rxSubs.push(subs)\n\n      return subs\n    },\n    unsubscribe (subs) {\n      const idx = this._rxSubs.indexOf(subs)\n      if (idx === -1) return\n\n      subs.unsubscribe()\n      this._rxSubs.splice(idx, 1)\n    },\n  },\n}\n","import { mergeDescriptors } from '../utils'\n\n// todo uncomment when IE 11 will die\n// const SERVICES_PROP = Symbol('services')\nexport const SERVICES_PROP = 'services'\n\n/**\n * Service container mixin\n */\nexport default {\n  inject: {\n    $services: SERVICES_PROP,\n    // todo works only in Vue 2.5.x\n    // $services: {from: SERVICES_PROP, default: Object.create(null)},\n  },\n  provide () {\n    return {\n      [SERVICES_PROP]: this.getServices(),\n    }\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors({}, this.$services || {})\n    },\n  },\n  beforeCreate () {\n    let source = this.$parent\n    while (source) {\n      if (source._provided != null && source._provided[SERVICES_PROP] != null) {\n        break\n      }\n      source = source.$parent\n    }\n    if (source == null || source._provided[SERVICES_PROP] == null) {\n      delete this.$options.inject.$services\n    }\n  },\n}\n","import debounce from 'debounce-promise'\nimport { Object as OlObject, Observable } from 'ol'\nimport EventType from 'ol/events/EventType'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { interval, merge as mergeObs, of as obsOf, race as raceObs, throwError as throwErrorObs } from 'rxjs'\nimport {\n  delayWhen,\n  filter as filterObs,\n  first as firstObs,\n  map as mapObs,\n  mergeMap,\n  publishReplay,\n  refCount,\n} from 'rxjs/operators'\nimport { v4 as uuid } from 'uuid'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent, fromVueEvent } from '../rx-ext'\nimport {\n  addPrefix,\n  assert,\n  coalesce,\n  identity,\n  isArray,\n  isEqual,\n  isFunction,\n  kebabCase,\n  makeWatchers,\n  newLogger,\n} from '../utils'\nimport eventBus from './event-bus'\nimport identMap from './ident-map'\nimport rxSubs from './rx-subs'\nimport services from './services'\n\nexport const VM_PROP = 'vm'\nexport const FRAME_TIME = 1000 / 30\n\nexport const OlObjectState = {\n  UNDEF: 'undef',\n  CREATING: 'creating',\n  CREATED: 'created',\n  MOUNTING: 'mounting',\n  MOUNTED: 'mounted',\n  UNMOUNTING: 'unmounting',\n  UNMOUNTED: 'unmounted',\n  DESTROYING: 'destroying',\n  DESTROYED: 'destroyed',\n}\n\nexport const OlObjectEvent = {\n  CREATED: OlObjectState.CREATED,\n  MOUNTED: OlObjectState.MOUNTED,\n  UNMOUNTED: OlObjectState.UNMOUNTED,\n  DESTROYED: OlObjectState.DESTROYED,\n  ERROR: 'error',\n}\n\nexport const OlObjectAction = {\n  CREATE: 'create',\n  MOUNT: 'mount',\n  UNMOUNT: 'unmount',\n  DESTROY: 'destroy',\n}\n\n/**\n * Basic ol component mixin.\n * todo try to subscribe to generic change event here and update rev according to internal ol counter\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n    services,\n    eventBus,\n  ],\n  props: {\n    /**\n     * @type {string|number}\n     */\n    id: {\n      type: [String, Number],\n      default: uuid,\n      validator: value => value != null && value !== '',\n    },\n    /**\n     * Unique key for saving to identity map\n     * @type {string|number|undefined}\n     */\n    ident: [String, Number],\n  },\n  data () {\n    return {\n      rev: 0,\n      currentId: this.id,\n    }\n  },\n  computed: {\n    /**\n     * @type {string}\n     */\n    vmClass () {\n      return kebabCase(this.$options.name)\n    },\n    /**\n     * @type {string}\n     */\n    vmId () {\n      return [this.vmClass, this.currentId].filter(identity).join('.')\n    },\n    /**\n     * @type {string}\n     */\n    vmName () {\n      return [this.$options.name, this.currentId].filter(identity).join('.')\n    },\n    /**\n     * @type {string|undefined}\n     */\n    olObjIdent () {\n      if (!this.ident) return\n\n      return this.makeIdent(this.ident)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$olObject) return\n\n      if (this.currentId !== this.getIdInternal()) {\n        this.currentId = this.getIdInternal()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'id',\n      'currentId',\n      'olObjIdent',\n    ]),\n  },\n  async created () {\n    /**\n     * @type {{warn: (function(...[*]): void), log: (function(...[*]): void), error: (function(...[*]): void)}}\n     * @private\n     */\n    this._logger = newLogger(this.vmName)\n    /**\n     * @type {number}\n     * @private\n     */\n    this._olObjectState = OlObjectState.UNDEF\n    /**\n     * @type {module:ol/Object~BaseObject}\n     * @private\n     */\n    this._olObject = undefined\n    /**\n     * @type {Observable}\n     * @private\n     */\n    this._olObjectEvents = this::newOlObjectEventsObs()\n\n    this::defineDebounceMethods()\n    this::defineServices()\n\n    await this::execInit(false)\n  },\n  async mounted () {\n    await this::execMount()\n  },\n  async beforeDestroy () {\n    await this::execUnmount(true)\n  },\n  async destroyed () {\n    await this::execDeinit()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>} Resolves when initialization completes\n     * @protected\n     */\n    beforeInit () {},\n    /**\n     * @return {Promise<void>} Resolves when initialization completes\n     * @protected\n     */\n    async init () {\n      this._olObject = await this.instanceFactoryCall(this.olObjIdent, ::this.createOlObject)\n      this._olObject[VM_PROP] || (this._olObject[VM_PROP] = [])\n\n      // for loaded from IdentityMap\n      if (!this._olObject[VM_PROP].includes(this)) {\n        this._olObject[VM_PROP].push(this)\n      }\n\n      await this.changed()\n      this.subscribeAll()\n    },\n    /**\n     * @return {module:ol/Object~BaseObject|Promise<module:ol/Object~BaseObject>}\n     * @protected\n     * @abstract\n     */\n    createOlObject () {\n      throw new Error(`${this.vmName} not implemented method: createOlObject()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async deinit () {\n      this.unsubscribeAll()\n      this.unsetInstances()\n\n      if (this._olObject) {\n        this._olObject[VM_PROP] = this._olObject[VM_PROP].filter(vm => vm !== this)\n        this._olObject = undefined\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    beforeMount () {},\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    mount () {},\n    /**\n     * @return {void|Promise<void>}\n     * @protected\n     */\n    unmount () {},\n    /**\n     * Refresh internal ol objects\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      let olObj\n      try {\n        olObj = await this.resolveOlObject()\n        if (olObj instanceof Observable) {\n          return new Promise(resolve => {\n            olObj.once('change', () => resolve())\n            olObj.changed()\n          })\n        }\n      } catch (err) {\n        // todo check why this catch not catching OLObjectNotInitializedError from resolveOlObject\n      }\n\n      return this.changed()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRefresh () {\n      try {\n        await this.debounceRefresh()\n      } catch (err) {}\n    },\n    /**\n     * Internal usage only in components that doesn't support refreshing.\n     * @return {Promise<void>}\n     * @protected\n     */\n    async remount () {\n      if (this.$olObjectState === OlObjectState.MOUNTED) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remounting...')\n        }\n\n        await this::execUnmount()\n        await this::execMount()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount discarded')\n        }\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRemount () {\n      if ([\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount scheduled')\n        }\n\n        await this.debounceRemount()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount discarded')\n        }\n      }\n    },\n    /**\n     * Only for internal purpose to support watching for properties\n     * for which OpenLayers doesn't provide setters.\n     * @return {Promise}\n     * @protected\n     */\n    async recreate () {\n      if ([\n        OlObjectState.CREATED,\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n        OlObjectState.UNMOUNTING,\n        OlObjectState.UNMOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreating...')\n        }\n\n        const mounted = [\n          OlObjectState.MOUNTING,\n          OlObjectState.MOUNTED,\n        ].includes(this.$olObjectState)\n        if (mounted) {\n          await this::execUnmount()\n        }\n\n        await this::execDeinit()\n        await this::execInit()\n\n        if (mounted) {\n          await this::execMount()\n        }\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate discarded')\n        }\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRecreate () {\n      if ([\n        OlObjectState.CREATING,\n        OlObjectState.CREATED,\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n        OlObjectState.UNMOUNTING,\n        OlObjectState.UNMOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate scheduled')\n        }\n\n        await this.debounceRecreate()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate discarded')\n        }\n      }\n    },\n    /**\n     * Redefine for easy call in child components\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return this::services.methods.getServices()\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToOlObjectEvents()\n    },\n    /**\n     * @returns {Promise<Object>}\n     * @throws {Error} If underlying OpenLayers object not initialized (incorrect initialization, already destroy).\n     */\n    async resolveOlObject () {\n      await this.$createPromise\n\n      return this.$olObject || throw new OLObjectNotInitializedError(`${this.vmName} OpenLayers object is undefined`)\n    },\n    /**\n     * @return {Promise}\n     */\n    async $nextTickPromise () {\n      return new Promise(::this.$nextTick)\n    },\n    /**\n     * @return {string|number}\n     */\n    getId () {\n      return coalesce(this.$olObject && this.getIdInternal(), this.currentId)\n    },\n    /**\n     * @return {*}\n     * @protected\n     */\n    getIdInternal () {\n      if (this.$olObject instanceof OlObject) {\n        return this.$olObject.get('id')\n      }\n\n      return this.$olObject.id\n    },\n    /**\n     * @param {string|number} id\n     */\n    setId (id) {\n      assert(id != null && id !== '', 'Invalid id')\n\n      if (this.currentId !== id) {\n        this.currentId = id\n      }\n      this.$olObject && this.setIdInternal(id)\n    },\n    /**\n     * @param {*} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (this.$olObject instanceof OlObject) {\n        if (this.$olObject.get('id') !== id) {\n          this.$olObject.set('id', id)\n        }\n\n        return\n      }\n\n      if (this.$olObject.id !== id) {\n        this.$olObject.id = id\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async changed () {\n      this.rev++\n      await this.$nextTickPromise()\n    },\n    /**\n     * @param {string|number} value\n     * @protected\n     */\n    idChanged (value) {\n      this.setId(value)\n    },\n    /**\n     * @param {string|number} value\n     * @protected\n     */\n    currentIdChanged (value) {\n      if (value === this.id) return\n\n      this.$emit('update:id', value)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    olObjIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$olObject) {\n        this.setInstance(value, this.$olObject)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this.setId(this.getId())\n    },\n  },\n}\n\nfunction defineDebounceMethods () {\n  this.debounceRefresh = debounce(::this.refresh, FRAME_TIME)\n  this.debounceRemount = debounce(::this.remount, FRAME_TIME)\n  this.debounceRecreate = debounce(::this.recreate, FRAME_TIME)\n  this.debounceChanged = debounce(::this.changed, FRAME_TIME)\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {{warn: (function(...[*]): void), log: (function(...[*]): void), error: (function(...[*]): void)}}\n     */\n    $logger: {\n      enumerable: true,\n      get: () => this._logger,\n    },\n    /**\n     * @type {string}\n     */\n    $olObjectState: {\n      enumerable: true,\n      get: () => this._olObjectState,\n    },\n    /**\n     * @type {module:ol/Object~BaseObject|undefined}\n     */\n    $olObject: {\n      enumerable: true,\n      get: () => this._olObject,\n    },\n    $olObjectEvents: {\n      enumerable: true,\n      get: () => this._olObjectEvents,\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $createPromise: {\n      enumerable: true,\n      get: () => this::newLifecyclePromise(\n        OlObjectAction.CREATE,\n        OlObjectEvent.CREATED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n        },\n      ),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $mountPromise: {\n      enumerable: true,\n      get: () => this.$createPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.MOUNT,\n        OlObjectEvent.MOUNTED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n        },\n      )),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $unmountPromise: {\n      enumerable: true,\n      get: () => this.$mountPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.UNMOUNT,\n        OlObjectEvent.UNMOUNTED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n          [OlObjectState.UNMOUNTING]: [OlObjectAction.UNMOUNT, OlObjectEvent.UNMOUNTED],\n        },\n      )),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $destroyPromise: {\n      enumerable: true,\n      get: () => this.$unmountPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.DESTROY,\n        OlObjectEvent.DESTROYED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n          [OlObjectState.UNMOUNTING]: [OlObjectAction.UNMOUNT, OlObjectEvent.UNMOUNTED],\n          [OlObjectState.DESTROYING]: [OlObjectAction.DESTROY, OlObjectEvent.DESTROYED],\n        },\n      )),\n    },\n  })\n}\n\nfunction newOlObjectEventsObs () {\n  return mergeObs(\n    ...Object.values(OlObjectEvent)\n      .map(name => fromVueEvent(this.$eventBus, name, args => ({ name, args: isArray(args) ? args : [args] }))\n        .pipe(\n          filterObs(({ args }) => args[0] === this || args[1] === this),\n        )),\n  ).pipe(\n    publishReplay(),\n    refCount(),\n  )\n}\n\nfunction newLifecyclePromise (action, endEvent, startStates) {\n  const newFinishObs = (action, endEvent) => raceObs(\n    this.$olObjectEvents.pipe(filterObs(({ name }) => name === endEvent)),\n    this.$olObjectEvents.pipe(filterObs(({ name, args }) => {\n      return name === OlObjectEvent.ERROR &&\n        args[0] instanceof LifecycleError &&\n        args[0].action === action\n    })),\n  )\n\n  return mergeObs(\n    newFinishObs(action, endEvent),\n    this.$olObjectEvents.pipe(\n      filterObs(({ name, args }) => {\n        return name === OlObjectEvent.ERROR &&\n          args[0] instanceof CanceledError\n      }),\n    ),\n  ).pipe(\n    firstObs(),\n    mergeMap(evt => {\n      let obs = obsOf(evt)\n      // If at the time of CancelError the ol object stay in some intermediate state\n      // we need to delay observable emit until current hook complete\n      if (\n        evt.name === OlObjectEvent.ERROR &&\n        evt.args[0] instanceof CanceledError &&\n        startStates[this.$olObjectState] != null\n      ) {\n        obs = obs.pipe(delayWhen(() => newFinishObs(...startStates[this.$olObjectState])))\n      }\n      return obs\n    }),\n    mergeMap(evt => {\n      if (evt.name === OlObjectEvent.ERROR) {\n        return throwErrorObs(evt.args[0])\n      }\n      return obsOf(evt)\n    }),\n    mapObs(({ args }) => args.length === 1 ? args[0] : args),\n  ).toPromise()\n}\n\n/**\n * @param {boolean} [resetEventsObs=true]\n * @returns {Promise<void>}\n * @private\n */\nasync function execInit (resetEventsObs = true) {\n  const prevState = this._olObjectState\n\n  if (resetEventsObs) {\n    this._olObjectEvents = this::newOlObjectEventsObs()\n  }\n  this._olObjectEvents.subscribe()\n\n  try {\n    const canceled = await Promise.race([\n      Promise.resolve(this.beforeInit()).then(() => false),\n      this.$olObjectEvents.pipe(\n        filterObs(({ name, args }) => {\n          return name === OlObjectEvent.ERROR &&\n            args[0] instanceof CanceledError\n        }),\n        firstObs(),\n      ).toPromise()\n        .then(() => true),\n    ])\n    if (canceled) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.CREATE} canceled`)\n      }\n      return\n    }\n\n    this._olObjectState = OlObjectState.CREATING\n\n    await this.init()\n\n    this._olObjectState = OlObjectState.CREATED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.CREATED}`)\n    }\n\n    this.$emit(OlObjectEvent.CREATED, this)\n    this.$eventBus.$emit(OlObjectEvent.CREATED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.CREATE)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, lcErr, this)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, lcErr, this)\n\n    throw lcErr\n  }\n}\n\n/**\n * @return {Promise<void>}\n * @private\n */\nasync function execMount () {\n  const prevState = this._olObjectState\n\n  try {\n    await this.$createPromise\n\n    const canceled = await Promise.race([\n      Promise.resolve(this.beforeMount()).then(() => false),\n      this.$olObjectEvents.pipe(\n        filterObs(({ name, args }) => {\n          return name === OlObjectEvent.ERROR &&\n            args[0] instanceof CanceledError\n        }),\n        firstObs(),\n      ).toPromise()\n        .then(() => true),\n    ])\n    if (canceled) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.MOUNT} canceled`)\n      }\n      return\n    }\n\n    this._olObjectState = OlObjectState.MOUNTING\n\n    await this.mount()\n\n    this._olObjectState = OlObjectState.MOUNTED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.MOUNTED}`)\n    }\n\n    this.$emit(OlObjectEvent.MOUNTED, this)\n    this.$eventBus.$emit(OlObjectEvent.MOUNTED, this)\n  } catch (err) {\n    if (err instanceof CanceledError) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.MOUNT} canceled`)\n      }\n\n      return\n    }\n\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.MOUNT)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, lcErr, this)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, lcErr, this)\n\n    throw lcErr\n  }\n}\n\n/**\n * @param {boolean} [fireCancel=false]\n * @return {void|Promise<void>}\n * @private\n */\nasync function execUnmount (fireCancel = false) {\n  const prevState = this._olObjectState\n\n  if (fireCancel) {\n    if ([\n      OlObjectState.UNDEF,\n      OlObjectState.CREATING,\n      OlObjectState.CREATED,\n      OlObjectState.MOUNTING,\n    ].includes(this.$olObjectState)) {\n      const err = new CanceledError(`${this.vmName} ol object lifecycle canceled`)\n      this.$emit(OlObjectEvent.ERROR, err, this)\n      this.$eventBus.$emit(OlObjectEvent.ERROR, err, this)\n    }\n  }\n\n  try {\n    try {\n      await this.$mountPromise\n    } catch (err) {\n      if (err instanceof CanceledError) {\n        if (this.$olObjectState !== OlObjectState.MOUNTED) {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(`ol object ${OlObjectAction.UNMOUNT} canceled`)\n          }\n\n          return\n        }\n      } else {\n        throw err\n      }\n    }\n\n    this._olObjectState = OlObjectState.UNMOUNTING\n\n    await this.unmount()\n\n    this._olObjectState = OlObjectState.UNMOUNTED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.UNMOUNTED}`)\n    }\n\n    this.$emit(OlObjectEvent.UNMOUNTED, this)\n    this.$eventBus.$emit(OlObjectEvent.UNMOUNTED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.UNMOUNT)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, this, lcErr)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, this, lcErr)\n\n    throw lcErr\n  }\n}\n\n/**\n * @returns {Promise<void>}\n * @private\n */\nasync function execDeinit () {\n  const prevState = this._olObjectState\n\n  try {\n    try {\n      await this.$unmountPromise\n    } catch (err) {\n      if (err instanceof CanceledError) {\n        if (this.$olObjectState !== OlObjectState.CREATED) {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(`ol object ${OlObjectAction.DESTROY} canceled`)\n          }\n\n          return\n        }\n      } else {\n        throw err\n      }\n    }\n\n    this._olObjectState = OlObjectState.DESTROYING\n\n    await this.deinit()\n\n    this._olObjectState = OlObjectState.DESTROYED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.DESTROYED}`)\n    }\n\n    this.$emit(OlObjectEvent.DESTROYED, this)\n    this.$eventBus.$emit(OlObjectEvent.DESTROYED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.DESTROY)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, this, lcErr)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, this, lcErr)\n\n    throw lcErr\n  }\n}\n\nfunction subscribeToOlObjectEvents () {\n  if (this.$olObject instanceof Observable) {\n    const setterKey = addPrefix('set')\n    const propChanges = obsFromOlChangeEvent(this.$olObject, [\n      'id',\n    ], true, evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    }))\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n    this.subscribeTo(\n      mergeObs(\n        obsFromOlEvent(this.$olObject, EventType.CHANGE),\n        obsFromOlEvent(this.$olObject, ObjectEventType.PROPERTYCHANGE),\n      ),\n      ::this.debounceChanged,\n    )\n\n    this.subscribeTo(obsFromOlEvent(this.$olObject, EventType.ERROR), evt => this.$emit(OlObjectEvent.ERROR, evt))\n  } else {\n    this.subscribeTo(interval(FRAME_TIME), ::this.syncNonObservable)\n  }\n}\n\nexport class LifecycleError extends Error {\n  name = 'LifecycleError'\n\n  constructor (err, vmName, action) {\n    if (err instanceof LifecycleError) {\n      err = err.err\n    }\n    const baseMessage = `${vmName} ${action} ol object failed`\n    const message = `${baseMessage}: ${err.message}`\n    super(message)\n    this.vmName = vmName\n    this.action = action\n    this.err = err\n    if (err.stack) {\n      this.stack = `${baseMessage}: ${err.stack}`\n    } else {\n      if (isFunction(Error.captureStackTrace)) {\n        Error.captureStackTrace(this, this.constructor)\n      } else {\n        this.stack = (new Error(message)).stack\n      }\n    }\n  }\n}\n\nexport class CanceledError extends Error {\n  name = 'CanceledError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport function isCreateError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.CREATE\n}\n\nexport function isMountError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.MOUNT\n}\n\nexport function isUnmountError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.UNMOUNT\n}\n\nexport function isDestroyError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.DESTROY\n}\n\nexport class OLObjectNotInitializedError extends Error {\n  name = 'OLObjectNotInitializedError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport function makeChangeOrRecreateWatchers (props, deepProps = []) {\n  return makeWatchers(props, prop => ({\n    deep: deepProps.includes(prop),\n    handler (...args) {\n      const handler = this[`${prop}Changed`]\n      if (isFunction(handler)) {\n        return handler(...args)\n      }\n\n      if (isEqual(args[0], args[1])) return\n\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`${prop} changed, scheduling recreate... %O ===> %O`, args[1], args[0])\n      }\n\n      return this.scheduleRecreate()\n    },\n  }))\n}\n","import { cleanSourceParams } from '../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEqual,\n  lowerFirst,\n  makeWatchers,\n  reduce,\n  upperFirst,\n  isObjectLike,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\nconst serialize = value => {\n  if (value == null) return\n\n  return typeof value === 'object' ? JSON.stringify(value) : value\n}\nconst cleanArcGisSourceParams = params => cleanSourceParams(params, [\n  'FORMAT',\n  'F',\n  'LAYERS',\n  'LAYERDEFS',\n  'DYNAMICLAYERS',\n  'DPI',\n  'TRANSPARENT',\n  'TIME',\n  'LAYERTIMEOPTIONS',\n  'GDBVERSION',\n  'MAPSCALE',\n  'ROTATION',\n  'DATUMTRANSFORMATIONS',\n  'MAPRANGEVALUES',\n  'LAYERRANGEVALUES',\n  'LAYERPARAMETERVALUES',\n  'HISTORICMOMENT',\n])\n\n/**\n * Shared ArcGIS source params and methods.\n */\nexport default {\n  props: {\n    // ArcGIS params from https://developers.arcgis.com/rest/services-reference/export-map.htm\n    /**\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string}\n     */\n    format: {\n      type: String,\n      default: 'PNG32',\n    },\n    /**\n     * @type {string|string[]|undefined}\n     */\n    layers: [String, Array],\n    /**\n     * @type {Object|string|undefined}\n     */\n    layerDefs: [Object, String],\n    /**\n     * @type {Object[]|string|undefined}\n     */\n    dynamicLayers: [Array, String],\n    /**\n     * @type {number|undefined}\n     */\n    dpi: Number,\n    /**\n     * @type {boolean}\n     */\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|string[]|undefined}\n     */\n    time: [String, Array],\n    /**\n     * @type {Object|string|undefined}\n     */\n    layerTimeOptions: [Object, String],\n    /**\n     * @type {string|undefined}\n     */\n    gdbVersion: String,\n    /**\n     * @type {string|undefined}\n     */\n    mapScale: String,\n    /**\n     * @type {number|undefined}\n     */\n    rotation: Number,\n    /**\n     * @type {Array|string|undefined}\n     */\n    datumTransformations: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    mapRangeValues: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    layerRangeValues: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    layerParameterValues: [Array, String],\n    /**\n     * @type {number|undefined}\n     */\n    historicMoment: Number,\n    /**\n     * Additional ArcGIS request parameters\n     * @params {Object|undefined}\n     */\n    params: Object,\n  },\n  data () {\n    return {\n      currentParams: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    inputLayers () {\n      return isArray(this.layers) ? this.layers.join(',') : this.layers\n    },\n    /**\n     * @type {string|undefined}\n     */\n    inputTime () {\n      return isArray(this.time) ? this.time.join(',') : this.time\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerDefs () {\n      return serialize(this.layerDefs)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputDynamicLayers () {\n      return serialize(this.dynamicLayers)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerTimeOptions () {\n      return serialize(this.layerTimeOptions)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputDatumTransformations () {\n      return serialize(this.datumTransformations)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputMapRangeValues () {\n      return serialize(this.mapRangeValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerRangeValues () {\n      return serialize(this.layerRangeValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerParameterValues () {\n      return serialize(this.layerParameterValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputHistoricMoment () {\n      return serialize(this.historicMoment)\n    },\n    /**\n     * @returns {Object|null}\n     */\n    customParams () {\n      return this.params ? cleanArcGisSourceParams(this.params) : undefined\n    },\n    /**\n     * @returns {Object}\n     */\n    inputParams () {\n      return {\n        ...this.customParams || {},\n        LAYERS: this.inputLayers,\n        FORMAT: this.format,\n        LAYERDEFS: this.inputLayerDefs,\n        DYNAMICLAYERS: this.inputDynamicLayers,\n        DPI: this.dpi,\n        TRANSPARENT: this.transparent,\n        TIME: this.inputTime,\n        LAYERTIMEOPTIONS: this.inputLayerTimeOptions,\n        GDBVERSION: this.gdbVersion,\n        MAPSCALE: this.mapScale,\n        ROTATION: this.rotation,\n        DATUMTRANSFORMATIONS: this.inputDatumTransformations,\n        MAPRANGEVALUES: this.inputMapRangeValues,\n        LAYERRANGEVALUES: this.inputLayerRangeValues,\n        LAYERPARAMETERVALUES: this.inputLayerParameterValues,\n        HISTORICMOMENT: this.inputHistoricMoment,\n      }\n    },\n    .../*#__PURE__*/reduce([\n      'format',\n      'inputLayers',\n      'inputLayerDefs',\n      'inputDynamicLayers',\n      'dpi',\n      'transparent',\n      'inputTime',\n      'inputLayerTimeOptions',\n      'gdbVersion',\n      'mapScale',\n      'rotation',\n      'inputDatumTransformations',\n      'inputMapRangeValues',\n      'inputLayerRangeValues',\n      'inputLayerParameterValues',\n      'inputHistoricMoment',\n    ], (props, inProp) => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const curProp = 'current' + upperFirst(prop)\n      props[curProp] = function () {\n        return coalesce((this.currentParams || {})[prop.toUpperCase()], (this.inputParams || {})[prop.toUpperCase()])\n      }\n\n      return props\n    }, {}),\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (!isEqual(this.currentParams, this.$source.getParams())) {\n        this.currentParams = this.$source.getParams()\n      }\n    },\n    .../*#__PURE__*/makeWatchers([\n      'currentFormat',\n      'currentLayers',\n      'currentLayerDefs',\n      'currentDynamicLayers',\n      'currentDpi',\n      'currentTransparent',\n      'currentTime',\n      'currentLayerTimeOptions',\n      'currentGdbVersion',\n      'currentMapScale',\n      'currentRotation',\n      'currentDatumTransformations',\n      'currentMapRangeValues',\n      'currentLayerRangeValues',\n      'currentLayerParameterValues',\n      'currentHistoricMoment',\n    ], curProp => function (value) {\n      const prop = lowerFirst(curProp.slice(7))\n      const inProp = hasProp(this, 'input' + upperFirst(prop)) ? 'input' + upperFirst(prop) : prop\n\n      if (isEqual(value, this[inProp])) return\n\n      this.$emit('update:' + prop, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'inputParams',\n      'currentParams',\n    ], [\n      'inputParams',\n      'currentParams',\n    ]),\n  },\n  created () {\n    this.currentParams = this.inputParams && clonePlainObject(this.inputParams)\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     */\n    getParams () {\n      return coalesce(this.$source?.getParams(), this.currentParams)\n    },\n    /**\n     * @param {Object} params\n     */\n    updateParams (params) {\n      params = reduce({ ...this.currentParams, ...params }, (params, value, name) => ({\n        ...params,\n        [name.toUpperCase()]: value,\n      }), {})\n\n      if (!isEqual(params, this.currentParams)) {\n        this.currentParams = params\n      }\n      if (this.$source && !isEqual(params, this.$source.getParams())) {\n        this.$source.updateParams(params)\n      }\n    },\n    /**\n     * @param {string} param\n     * @param {*} value\n     */\n    updateParam (param, value) {\n      this.updateParams({ [param.toUpperCase()]: value })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    inputParamsChanged (value) {\n      this.updateParams(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentParamsChanged (value) {\n      value = value ? cleanArcGisSourceParams(value) : undefined\n      if (isEqual(value, this.customParams)) return\n\n      this.$emit('update:params', value && clonePlainObject(value))\n    },\n  },\n}\n","import {\n  COORD_PRECISION,\n  EPSG_3857,\n  readGeoJsonFeature,\n  readGeoJsonGeometry,\n  transformExtent,\n  transformLine,\n  transformMultiLine,\n  transformMultiPoint,\n  transformMultiPolygon,\n  transformPoint,\n  transformPolygon,\n  writeGeoJsonFeature,\n  writeGeoJsonGeometry,\n} from '../ol-ext'\nimport { coalesce } from '../utils'\n\n/**\n * Mixin with helpers for projection transforms between current view projection and global defined projection.\n */\nexport default {\n  computed: {\n    /**\n     * @return {module:ol/proj~ProjectionLike}\n     */\n    resolvedViewProjection () {\n      return coalesce(\n        this.viewProjection, // may or may not be present\n        EPSG_3857,\n      )\n    },\n    /**\n     * @return {module:ol/proj~ProjectionLike}\n     */\n    resolvedDataProjection () {\n      return coalesce(\n        this.dataProjection, // may or may not be present\n        this.$options?.dataProjection, // may or may not be present\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    resolvedViewProjection (...args) {\n      return this.resolvedViewProjectionChanged(...args)\n    },\n    resolvedDataProjection (...args) {\n      return this.resolvedDataProjectionChanged(...args)\n    },\n  },\n  methods: {\n    pointToViewProj (point, precision = COORD_PRECISION) {\n      return transformPoint(point, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    pointToDataProj (point, precision = COORD_PRECISION) {\n      return transformPoint(point, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    lineToViewProj (line, precision = COORD_PRECISION) {\n      return transformLine(line, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    lineToDataProj (line, precision = COORD_PRECISION) {\n      return transformLine(line, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    polygonToViewProj (polygon, precision = COORD_PRECISION) {\n      return transformPolygon(polygon, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    polygonToDataProj (polygon, precision = COORD_PRECISION) {\n      return transformPolygon(polygon, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiPointToViewProj (multiPoint, precision = COORD_PRECISION) {\n      return transformMultiPoint(multiPoint, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiPointToDataProj (multiPoint, precision = COORD_PRECISION) {\n      return transformMultiPoint(multiPoint, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiLineToViewProj (multiLine, precision = COORD_PRECISION) {\n      return transformMultiLine(multiLine, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiLineToDataProj (multiLine, precision = COORD_PRECISION) {\n      return transformMultiLine(multiLine, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiPolygonToViewProj (multiPolygon, precision = COORD_PRECISION) {\n      return transformMultiPolygon(multiPolygon, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiPolygonToDataProj (multiPolygon, precision = COORD_PRECISION) {\n      return transformMultiPolygon(multiPolygon, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n\n    extentToViewProj (extent, precision = COORD_PRECISION) {\n      return transformExtent(extent, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    extentToDataProj (extent, precision = COORD_PRECISION) {\n      return transformExtent(extent, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n\n    writeGeometryInDataProj (geometry, precision = COORD_PRECISION) {\n      return writeGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    writeGeometryInViewProj (geometry, precision = COORD_PRECISION) {\n      return writeGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    readGeometryInDataProj (geometry, precision = COORD_PRECISION) {\n      return readGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    readGeometryInViewProj (geometry, precision = COORD_PRECISION) {\n      return readGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n\n    writeFeatureInDataProj (feature, precision = COORD_PRECISION) {\n      return writeGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    writeFeatureInViewProj (feature, precision = COORD_PRECISION) {\n      return writeGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    readFeatureInDataProj (feature, precision = COORD_PRECISION) {\n      return readGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    readFeatureInViewProj (feature, precision = COORD_PRECISION) {\n      return readGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    resolvedViewProjectionChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:viewProjection', value)\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    resolvedDataProjectionChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:dataProjection', value)\n    },\n  },\n}\n","import { extractChildren } from '../utils'\n\n/**\n * Renders stub VNode for component.\n */\nexport default {\n  /**\n   * @param {function} h\n   * @returns {VNode}\n   */\n  render (h) {\n    const options = this.$options?.stubVNode || {}\n    // render as HTML comment\n    if (options.empty) {\n      const vnode = h()\n      if (typeof options.empty === 'string') {\n        vnode.text = options.empty\n      } else if (typeof options.empty === 'function') {\n        vnode.text = this::options.empty()\n      }\n\n      return vnode\n    }\n\n    let children\n    if (options.slots === false) {\n      children = undefined\n    } else {\n      children = extractChildren(this.$slots, options.slots)\n    }\n\n    const attrs = typeof options.attrs === 'function'\n      ? this::options.attrs()\n      : options.attrs\n\n    const data = {\n      attrs,\n      style: {\n        display: 'none !important',\n      },\n    }\n\n    return h(options.tag || 'i', data, children)\n  },\n}\n","import { race as raceObs } from 'rxjs'\nimport { filter as filterObs, mapTo } from 'rxjs/operators'\nimport { fromVueEvent as obsFromVueEvent, fromVueWatcher as obsFromVueWatcher } from '../rx-ext'\nimport { hasAncestorVm, hasProp, stubTrue, waitFor } from '../utils'\nimport olCmp, { CanceledError, isCreateError, OlObjectEvent } from './ol-cmp'\n\nexport default {\n  methods: {\n    async beforeInit () {\n      try {\n        await waitFor(\n          () => this.$mapVm != null,\n          raceObs(\n            this.$olObjectEvents.pipe(\n              filterObs(({ name, args }) => {\n                return name === OlObjectEvent.ERROR &&\n                  args[0] instanceof CanceledError\n              }),\n            ),\n            obsFromVueEvent(this.$eventBus, OlObjectEvent.ERROR).pipe(\n              filterObs(([err, vm]) => {\n                return isCreateError(err) &&\n                  hasProp(vm, '$map') &&\n                  hasAncestorVm(this, vm)\n              }),\n            ),\n          ).pipe(\n            mapTo(stubTrue()),\n          ),\n        )\n        if (this.$mapVm.resolvedViewProjection !== this.viewProjection) {\n          this.viewProjection = this.$mapVm.resolvedViewProjection\n        }\n        if (this.$mapVm.resolvedDataProjection !== this.dataProjection) {\n          this.dataProjection = this.$mapVm.resolvedDataProjection\n        }\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$mapVm.resolvedViewProjection),\n          ({ value }) => {\n            if (value !== this.viewProjection) {\n              this.viewProjection = value\n            }\n          },\n        )\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$mapVm.resolvedDataProjection),\n          ({ value }) => {\n            if (value !== this.dataProjection) {\n              this.dataProjection = value\n            }\n          },\n        )\n        await this.$nextTickPromise()\n\n        return this::olCmp.methods.beforeInit()\n      } catch (err) {\n        err.message = `${this.vmName} wait for $mapVm injection: ${err.message}`\n        throw err\n      }\n    },\n  },\n}\n","import { get as getProj } from 'ol/proj'\nimport { EPSG_3857, getLayerId, initializeLayer, roundExtent, setLayerId, transformExtent } from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isArray, isEqual, isNumber, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base layer mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/layer/Base\n    /**\n     * A CSS class name to set to the layer element.\n     * @type {string}\n     */\n    className: {\n      type: String,\n      default: 'ol-layer',\n    },\n    /**\n     * @type {number}\n     */\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {boolean}\n     */\n    visible: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {number[]|undefined}\n     */\n    extent: {\n      type: Array,\n      validator: value => value.length === 4 && value.every(isNumber),\n    },\n    /**\n     * @type {string|undefined}\n     */\n    extentProjection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n    /**\n     * @type {number|undefined}\n     */\n    zIndex: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    maxResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minZoom: Number,\n    /**\n     * @type {number|undefined}\n     */\n    maxZoom: Number,\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentExtentViewProj: roundExtent(this.extent),\n      currentMaxResolution: this.maxResolution,\n      currentMinResolution: this.minResolution,\n      currentMaxZoom: this.maxZoom,\n      currentMinZoom: this.minZoom,\n      currentOpacity: this.opacity,\n      currentVisible: this.visible,\n      currentZIndex: this.zIndex,\n    }\n  },\n  computed: {\n    resolvedExtentProjection () {\n      return coalesce(this.extentProjection, this.resolvedDataProjection)\n    },\n    extentDataProj () {\n      return roundExtent(this.extent)\n    },\n    extentViewProj () {\n      return transformExtent(this.extent, this.resolvedExtentProjection, this.resolvedViewProjection)\n    },\n    currentExtentDataProj () {\n      return transformExtent(this.currentExtentViewProj, this.resolvedViewProjection, this.resolvedExtentProjection)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (!isEqual(this.currentExtentViewProj, this.$layer.getExtent())) {\n        this.currentExtentViewProj = this.$layer.getExtent()\n      }\n      if (this.currentMaxResolution !== this.$layer.getMaxResolution()) {\n        this.currentMaxResolution = this.$layer.getMaxResolution()\n      }\n      if (this.currentMinResolution !== this.$layer.getMinResolution()) {\n        this.currentMinResolution = this.$layer.getMinResolution()\n      }\n      if (this.currentMaxZoom !== this.$layer.getMaxZoom()) {\n        this.currentMaxZoom = this.$layer.getMaxZoom()\n      }\n      if (this.currentMinZoom !== this.$layer.getMinZoom()) {\n        this.currentMinZoom = this.$layer.getMinZoom()\n      }\n      if (this.currentOpacity !== this.$layer.getOpacity()) {\n        this.currentOpacity = this.$layer.getOpacity()\n      }\n      if (this.currentVisible !== this.$layer.getVisible()) {\n        this.currentVisible = this.$layer.getVisible()\n      }\n      if (this.currentZIndex !== this.$layer.getZIndex()) {\n        this.currentZIndex = this.$layer.getZIndex()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'className',\n      'opacity',\n      'currentOpacity',\n      'visible',\n      'currentVisible',\n      'extentViewProj',\n      'currentExtentDataProj',\n      'zIndex',\n      'currentZIndex',\n      'minResolution',\n      'currentMinResolution',\n      'maxResolution',\n      'currentMaxResolution',\n      'minZoom',\n      'currentMinZoom',\n      'maxZoom',\n      'currentMaxZoom',\n    ], [\n      'extentViewProj',\n      'currentExtentDataProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n\n    this.currentExtentViewProj = this.extentViewProj?.slice()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/layer/Base~BaseLayer>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeLayer(await this.createLayer(), this.currentId)\n    },\n    /**\n     * @return {module:ol/layer/Base~BaseLayer|Promise<module:ol/layer/Base~BaseLayer>}\n     * @protected\n     * @abstract\n     */\n    createLayer () {\n      throw new Error(`${this.vmName} not implemented method: createLayer`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$layersContainer?.addLayer(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$layersContainer?.removeLayer(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get layerVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @returns {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getLayerId(this.$layer)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setLayerId(this.$layer, id)\n    },\n    /**\n     * @return {Promise<module:ol/layer/Base~BaseLayer>}\n     */\n    resolveLayer: olCmp.methods.resolveOlObject,\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]|undefined}\n     */\n    getExtent (viewProj = false) {\n      if (!this.$layer) {\n        return viewProj ? this.currentExtentViewProj : this.currentExtentDataProj\n      }\n\n      const extent = this.$layer.getExtent()\n      if (viewProj) return roundExtent(extent)\n\n      return transformExtent(extent, this.resolvedViewProjection, this.resolvedExtentProjection)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     */\n    setExtent (extent, viewProj = false) {\n      assert(extent == null || (isArray(extent) && extent.length === 4), 'Invalid extent')\n      extent = viewProj\n        ? roundExtent(extent)\n        : transformExtent(extent, this.resolvedExtentProjection, this.resolvedViewProjection)\n\n      if (!isEqual(extent, this.currentExtentViewProj)) {\n        this.currentExtentViewProj = extent\n      }\n      if (this.$layer && !isEqual(extent, this.$layer.getExtent())) {\n        this.$layer.setExtent(extent)\n      }\n    },\n    /**\n     * @returns {number|undefined}\n     */\n    getMaxResolution () {\n      return coalesce(this.$layer?.getMaxResolution(), this.currentMaxResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setMaxResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid max resolution')\n\n      if (resolution !== this.currentMaxResolution) {\n        this.currentMaxResolution = resolution\n      }\n      if (this.$layer && resolution !== this.$layer.getMaxResolution()) {\n        this.$layer.setMaxResolution(resolution)\n      }\n    },\n    /**\n     * @returns {number|undefined}\n     */\n    getMinResolution () {\n      return coalesce(this.$layer?.getMinResolution(), this.currentMinResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setMinResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid min resolution')\n\n      if (resolution !== this.currentMinResolution) {\n        this.currentMinResolution = resolution\n      }\n      if (this.$layer && resolution !== this.$layer.getMinResolution()) {\n        this.$layer.getMinResolution(resolution)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getMaxZoom () {\n      return coalesce(this.$layer?.getMaxZoom(), this.currentMaxZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMaxZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid max zoom')\n\n      if (zoom !== this.currentMaxZoom) {\n        this.currentMaxZoom = zoom\n      }\n      if (this.$layer && zoom !== this.$layer.getMaxZoom()) {\n        this.$layer.setMaxZoom(zoom)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getMinZoom () {\n      return coalesce(this.$layer?.getMinZoom(), this.currentMinZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMinZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid min zoom')\n\n      if (zoom !== this.currentMinZoom) {\n        this.currentMinZoom = zoom\n      }\n      if (this.$layer && zoom !== this.$layer.getMinZoom()) {\n        this.$layer.setMinZoom(zoom)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getOpacity () {\n      return coalesce(this.$layer?.getOpacity(), this.currentOpacity)\n    },\n    /**\n     * @param {number} opacity\n     */\n    setOpacity (opacity) {\n      opacity = Number(opacity)\n      assert(isNumber(opacity), 'Invalid opacity')\n\n      if (opacity !== this.currentOpacity) {\n        this.currentOpacity = opacity\n      }\n      if (this.$layer && opacity !== this.$layer.getOpacity()) {\n        this.$layer.setOpacity(opacity)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getVisible () {\n      return coalesce(this.$layer?.getVisible(), this.currentVisible)\n    },\n    /**\n     * @param {boolean} visible\n     */\n    setVisible (visible) {\n      visible = !!visible\n\n      if (visible !== this.currentVisible) {\n        this.currentVisible = visible\n      }\n      if (this.$layer && visible !== this.$layer.getVisible()) {\n        this.$layer.setVisible(visible)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getZIndex () {\n      return coalesce(this.$layer?.getZIndex(), this.currentZIndex)\n    },\n    /**\n     * @param {number} zIndex\n     */\n    setZIndex (zIndex) {\n      zIndex = Number(zIndex)\n      assert(isNumber(zIndex), 'Invalid zIndex')\n\n      if (zIndex !== this.currentZIndex) {\n        this.currentZIndex = zIndex\n      }\n      if (this.$layer && zIndex !== this.$layer.getZIndex()) {\n        this.$layer.setZIndex(zIndex)\n      }\n    },\n    /**\n     * @param {number[]} pixel\n     * @return {boolean}\n     */\n    async isAtPixel (pixel) {\n      const layer = await this.resolveLayer()\n\n      return this.$mapVm.forEachLayerAtPixel(pixel, mapLayer => mapLayer === layer)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    opacityChanged (value) {\n      this.setOpacity(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentOpacityChanged (value) {\n      if (value === this.opacity) return\n\n      this.$emit('update:opacity', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    visibleChanged (value) {\n      this.setVisible(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentVisibleChanged (value) {\n      if (value === this.visible) return\n\n      this.$emit('update:visible', value)\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @protected\n     */\n    extentViewProjChanged (value) {\n      this.setExtent(value, true)\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @protected\n     */\n    currentExtentDataProjChanged (value) {\n      if (isEqual(value, this.extentDataProj)) return\n\n      this.$emit('update:extent', value.slice())\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    zIndexChanged (value) {\n      this.setZIndex(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentZIndexChanged (value) {\n      if (value === this.zIndex) return\n\n      this.$emit('update:zIndex', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    minResolutionChanged (value) {\n      this.setMinResolution(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMinResolutionChanged (value) {\n      if (value === this.minResolution) return\n\n      this.$emit('update:minResolution', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    maxResolutionChanged (value) {\n      this.setMaxResolution(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMaxResolutionChanged (value) {\n      if (value === this.maxResolution) return\n\n      this.$emit('update:maxResolution', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    minZoomChanged (value) {\n      this.setMinZoom(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMinZoomChanged (value) {\n      if (value === this.minZoom) return\n\n      this.$emit('update:minZoom', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    maxZoomChanged (value) {\n      this.setMaxZoom(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMaxZoomChanged (value) {\n      if (value === this.maxZoom) return\n\n      this.$emit('update:maxZoom', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/layer/Base~BaseLayer|undefined}\n     */\n    $layer: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $layersContainer: {\n      enumerable: true,\n      get: () => this.$services?.layersContainer,\n    },\n  })\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'opacity',\n    'visible',\n    'zIndex',\n    'minResolution',\n    'maxResolution',\n    'minZoom',\n    'maxZoom',\n    'extent',\n  ], true, evt => ({\n    ...evt,\n    setter: val => {\n      const args = [val]\n      if (evt.prop === 'extent') {\n        args.push(true)\n      }\n      this[setterKey(evt.prop)](...args)\n    },\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { Control, defaults as createDefaultControls } from 'ol/control'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getControlId, initializeControl } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf, isArray, isPlainObject } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/control/Control~Control|Object} ControlLike\n */\n\n/**\n * Controls collection\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @type {string|undefined}\n     */\n    controlsCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'controls_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'controlsCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/control/Control~Control>}\n     * @private\n     */\n    this._controlsCollection = this.instanceFactoryCall(this.controlsCollectionIdent, () => new Collection())\n    this._controlSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly controlsContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get controlsContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} defaultControls\n     */\n    initDefaultControls (defaultControls) {\n      this.getControls().forEach(control => {\n        if (control.get('vl_default')) {\n          this.removeControl(control)\n        }\n      })\n\n      let controls\n      if (isArray(defaultControls) || defaultControls instanceof Collection) {\n        controls = defaultControls\n      } else if (defaultControls !== false) {\n        controls = createDefaultControls(\n          isPlainObject(defaultControls)\n            ? defaultControls\n            : undefined,\n        )\n      }\n      if (controls) {\n        controls.forEach(control => control.set('vl_default', true))\n        this.addControls(controls)\n      }\n    },\n    /**\n     * @param {ControlLike} control\n     * @return {Control}\n     */\n    initializeControl (control) {\n      control = control?.$control || control\n      instanceOf(control, Control)\n\n      return initializeControl(control)\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} controls\n     */\n    addControls (controls) {\n      forEach(controls, ::this.addControl)\n    },\n    /**\n     * @param {ControlLike} control\n     */\n    addControl (control) {\n      control = this.initializeControl(control)\n\n      if (this.getControlById(getControlId(control))) return\n\n      this.$controlsCollection.push(control)\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} controls\n     */\n    removeControls (controls) {\n      forEach(controls, ::this.removeControl)\n    },\n    /**\n     * @param {ControlLike} control\n     */\n    removeControl (control) {\n      control = this.getControlById(getControlId(control?.$control || control))\n      if (!control) return\n\n      this.$controlsCollection.remove(control)\n    },\n    /**\n     * @return {void}\n     */\n    clearControls () {\n      this.$controlsCollection.clear()\n    },\n    /**\n     * @returns {Array<module:ol/control/Control~Control>}\n     */\n    getControls () {\n      return this.$controlsCollection.getArray().slice()\n    },\n    /**\n     * @returns {module:ol/Collection~Collection<module:ol/control/Control~Control>}\n     */\n    getControlsCollection () {\n      return this._controlsCollection\n    },\n    /**\n     * @param {string|number} controlId\n     * @returns {ControlLike}\n     */\n    getControlById (controlId) {\n      return find(this.getControls(), control => getControlId(control) === controlId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    controlsCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$controlsCollection) {\n        this.setInstance(value, this.$controlsCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $controlsCollection: {\n      enumerable: true,\n      get: this.getControlsCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$controlsCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeControl(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._controlSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$controlsCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._controlSubs[uid]) {\n        this.unsubscribe(this._controlSubs[uid])\n        delete this._controlSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'control', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':control', element)\n    })\n  })\n}\n","import { Geometry } from 'ol/geom'\nimport { isGeoJSONGeometry } from '../ol-ext'\nimport { assert, coalesce } from '../utils'\nimport projTransforms from './proj-transforms'\n\n/**\n * @typedef {Geometry|Object} GeometryLike\n */\n/**\n * @typedef {Object} GeometryTarget\n * @property {function(): Geometry|undefined} getGeometry\n * @property {function(Geometry|undefined): void} setGeometry\n */\n\n/**\n * Geometry container\n */\nexport default {\n  mixins: [\n    projTransforms,\n  ],\n  created () {\n    this._geometry = undefined\n    this._geometryVm = undefined\n\n    this::defineService()\n  },\n  methods: {\n    /**\n     * @returns {{readonly geometryContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get geometryContainer () { return vm },\n      }\n    },\n    /**\n     * @return {GeometryTarget|undefined}\n     * @protected\n     */\n    getGeometryTarget () {\n      throw new Error(`${this.vmName} not implemented method: getGeometryTarget()`)\n    },\n    /**\n     * @return {module:ol/geom/Geometry~Geometry|undefined}\n     */\n    getGeometry () {\n      return coalesce(this.getGeometryTarget()?.getGeometry(), this._geometry)\n    },\n    /**\n     * @return {Object}\n     */\n    getGeometryVm () {\n      return this._geometryVm\n    },\n    /**\n     * @param {GeometryLike|undefined} geom\n     * @param {boolean} [viewProj=false]\n     */\n    setGeometry (geom, viewProj = false) {\n      geom = geom?.$geometry || geom\n      if (isGeoJSONGeometry(geom)) {\n        if (viewProj) {\n          geom = this.readGeometryInViewProj(geom)\n        } else {\n          geom = this.readGeometryInDataProj(geom)\n        }\n      }\n      geom || (geom = undefined)\n      assert(!geom || geom instanceof Geometry, 'Invalid geometry')\n\n      const geomTarget = this.getGeometryTarget()\n      if (geomTarget && geom !== geomTarget.getGeometry()) {\n        geomTarget.setGeometry(geom)\n        this.scheduleRefresh()\n      }\n      if (geom !== this._geometry) {\n        this._geometry = geom\n        this._geometryVm = geom?.vm && geom.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineService () {\n  Object.defineProperties(this, {\n    $geometry: {\n      enumerable: true,\n      get: this.getGeometry,\n    },\n    $geometryVm: {\n      enumerable: true,\n      get: this.getGeometryVm,\n    },\n  })\n}\n","import { Style } from 'ol/style'\nimport { coalesce, hasProp, isArray, isEqual, isFunction } from '../utils'\n\n/**\n * @typedef {\n *            module:ol/style/Style~Style |\n *            Array<module:ol/style/Style~Style> |\n *            module:ol/style/Style~StyleFunction\n *          } OlStyleLike\n */\n/**\n * @typedef {Object} StyleTarget\n * @property {function(OlStyleLike|undefined): void} setStyle\n * @property {function(): OlStyleLike|undefined} getStyle\n */\n/**\n * @typedef {OlStyleLike|Object} StyleLike\n */\n\n/**\n * Style container mixin.\n */\nexport default {\n  created () {\n    this._style = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly styleContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get styleContainer () { return vm },\n      }\n    },\n    /**\n     * Default style factory\n     * @return {OlStyleLike|undefined}\n     * @protected\n     */\n    getDefaultStyle () {},\n    /**\n     * Returns OL object that can be styled (i.e. has setStyle/getStyle methods) or undefined\n     * @return {StyleTarget|undefined}\n     * @protected\n     * @abstract\n     */\n    getStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getStyleTarget()`)\n    },\n    /**\n     * @return {StyleLike|undefined}\n     */\n    getStyle () {\n      return coalesce(this.getStyleTarget()?.getStyle(), this._style)\n    },\n    /**\n     * @param {StyleLike} style\n     */\n    addStyle (style) {\n      if (!style) return\n\n      const olStyle = style?.$style || style\n      let currentStyle = this._style\n\n      if (isFunction(olStyle)) {\n        if (currentStyle) {\n          if (process.env.NODE_ENV !== 'production') {\n            this.$logger.warn('Component already has style components among its descendants. ' +\n              'Avoid use of multiple vl-style-func or combining vl-style-func with vl-style-box on the same level.')\n          }\n        }\n\n        currentStyle = style\n      } else {\n        if (!isArray(currentStyle)) {\n          if (currentStyle) {\n            if (process.env.NODE_ENV !== 'production') {\n              this.$logger.warn('Component already has style components among its descendants. ' +\n                'Avoid use of multiple vl-style-func or combining vl-style-func with vl-style-box on the same level.')\n            }\n          }\n\n          currentStyle = []\n        }\n\n        if (!currentStyle.includes(olStyle)) {\n          currentStyle.push(olStyle)\n        }\n      }\n\n      this.setStyle(currentStyle)\n    },\n    /**\n     * @param {StyleLike|undefined} style\n     */\n    removeStyle (style) {\n      if (!style) return\n\n      style = style?.$style || style\n      let currentStyle = this._style\n\n      if (currentStyle === style) {\n        currentStyle = undefined\n      } else if (isArray(currentStyle)) {\n        currentStyle = currentStyle.filter(s => s !== style)\n\n        if (currentStyle.length === 0) {\n          currentStyle = undefined\n        }\n      }\n\n      this.setStyle(currentStyle)\n    },\n    /**\n     * @param {StyleLike|undefined} style\n     */\n    setStyle (style) {\n      style || (style = undefined)\n      if (style) {\n        if (hasProp(style, '$style') || hasProp(style, '$styleFunction')) {\n          style = style.$style || style.$styleFunction\n        } else if (isArray(style)) {\n          style = style.map(style => style?.$style || style)\n        }\n        if (isFunction(style)) {\n          style = this.createStyleFunc(style, this.getDefaultStyle())\n        } else {\n          isArray(style) || (style = [style])\n          style.length > 0 || (style = undefined)\n        }\n      }\n\n      const styleTarget = this.getStyleTarget()\n      if (styleTarget && !isEqual(style, styleTarget.getStyle())) {\n        styleTarget.setStyle(style)\n        this.scheduleRefresh()\n      }\n      if (!isEqual(style, this._style)) {\n        this._style = style\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * Style function factory\n     * @param {StyleLike|undefined} style\n     * @param {StyleLike|undefined} defaultStyle\n     * @returns {module:ol/style/Style~StyleFunction}\n     * @protected\n     */\n    createStyleFunc (style, defaultStyle) {\n      return function __styleFunc (feature, resolution) {\n        if (!feature.getGeometry()) return\n\n        let compiledStyle\n        if (style && isFunction(style)) {\n          // style - custom ol/style/Style~StyleFunction\n          compiledStyle = style(feature, resolution)\n        } else if (isArray(style)) {\n          // style - array of ol/style/Style objects\n          compiledStyle = style.slice()\n        }\n        // not empty or null style\n        if (\n          compiledStyle == null ||\n          (isArray(compiledStyle) && compiledStyle.length) ||\n          compiledStyle instanceof Style\n        ) {\n          return compiledStyle\n        }\n        // fallback to default style\n        if (defaultStyle) {\n          return isFunction(defaultStyle) ? defaultStyle(feature, resolution) : defaultStyle\n        }\n\n        return null\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $style: {\n      enumerable: true,\n      get: this.getStyle,\n    },\n  })\n}\n","import { Feature } from 'ol'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { race as raceObs } from 'rxjs'\nimport { distinctUntilChanged, filter as filterObs, mapTo } from 'rxjs/operators'\nimport {\n  dumpStyle,\n  EPSG_3857,\n  findPointOnSurface,\n  getFeatureId,\n  getFeatureProperties,\n  initializeFeature,\n  setFeatureId,\n  setFeatureProperties,\n} from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent, fromVueEvent as obsFromVueEvent } from '../rx-ext'\nimport {\n  assert,\n  clonePlainObject,\n  coalesce,\n  hasAncestorVm,\n  hasProp,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isObjectLike,\n  isString,\n  mergeDescriptors,\n  stubObject,\n  stubTrue,\n  waitFor,\n} from '../utils'\nimport geometryContainer from './geometry-container'\nimport olCmp, {\n  CanceledError,\n  isCreateError,\n  isMountError,\n  makeChangeOrRecreateWatchers,\n  OlObjectEvent,\n} from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport styleContainer from './style-container'\nimport waitForMap from './wait-for-map'\n\n/**\n * A vector object for geographic features with a geometry and other attribute properties,\n * similar to the features in vector file formats like **GeoJSON**.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    geometryContainer,\n    styleContainer,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    properties: {\n      type: Object,\n      default: stubObject,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentProperties: clonePlainObject(this.properties),\n      currentGeometryName: 'geometry',\n    }\n  },\n  computed: {\n    geometryDataProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInDataProj(this.$geometry)\n    },\n    geometryViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInViewProj(this.$geometry)\n    },\n    pointDataProj () {\n      return this.pointToDataProj(this.pointViewProj)\n    },\n    pointViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return findPointOnSurface(this.$geometry)\n    },\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$feature) return\n\n      if (!isEqual(this.currentProperties, getFeatureProperties(this.$feature))) {\n        this.currentProperties = getFeatureProperties(this.$feature)\n      }\n      if (this.currentGeometryName !== this.$feature.getGeometryName()) {\n        this.currentGeometryName = this.$feature.getGeometryName()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'properties',\n      'currentProperties',\n      'currentGeometryName',\n      'geometryDataProj',\n      'pointDataProj',\n      'style',\n    ], [\n      'properties',\n      'currentProperties',\n      'geometryDataProj',\n      'pointDataProj',\n      'style',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * Create feature without inner style applying, feature level style\n     * will be applied in the layer level style function.\n     * @return {module:ol/Feature~Feature}\n     * @protected\n     */\n    createOlObject () {\n      const feature = initializeFeature(this.createFeature(), this.currentId)\n      feature.setGeometryName(this.currentGeometryName)\n      feature.setGeometry(this.$geometry)\n      feature.setStyle(this.$style)\n\n      return feature\n    },\n    /**\n     * @returns {Feature}\n     */\n    createFeature () {\n      return new Feature(this.currentProperties)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeMount () {\n      try {\n        await waitFor(\n          () => this.$geometryVm != null,\n          raceObs(\n            this.$olObjectEvents.pipe(\n              filterObs(({ name, args }) => {\n                return name === OlObjectEvent.ERROR &&\n                  args[0] instanceof CanceledError\n              }),\n            ),\n            obsFromVueEvent(this.$eventBus, ObjectEventType.ERROR).pipe(\n              filterObs(([err, vm]) => {\n                return (isCreateError(err) || isMountError(err)) &&\n                  hasProp(vm, '$geometry') &&\n                  hasAncestorVm(vm, this)\n              }),\n            ),\n          ).pipe(\n            mapTo(stubTrue()),\n          ),\n        )\n\n        return this::olCmp.methods.beforeMount()\n      } catch (err) {\n        err.message = `${this.vmName} wait for $geometry failed: ${err.message}`\n        throw err\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$featuresContainer?.addFeature(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$featuresContainer?.removeFeature(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToEvents()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::geometryContainer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n        {\n          get featureVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {string|number}\n     */\n    getIdInternal () {\n      return getFeatureId(this.$feature)\n    },\n    /**\n     * @param {string|number} id\n     * @return {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setFeatureId(this.$feature, id)\n    },\n    /**\n     * @return {Promise<Feature>}\n     */\n    resolveFeature: olCmp.methods.resolveOlObject,\n    /**\n     * @return {Feature}\n     * @protected\n     */\n    getGeometryTarget () {\n      return this.$feature\n    },\n    /**\n     * @return {Feature}\n     * @protected\n     */\n    getStyleTarget () {\n      return this.$feature\n    },\n    /**\n     * @return {string}\n     */\n    getGeometryName () {\n      return coalesce(this.$feature?.getGeometryName(), this.currentGeometryName)\n    },\n    /**\n     * @param {string} geometryName\n     */\n    setGeometryName (geometryName) {\n      assert(isString(geometryName) && !isEmpty(geometryName), 'Invalid geometry name')\n\n      if (geometryName !== this.currentGeometryName) {\n        this.currentGeometryName = geometryName\n      }\n      if (this.$feature && geometryName !== this.$feature.getGeometryName()) {\n        this.$feature.setGeometryName(geometryName)\n      }\n    },\n    /**\n     * @return {Object}\n     */\n    getProperties () {\n      return coalesce(this.$feature && getFeatureProperties(this.$feature), this.currentProperties)\n    },\n    /**\n     * @param {Object} properties\n     */\n    setProperties (properties) {\n      properties = getFeatureProperties({ properties })\n\n      if (!isEqual(properties, this.currentProperties)) {\n        this.currentProperties = properties\n      }\n      if (this.$feature && !isEqual(properties, getFeatureProperties(this.$feature))) {\n        setFeatureProperties(this.$feature, properties)\n      }\n    },\n    /**\n     * Checks if feature lies at `pixel`.\n     * @param {number[]} pixel\n     * @return {Promise<boolean>}\n     */\n    async isAtPixel (pixel) {\n      const selfFeature = await this.resolveFeature()\n      let layerFilter\n      if (this.$layerVm) {\n        const selfLayer = await this.$layerVm.resolveLayer()\n        layerFilter = layer => layer === selfLayer\n      }\n\n      return this.$mapVm.forEachFeatureAtPixel(pixel, feature => feature === selfFeature, { layerFilter })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    propertiesChanged (value) {\n      this.setProperties(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentPropertiesChanged (value) {\n      if (isEqual(value, this.properties)) return\n\n      this.$emit('update:properties', value && clonePlainObject(value))\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    currentGeometryNameChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:geometryName', value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    geometryDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:geometry', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    pointDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:point', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|Function|Array|undefined} value\n     * @param {Object|Function|Array|undefined} prev\n     * @protected\n     */\n    styleChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:style', isObjectLike(value) ? clonePlainObject(value) : value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $feature: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    $layerVm: {\n      enumerable: true,\n      get: () => this.$services?.layerVm,\n    },\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    $featuresContainer: {\n      enumerable: true,\n      get: () => this.$services?.featuresContainer,\n    },\n  })\n}\n\nasync function subscribeToEvents () {\n  const propChanges = obsFromOlEvent(\n    this.$feature,\n    ObjectEventType.PROPERTYCHANGE,\n    ({ key }) => {\n      switch (key) {\n        case this.$feature.getGeometryName():\n          return {\n            prop: 'geometry',\n            value: this.$feature.getGeometry(),\n            setter: geom => this.setGeometry(geom, true),\n          }\n        default:\n          return {\n            prop: 'properties',\n            value: getFeatureProperties(this.$feature),\n            setter: this.setProperties,\n          }\n      }\n    },\n  ).pipe(\n    distinctUntilChanged(isEqual),\n  )\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import {\n  CIRCLE_SERIALIZE_PROP,\n  getFeatureId,\n  getFeatureProperties,\n  initializeFeature,\n  setFeatureId,\n  setFeatureProperties,\n  STYLE_SERIALIZE_PROP,\n} from '../ol-ext'\nimport { get, isEqual, isFunction, isPlainObject } from '../utils'\n\nexport default {\n  methods: {\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     * @return {Feature}\n     * @protected\n     */\n    initializeFeature (feature, viewProj = false) {\n      feature = feature?.$feature || feature\n      if (isPlainObject(feature)) {\n        if (viewProj) {\n          feature = this.readFeatureInViewProj(feature)\n        } else {\n          feature = this.readFeatureInDataProj(feature)\n        }\n      }\n\n      return initializeFeature(feature)\n    },\n    /**\n     * @param {module:ol/Feature~Feature} feature\n     * @param {module:ol/Feature~Feature} newFeature\n     * @protected\n     */\n    updateFeature (feature, newFeature) {\n      if (this.$mapVm?.isInteracting()) return\n\n      const featureJson = this.writeFeatureInViewProj(feature)\n      const newFeatureJson = this.writeFeatureInViewProj(newFeature)\n\n      if (isEqual(featureJson, newFeatureJson)) return\n\n      if (getFeatureId(feature) !== getFeatureId(newFeature)) {\n        setFeatureId(feature, getFeatureId(newFeature))\n      }\n\n      const properties = getFeatureProperties(newFeature)\n      const currentProperties = getFeatureProperties(feature)\n      if (!isEqual(properties, currentProperties)) {\n        setFeatureProperties(feature, properties)\n      }\n\n      const geomJson = get(newFeatureJson, `properties.${CIRCLE_SERIALIZE_PROP}`) || newFeatureJson.geometry || null\n      const currentGeomJson = get(featureJson, `properties.${CIRCLE_SERIALIZE_PROP}`) || featureJson.geometry || null\n      if (!isEqual(geomJson, currentGeomJson)) {\n        feature.setGeometry(newFeature.getGeometry() || null)\n      }\n\n      const style = newFeature.getStyle()\n      const currentStyle = feature.getStyle()\n      if (isFunction(currentStyle) && isFunction(style)) {\n        if (currentStyle !== style) {\n          feature.setStyle(style)\n        }\n      } else if (isFunction(style)) {\n        feature.setStyle(style)\n      }\n\n      const styleJson = get(newFeatureJson, `properties.${STYLE_SERIALIZE_PROP}`) || null\n      const currentStyleJson = get(featureJson, `properties.${STYLE_SERIALIZE_PROP}`) || null\n      if (!isEqual(styleJson, currentStyleJson)) {\n        feature.setStyle(style)\n      }\n    },\n  },\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport EventType from 'ol/events/EventType'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { distinctUntilChanged, map as mapObs, tap } from 'rxjs/operators'\nimport { COORD_PRECISION, getFeatureId, roundExtent, roundPointCoords, writeGeoJsonFeature } from '../ol-ext'\nimport { bufferDebounceTime, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, identity, isEqual } from '../utils'\nimport featureHelper from './feature-helper'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/Feature~Feature|Object} FeatureLike\n */\n\n/**\n * Features container\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n    projTransforms,\n    featureHelper,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    featuresCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'features_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'featuresCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/Feature~Feature>}\n     * @private\n     */\n    this._featuresCollection = this.instanceFactoryCall(this.featuresCollectionIdent, () => new Collection())\n    this._featureSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly featuresContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get featuresContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     * @param {boolean} [viewProj=false]\n     */\n    addFeatures (features, viewProj = false) {\n      forEach(features, feature => this.addFeature(feature, viewProj))\n    },\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     */\n    addFeature (feature, viewProj = false) {\n      feature = this.initializeFeature(feature, viewProj)\n      // todo add hash {featureId => featureIdx, ....}\n      const foundFeature = this.getFeatureById(getFeatureId(feature))\n      if (foundFeature == null) {\n        this.$featuresCollection.push(feature)\n      } else {\n        this.updateFeature(foundFeature, feature)\n      }\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     */\n    removeFeatures (features) {\n      forEach(features, ::this.removeFeature)\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    removeFeature (feature) {\n      feature = this.getFeatureById(getFeatureId(feature?.$feature || feature))\n      if (!feature) return\n\n      this.$featuresCollection.remove(feature)\n    },\n    /**\n     * @return {void}\n     */\n    clearFeatures () {\n      this.$featuresCollection.clear()\n    },\n    /**\n     * @param {string|number} featureId\n     * @return {module:ol/Feature~Feature|undefined}\n     */\n    getFeatureById (featureId) {\n      // todo add hash {featureId => featureIdx, ....}\n      return find(this.getFeatures(), feature => getFeatureId(feature) === featureId)\n    },\n    /**\n     * @return {Array<module:ol/Feature~Feature>}\n     */\n    getFeatures () {\n      return this.$featuresCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/Feature~Feature>}\n     */\n    getFeaturesCollection () {\n      return this._featuresCollection\n    },\n    /**\n     * @param {function} callback\n     * @return {*}\n     */\n    forEachFeature (callback) {\n      let res\n      this.$featuresCollection.forEach((...args) => {\n        res = callback(...args)\n      })\n\n      return res\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureInExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return this.forEachFeature(feature => {\n        const geometry = feature.getGeometry()\n        if (geometry && geometry.intersectsExtent(extent)) {\n          const result = callback(feature)\n          if (result) {\n            return result\n          }\n        }\n      })\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureIntersectingExtent (extent, callback, viewProj = false) {\n      return this.forEachFeatureInExtent(extent, callback, viewProj)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesAtCoordinate (coordinate, viewProj = false) {\n      return this.getFeaturesInExtent([coordinate[0], coordinate[1], coordinate[0], coordinate[1]], viewProj)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesInExtent (extent, viewProj = false) {\n      const features = []\n      this.forEachFeatureIntersectingExtent(extent, feature => {\n        features.push(feature)\n      }, viewProj)\n\n      return features\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {function} [filter]\n     * @param {boolean} [viewProj=false]\n     * @returns {module:ol/Feature~Feature}\n     */\n    getClosestFeatureToCoordinate (coordinate, filter = identity, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      let closestFeature\n      let minSquaredDistance = Infinity\n      this.forEachFeature(feature => {\n        if (!filter(feature)) return\n\n        const geometry = feature.getGeometry()\n        if (!geometry) return\n\n        const closestPoint = geometry.getClosestPoint(coordinate)\n        const prevSquaredDistance = minSquaredDistance\n        minSquaredDistance = Math.pow(closestPoint[0] - coordinate[0], 2) + Math.pow(closestPoint[1] - coordinate[1])\n        if (minSquaredDistance < prevSquaredDistance) {\n          closestFeature = feature\n        }\n      })\n\n      return closestFeature\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getFeaturesExtent (viewProj = false) {\n      let extent\n      this.forEachFeature(feature => {\n        const geometry = feature.getGeometry()\n        if (!geometry) return\n\n        const geomExtent = geometry.getExtent()\n        if (!extent) {\n          extent = geomExtent\n        } else {\n          extent = [\n            geomExtent[0] < extent[0] ? geomExtent[0] : extent[0],\n            geomExtent[1] < extent[1] ? geomExtent[1] : extent[1],\n            geomExtent[2] > extent[2] ? geomExtent[2] : extent[2],\n            geomExtent[3] > extent[3] ? geomExtent[3] : extent[3],\n          ]\n        }\n      })\n\n      return viewProj ? extent : this.extentToDataProj(extent)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    featuresCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$featuresCollection) {\n        this.setInstance(value, this.$featuresCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $featuresCollection: {\n      enumerable: true,\n      get: this.getFeaturesCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$featuresCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeFeature(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlEvent(element, ObjectEventType.PROPERTYCHANGE)\n      const changes = obsFromOlEvent(element, EventType.CHANGE)\n      const events = mergeObs(propChanges, changes).pipe(\n        distinctUntilChanged(isEqual),\n      )\n      this._featureSubs[uid] = this.subscribeTo(events, ::this.debounceChanged)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$featuresCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._featureSubs[uid]) {\n        this.unsubscribe(this._featureSubs[uid])\n        delete this._featureSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    mapObs(({ type, element }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        feature: element,\n        get json () {\n          if (!this._json) {\n            this._json = writeGeoJsonFeature(this.feature, viewProj, dataProj, COORD_PRECISION)\n          }\n          return this._json\n        },\n      }\n    }),\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, evt => {\n      this.$emit(evt.type + 'feature', evt)\n      // todo remove in v0.13.x\n      this.$emit(evt.type + ':feature', evt.feature)\n    })\n  })\n}\n","import { Fill } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Fill~Fill|Object|undefined} FillStyleLike\n */\n\n/**\n * @typedef {Object} FillStyleTarget\n * @property {function(): module:ol/style/Fill~Fill|undefined} getFill\n * @property {function(module:ol/style/Fill~Fill|undefined): void} setFill\n */\n\n/**\n * Fill style container.\n */\nexport default {\n  created () {\n    this._fill = undefined\n    this._fillVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly fillStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get fillStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {FillStyleTarget}\n     */\n    getFillStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getFillStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Fill~Fill|undefined}\n     */\n    getFill () {\n      return coalesce(this.getFillStyleTarget()?.getFill(), this._fill)\n    },\n    /**\n     * @return {Object}\n     */\n    getFillVm () {\n      return this._fillVm\n    },\n    /**\n     * @param {module:ol/style/Fill~Fill|undefined} fill\n     */\n    setFill (fill) {\n      fill = fill?.$style || fill\n      fill || (fill = undefined)\n      assert(!fill || fill instanceof Fill, 'Invalid fill style')\n\n      if (fill !== this._fill) {\n        this._fill = fill\n        this._fillVm = fill?.vm && fill.vm[0]\n        this.scheduleRefresh()\n      }\n\n      const fillTarget = this.getFillStyleTarget()\n      if (fillTarget && fill !== fillTarget.getFill()) {\n        fillTarget.setFill(fill)\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $fill: {\n      enumerable: true,\n      get: this.getFill,\n    },\n    $fillVm: {\n      enumerable: true,\n      get: this.getFillVm,\n    },\n  })\n}\n","import { EPSG_3857, getGeometryId, initializeGeometry, roundExtent, roundPointCoords, setGeometryId } from '../ol-ext'\nimport { coalesce, isEqual, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base geometry mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      extentViewProj: undefined,\n    }\n  },\n  computed: {\n    type () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.getType()\n    },\n    extentDataProj () {\n      return this.extentToDataProj(this.extentViewProj)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geometry) return\n\n      if (!isEqual(this.extentViewProj, this.$geometry.getExtent())) {\n        this.extentViewProj = this.$geometry.getExtent().slice()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'extentDataProj',\n    ], [\n      'extentDataProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/geom/Geometry~Geometry>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeGeometry(await this.createGeometry(), this.currentId)\n    },\n    /**\n     * @return {module:ol/geom/Geometry~Geometry|Promise<module:ol/geom/Geometry~Geometry>}\n     * @protected\n     * @abstract\n     */\n    createGeometry () {\n      throw new Error(`${this.vmName} not implemented method: createGeometry()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$geometryContainer?.setGeometry(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$geometryContainer?.getGeometryVm() === this) {\n        this.$geometryContainer.setGeometry(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get geometryVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToGeometryEvents()\n    },\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getGeometryId(this.$geometry)\n    },\n    /**\n     * @param {string|number} id\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setGeometryId(this.$geometry, id)\n    },\n    /**\n     * @return {Promise<module:ol/geom/Geometry~Geometry>}\n     */\n    resolveGeometry: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string}\n     */\n    getType () {\n      return coalesce(this.$geometry?.getType(), this.type)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getExtent (viewProj = false) {\n      const extent = coalesce(this.$geometry?.getExtent(), this.extentViewProj)\n\n      return viewProj ? roundExtent(extent) : this.extentToDataProj(extent)\n    },\n    /**\n     * @param {number[]} point\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<number[]>}\n     */\n    async getClosestPoint (point, viewProj = false) {\n      point = viewProj ? roundPointCoords(point) : this.pointToViewProj(point)\n      const closestPoint = (await this.resolveGeometry()).getClosestPoint(point)\n\n      return viewProj ? roundPointCoords(closestPoint) : this.pointToDataProj(closestPoint)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<boolean>}\n     */\n    async intersectsCoordinate (coordinate, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      return (await this.resolveGeometry()).intersectsCoordinate(coordinate)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<boolean>}\n     */\n    async intersectsExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return (await this.resolveGeometry()).intersectsExtent(extent)\n    },\n    /**\n     * @param {number} angle Angle in radians\n     * @param {number[]} anchor\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<void>}\n     */\n    async rotate (angle, anchor, viewProj = false) {\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor);\n\n      (await this.resolveGeometry()).rotate(angle, anchor)\n    },\n    /**\n     * @param {number} sx\n     * @param {number} [sy]\n     * @param {number[]} [anchor]\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<void>}\n     */\n    async scale (sx, sy, anchor, viewProj = false) {\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor);\n      [sx] = viewProj ? roundPointCoords([sx, 0]) : this.pointToViewProj([sx, 0]);\n      [, sy] = viewProj ? roundPointCoords([0, sy]) : this.pointToViewProj([0, sy]);\n\n      (await this.resolveGeometry()).scale(sx, sy, anchor)\n    },\n    /**\n     * @param {number} tolerance\n     * @returns {Promise<module:ol/geom/Geometry~Geometry>}\n     */\n    async simplify (tolerance) {\n      return (await this.resolveGeometry()).simplify(tolerance)\n    },\n    /**\n     * @param dx\n     * @param dy\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<*>}\n     */\n    async translate (dx, dy, viewProj = false) {\n      [dx] = viewProj ? roundPointCoords([dx, 0]) : this.pointToViewProj([dx, 0]);\n      [, dy] = viewProj ? roundPointCoords([0, dy]) : this.pointToViewProj([0, dy])\n\n      return (await this.resolveGeometry()).translate(dx, dy)\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    extentDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:extent', value?.slice())\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/geom/Geometry~Geometry|undefined}\n     */\n    $geometry: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $geometryContainer: {\n      enumerable: true,\n      get: () => this.$services?.geometryContainer,\n    },\n  })\n}\n\nasync function subscribeToGeometryEvents () {\n}\n","import { Source } from 'ol/source'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {Source|Object} SourceLike\n */\n/**\n * @typedef {Object} SourceTarget\n * @property {function(): Source|undefined} getSource\n * @property {function(Source|undefined): void} setSource\n */\n\n/**\n * Source container mixin.\n */\nexport default {\n  created () {\n    /**\n     * @type {module:ol/source/Source~Source|undefined}\n     * @private\n     */\n    this._source = undefined\n    /**\n     * @type {Object|undefined}\n     * @private\n     */\n    this._sourceVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly sourceContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get sourceContainer () { return vm },\n      }\n    },\n    /**\n     * @return {SourceTarget|undefined}\n     * @protected\n     */\n    getSourceTarget () {\n      throw new Error(`${this.vmName} not implemented method: getSourceTarget()`)\n    },\n    /**\n     * @return {module:ol/source/Source~Source|undefined}\n     */\n    getSource () {\n      return coalesce(this.getSourceTarget()?.getSource(), this._source)\n    },\n    /**\n     * @return {Object}\n     */\n    getSourceVm () {\n      return this._sourceVm\n    },\n    /**\n     * @param {SourceLike|undefined} source\n     */\n    setSource (source) {\n      source = source?.$source || source\n      source || (source = undefined)\n      assert(!source || source instanceof Source, 'Invalid source')\n\n      const sourceTarget = this.getSourceTarget()\n      if (sourceTarget && source !== sourceTarget.getSource()) {\n        sourceTarget.setSource(source)\n        this.scheduleRefresh()\n      }\n      if (source !== this._source) {\n        this._source = source\n        this._sourceVm = source?.vm && source.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $source: {\n      enumerable: true,\n      get: this.getSource,\n    },\n    $sourceVm: {\n      enumerable: true,\n      get: this.getSourceVm,\n    },\n  })\n}\n","import RenderEventType from 'ol/render/EventType'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getSourceId } from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { addPrefix, mergeDescriptors } from '../utils'\nimport baseLayer from './base-layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport sourceContainer from './source-container'\n\n/**\n * Base simple layer mixin.\n */\nexport default {\n  mixins: [\n    sourceContainer,\n    baseLayer,\n  ],\n  props: {\n    // ol/layer/Layer\n    /**\n     * @type {function|undefined}\n     */\n    render: Function,\n    // custom\n    /**\n     * @type {boolean}\n     */\n    overlay: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    source () {\n      if (!(this.rev && this.$source)) return\n\n      return {\n        id: getSourceId(this.$source),\n        type: this.$source.constructor.name,\n      }\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'render',\n      'overlay',\n    ], [\n      'source',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      if (this.overlay && this.$mapVm) {\n        this.setMap(this.$mapVm)\n        return\n      }\n\n      return this::baseLayer.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.overlay) {\n        this.setMap(null)\n        return\n      }\n\n      return this::baseLayer.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::baseLayer.methods.getServices(),\n        this::sourceContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::baseLayer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @return {module:ol/layer/Base~BaseLayer}\n     * @protected\n     */\n    getSourceTarget () {\n      return this.$layer\n    },\n    /**\n     * @returns {module:ol/renderer/Layer~LayerRenderer}\n     */\n    getRenderer () {\n      return this.$layer?.getRenderer()\n    },\n    /**\n     * @param {module:ol/Map~Map|Object|undefined} map\n     */\n    setMap (map) {\n      map = map?.$map || map\n\n      this.$layer?.setMap(map)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prev\n     * @protected\n     */\n    sourceChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:source', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const sourceChanges = obsFromOlChangeEvent(this.$layer, 'source', true).pipe(\n    tap(({ value: source }) => {\n      if (this._sourceSubs) {\n        this.unsubscribe(this._sourceSubs)\n      }\n      if (source) {\n        this._sourceSubs = this.subscribeTo(\n          obsFromOlChangeEvent(source, 'id', true),\n          ::this.scheduleRefresh,\n        )\n      }\n    }),\n    mapObs(evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    })),\n  )\n  this.subscribeTo(sourceChanges, ({ setter, value }) => setter(value))\n\n  const renderEvents = obsFromOlEvent(this.$layer, [\n    RenderEventType.PRERENDER,\n    RenderEventType.POSTRENDER,\n  ])\n  this.subscribeTo(renderEvents, evt => this.$emit(evt.type, evt))\n}\n","import layer from './layer'\n\nexport default {\n  mixins: [\n    layer,\n  ],\n}\n","import { get as getProj } from 'ol/proj'\nimport { EPSG_3857, getSourceId, initializeSource, setSourceId, SourceState } from '../ol-ext'\nimport { assert, coalesce, isArray, isEqual, isFunction, isString, mergeDescriptors, or } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\nconst validateAttributions = /*#__PURE__*/or(isString, isFunction, value => isArray(value) && value.every(isString))\n\n/**\n * Base source mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    // ol/source/Source\n    /**\n     * @type {string|string[]|undefined}\n     */\n    attributions: {\n      type: [String, Array, Function],\n      validator: validateAttributions,\n    },\n    /**\n     * @type {boolean}\n     */\n    attributionsCollapsible: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    projection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n    /**\n     * @type {boolean}\n     */\n    wrapX: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    state: {\n      type: String,\n      default: SourceState.READY,\n      validator: value => Object.values(SourceState).includes(value),\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentAttributions: adaptAttributions(this.attributions),\n      currentState: this.state,\n    }\n  },\n  computed: {\n    inputAttributions () {\n      return adaptAttributions(this.attributions)\n    },\n    currentResolutions () {\n      return this.rev ? this.getResolutions() : []\n    },\n    resolvedDataProjection () {\n      return coalesce(\n        this.projection,\n        this.dataProjection, // may or may not be present\n        this.$options?.dataProjection, // may or may not be present\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentAttributions !== this.$source.getAttributions()) {\n        this.currentAttributions = this.$source.getAttributions()\n      }\n      if (this.currentState !== this.$source.getState()) {\n        this.currentState = this.$source.getState()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputAttributions',\n      'currentAttributions',\n      'state',\n      'currentState',\n      'attributionsCollapsible',\n      'projection',\n      'wrapX',\n      'currentResolutions',\n    ], [\n      'inputAttributions',\n      'currentAttributions',\n      'currentResolutions',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/source/Source~Source>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeSource(await this.createSource(), this.currentId)\n    },\n    /**\n     * @return {module:ol/source/Source~Source|Promise<module:ol/source/Source~Source>}\n     * @protected\n     * @abstract\n     */\n    createSource () {\n      throw new Error(`${this.vmName} not implemented method: createSource()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$sourceContainer?.setSource(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$sourceContainer?.getSourceVm() === this) {\n        this.$sourceContainer.setSource(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Promise<void>}\n     */\n    async refresh () {\n      const source = await this.resolveSource()\n\n      return new Promise(resolve => {\n        source.once('change', () => resolve())\n        source.refresh()\n      })\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get sourceVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @returns {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getSourceId(this.$source)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setSourceId(this.$source, id)\n    },\n    /**\n     * @return {Promise<module:ol/source/Source~Source>}\n     */\n    resolveSource: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string|string[]|undefined}\n     */\n    getAttributions () {\n      return coalesce(this.$source?.getAttributions(), this.currentAttributions)\n    },\n    /**\n     * @param {string} attributions\n     */\n    setAttributions (attributions) {\n      assert(!attributions || validateAttributions(attributions), 'Invalid attributions')\n      attributions = adaptAttributions(attributions)\n\n      if (!isEqual(attributions, this.currentAttributions)) {\n        this.currentAttributions = attributions\n      }\n      if (this.$source && !isEqual(attributions, this.$source.getAttributions())) {\n        this.$source.setAttributions(attributions)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getAttributionsCollapsible () {\n      return coalesce(this.$source?.getAttributionsCollapsible(), this.attributionsCollapsible)\n    },\n    /**\n     * @returns {module:ol/proj/Projection~Projection}\n     */\n    getProjection () {\n      return coalesce(this.$source?.getProjection(), getProj(this.resolvedDataProjection))\n    },\n    /**\n     * @returns {string}\n     */\n    getState () {\n      return coalesce(this.$source?.getState(), this.currentState)\n    },\n    /**\n     * @returns {boolean}\n     */\n    getWrapX () {\n      return coalesce(this.$source?.getWrapX(), this.wrapX)\n    },\n    /**\n     * @returns {number[]}\n     */\n    getResolutions () {\n      try {\n        // can be not implemented in source class\n        return coalesce(this.$source?.getResolutions(), [])\n      } catch (err) {\n        return []\n      }\n    },\n    /**\n     * @param {string|string[]|Function|undefined} value\n     * @protected\n     */\n    inputAttributionsChanged (value) {\n      this.setAttributions(value)\n    },\n    /**\n     * @param {string|string[]|Function|undefined} value\n     * @protected\n     */\n    currentAttributionsChanged (value) {\n      if (isEqual(value, this.inputAttributions)) return\n\n      this.$emit('update:attributions', value)\n    },\n    /**\n     * @param {string} value\n     * @protected\n     */\n    stateChanged (value) {\n      if (value === this.currentState) return\n\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log('state changed, scheduling recreate... %O ===> %O',\n          this.currentState, value)\n      }\n\n      this.currentState = value\n\n      return this.scheduleRecreate()\n    },\n    /**\n     * @param {string} value\n     * @protected\n     */\n    currentStateChanged (value) {\n      if (value === this.state) return\n\n      this.$emit('update:state', value)\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    currentResolutionsChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:resolutions', value?.slice())\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/source/Source~Source|undefined}\n     */\n    $source: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $sourceContainer: {\n      enumerable: true,\n      get: () => this.$services?.sourceContainer,\n    },\n  })\n}\n\nfunction subscribeToSourceEvents () {\n}\n\nfunction adaptAttributions (attributions) {\n  if (!attributions) return\n  if (isFunction(attributions)) return attributions\n\n  return () => isArray(attributions) ? attributions : [attributions]\n}\n","import { EPSG_3857 } from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { noop } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nconst ImageSourceEventType = {\n  IMAGELOADSTART: 'imageloadstart',\n  IMAGELOADEND: 'imageloadend',\n  IMAGELOADERROR: 'imageloaderror',\n}\n\n/**\n * Base image source mixin.\n */\nexport default {\n  mixins: [\n    source,\n  ],\n  props: {\n    // ol/source/Image\n    /**\n     * @type {string}\n     */\n    projection: {\n      ...source.props.projection,\n      default: EPSG_3857,\n    },\n    /**\n     * @type {number[]|undefined}\n     */\n    resolutions: Array,\n  },\n  computed: {\n    inputResolutions () {\n      return this.resolutions?.slice()\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputResolutions',\n    ], [\n      'inputResolutions',\n    ]),\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    attributionsCollapsibleChanged: noop,\n    wrapXChanged: noop,\n  },\n}\n\nasync function subscribeToSourceEvents () {\n  const events = obsFromOlEvent(this.$source, [\n    ImageSourceEventType.IMAGELOADSTART,\n    ImageSourceEventType.IMAGELOADEND,\n    ImageSourceEventType.IMAGELOADERROR,\n  ])\n\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","import { getStyleId, initializeStyle, setStyleId } from '../ol-ext'\nimport { assert, mergeDescriptors } from '../utils'\nimport olCmp from './ol-cmp'\nimport stubVNode from './stub-vnode'\n\n/**\n * Basic style mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    olCmp,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    beforeInit () {\n      return this::olCmp.methods.beforeInit()\n    },\n    /**\n     * @return {OlStyle|Promise<OlStyle>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeStyle(await this.createStyle(), this.currentId)\n    },\n    /**\n     * @return {OlStyle|Promise<OlStyle>}\n     * @protected\n     * @abstract\n     */\n    createStyle () {\n      throw new Error(`${this.vmName} not implemented method: createStyle()`)\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async mount () {\n      await this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async unmount () {\n      await this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async remount () {\n      await this::olCmp.methods.remount()\n      await this.refresh()\n\n      if (this.$mapVm) {\n        await this.$mapVm.render()\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await this::olCmp.methods.refresh()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get styleVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n    },\n    /**\n     * @param {string|number} id\n     */\n    setId (id) {\n      assert(id != null && id !== '', 'Invalid id')\n\n      if (this.currentId !== id) {\n        this.currentId = id\n        this.scheduleRefresh()\n      }\n      this.$olObject && this.setIdInternal(id)\n    },\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getStyleId(this.$style)\n    },\n    /**\n     * @param {string|number} id\n     * @returns {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setStyleId(this.$style, id)\n      this.scheduleRefresh()\n    },\n    /**\n     * @return {Promise<OlStyle>}\n     */\n    resolveStyle: olCmp.methods.resolveOlObject,\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::olCmp.methods.syncNonObservable()\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {OlStyle|undefined}\n     */\n    $style: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $styleContainer: {\n      enumerable: true,\n      get: () => this.$services?.styleContainer,\n    },\n  })\n}\n","import { coalesce } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport style from './style'\n\nexport default {\n  mixins: [\n    style,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/style/Image\n    /**\n     * @type {number}\n     */\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {boolean}\n     */\n    rotateWithView: Boolean,\n    /**\n     * @type {number}\n     */\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {number}\n     */\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    displacement: {\n      type: Array,\n      default: () => [0, 0],\n    },\n  },\n  data () {\n    return {\n      currentOpacity: this.opacity,\n      currentRotateWithView: this.rotateWithView,\n      currentRotation: this.rotation,\n      currentScale: this.scale,\n    }\n  },\n  computed: {\n    inputDisplacement () {\n      return this.displacement?.slice()\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setOpacity(this.getOpacity())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'opacity',\n      'currentOpacity',\n      'rotateWithView',\n      'currentRotateWithView',\n      'rotation',\n      'currentRotation',\n      'scale',\n      'currentScale',\n      'inputDisplacement',\n    ], [\n      'inputDisplacement',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$imageStyleContainer?.setImage(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$imageStyleContainer?.getImageVm() === this) {\n        await this.$imageStyleContainer.setImage(null)\n      }\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$imageStyleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setOpacity(this.getOpacity())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n    },\n    /**\n     * @returns {number}\n     */\n    getOpacity () {\n      return coalesce(this.$style?.getOpacity(), this.currentOpacity)\n    },\n    /**\n     * @param {number} opacity\n     */\n    setOpacity (opacity) {\n      if (opacity !== this.currentOpacity) {\n        this.currentOpacity = opacity\n        this.scheduleRefresh()\n      }\n      if (this.$style && opacity !== this.$style.getOpacity()) {\n        this.$style.setOpacity(opacity)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getRotateWithView () {\n      return coalesce(this.$style?.getRotateWithView(), this.currentRotateWithView)\n    },\n    /**\n     * @param {boolean} rotateWithView\n     */\n    setRotateWithView (rotateWithView) {\n      if (rotateWithView !== this.currentRotateWithView) {\n        this.currentRotateWithView = rotateWithView\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotateWithView !== this.$style.getRotateWithView()) {\n        this.$style.setRotateWithView(rotateWithView)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getRotation () {\n      return coalesce(this.$style?.getRotation(), this.currentRotation)\n    },\n    /**\n     * @param {number} rotation\n     */\n    setRotation (rotation) {\n      if (rotation !== this.currentRotation) {\n        this.currentRotation = rotation\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotation !== this.$style.getRotation()) {\n        this.$style.setRotation(rotation)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getScale () {\n      return coalesce(this.$style?.getScale(), this.currentScale)\n    },\n    /**\n     * @param {number} scale\n     */\n    setScale (scale) {\n      if (scale !== this.currentScale) {\n        this.currentScale = scale\n        this.scheduleRefresh()\n      }\n      if (this.$style && scale !== this.$style.getScale()) {\n        this.$style.setScale(scale)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @return {number[]}\n     */\n    getDisplacement () {\n      return coalesce(this.$style?.getDisplacement(), this.inputDisplacement)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    opacityChanged (value) {\n      this.setOpacity(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentOpacityChanged (value) {\n      if (value === this.opacity) return\n\n      this.$emit('update:opacity', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    rotateWithViewChanged (value) {\n      this.setRotateWithView(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentRotateWithViewChanged (value) {\n      if (value === this.rotateWithView) return\n\n      this.$emit('update:rotateWithView', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    rotationChanged (value) {\n      this.setRotation(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentRotationChanged (value) {\n      if (value === this.rotation) return\n\n      this.$emit('update:rotation', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    scaleChanged (value) {\n      this.setScale(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentScaleChanged (value) {\n      if (value === this.scale) return\n\n      this.$emit('update:scale', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {Object|undefined}\n     */\n    $imageStyleContainer: {\n      enumerable: true,\n      get: () => this.$services?.imageStyleContainer,\n    },\n  })\n}\n","import { Image } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Image~ImageStyle|Object|undefined} ImageStyleLike\n */\n\n/**\n * @typedef {Object} ImageStyleTarget\n * @property {function(): module:ol/style/Image~ImageStyle|undefined} getImage\n * @property {function(module:ol/style/Image~ImageStyle|undefined): void} setImage\n */\n\n/**\n * Image style container.\n */\nexport default {\n  created () {\n    this._image = undefined\n    this._imageVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly imageStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get imageStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {ImageStyleTarget|undefined}\n     */\n    getImageStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getImageStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Image~ImageStyle|undefined}\n     */\n    getImage () {\n      return coalesce(this.getImageStyleTarget()?.getImage(), this._image)\n    },\n    /**\n     * @return {Object}\n     */\n    getImageVm () {\n      return this._imageVm\n    },\n    /**\n     * @param {module:ol/style/Image~ImageStyle|undefined} image\n     */\n    setImage (image) {\n      image = image?.$style || image\n      image || (image = undefined)\n      assert(!image || image instanceof Image, 'Invalid image style')\n\n      const imageTarget = this.getImageStyleTarget()\n      if (imageTarget && image !== imageTarget.getImage()) {\n        imageTarget.setImage(image)\n        this.scheduleRefresh()\n      }\n      if (image !== this._image) {\n        this._image = image\n        this._imageVm = image?.vm && image.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $image: {\n      enumerable: true,\n      get: this.getImage,\n    },\n    $imageVm: {\n      enumerable: true,\n      get: this.getImageVm,\n    },\n  })\n}\n","import {\n  EPSG_3857,\n  getInteractionId,\n  getInteractionPriority,\n  initializeInteraction,\n  setInteractionId,\n  setInteractionPriority,\n} from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isNumber, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base interaction mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    /**\n     * @type {boolean}\n     */\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * Priority of interactions in the event handling stream.\n     * The higher the value, the sooner it will handle map event.\n     * @type {number}\n     */\n    priority: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentActive: this.active,\n      currentPriority: this.priority,\n      interacting: false,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$interaction) return\n\n      if (this.currentActive !== this.$interaction.getActive()) {\n        this.currentActive = this.$interaction.getActive()\n      }\n      if (this.currentPriority !== getInteractionPriority(this.$interaction)) {\n        this.currentPriority = getInteractionPriority(this.$interaction)\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'active',\n      'currentActive',\n      'priority',\n      'currentPriority',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/interaction/Interaction~Interaction>}\n     * @protected\n     */\n    async createOlObject () {\n      const interaction = initializeInteraction(\n        await this.createInteraction(),\n        this.currentId,\n        this.currentPriority,\n      )\n      interaction.setActive(this.currentActive)\n      interaction.set('interacting', this.interacting)\n\n      return interaction\n    },\n    /**\n     * @return {module:ol/interaction/Interaction~Interaction|Promise<module:ol/interaction/Interaction~Interaction>}\n     * @protected\n     * @abstract\n     */\n    createInteraction () {\n      throw new Error(`${this.vmName} not implemented method: createInteraction()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$interactionsContainer?.addInteraction(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$interactionsContainer?.removeInteraction(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get interactionVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToInteractionEvents()\n    },\n    /**\n     * @return {Promise<module:ol/interaction/Interaction~Interaction>}\n     */\n    resolveInteraction: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getInteractionId(this.$interaction)\n    },\n    /**\n     * @param {string|number} id\n     * @returns {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setInteractionId(this.$interaction, id)\n    },\n    /**\n     * @returns {boolean}\n     */\n    getActive () {\n      return coalesce(this.$interaction?.getActive(), this.currentActive)\n    },\n    /**\n     * @param {boolean} active\n     */\n    setActive (active) {\n      active = !!active\n\n      if (active !== this.currentActive) {\n        this.currentActive = active\n      }\n      if (this.$interaction && active !== this.$interaction.getActive()) {\n        this.$interaction.setActive(active)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getPriority () {\n      return coalesce(this.$interaction && getInteractionPriority(this.$interaction), this.currentPriority)\n    },\n    /**\n     * @param {number} priority\n     */\n    setPriority (priority) {\n      assert(isNumber(priority), 'Invalid priority')\n\n      if (priority !== this.currentPriority) {\n        this.currentPriority = priority\n      }\n      if (this.$interaction && priority !== getInteractionPriority(this.$interaction)) {\n        setInteractionPriority(this.$interaction, priority)\n      }\n      // eslint-disable-next-line no-unused-expressions\n      this.$interactionsContainer?.sortInteractions()\n    },\n    /**\n     * @return {module:ol/Map~Map|undefined}\n     */\n    getMap () {\n      return coalesce(this.$interaction?.getMap(), this.$map)\n    },\n    // /**\n    //  * @param {module:ol/Map~Map} map\n    //  */\n    // setMap (map) {\n    //   this.$interaction?.setMap(map)\n    // },\n    setInteracting (flag) {\n      flag = !!flag\n\n      if (flag !== this.interacting) {\n        this.interacting = flag\n      }\n      if (this.$interaction && flag !== this.$interaction.get('interacting')) {\n        this.$interaction.set('interacting', flag)\n      }\n    },\n    isInteracting () {\n      return coalesce(this.$interaction?.get('interacting'), this.interacting)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    activeChanged (value) {\n      this.setActive(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentActiveChanged (value) {\n      if (value === this.active) return\n\n      this.$emit('update:active', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    priorityChanged (value) {\n      this.setPriority(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentPriorityChanged (value) {\n      if (value === this.priority) return\n\n      this.$emit('update:priority', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/interaction/Interaction~Interaction|undefined}\n     */\n    $interaction: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $interactionsContainer: {\n      enumerable: true,\n      get: () => this.$services?.interactionsContainer,\n    },\n  })\n}\n\nasync function subscribeToInteractionEvents () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$interaction, [\n    'active',\n    'priority',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { defaults as createDefaultInteractions, Interaction } from 'ol/interaction'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getInteractionId, getInteractionPriority, initializeInteraction } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf, isArray, isPlainObject } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/interaction/Interaction~Interaction|Object} InteractionLike\n */\n\n/**\n * Interactions container\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    interactionsCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'interactions_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'interactionsCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/interaction/Interaction~Interaction>}\n     * @private\n     */\n    this._interactionsCollection = this.instanceFactoryCall(this.interactionsCollectionIdent, () => new Collection())\n    this._interactionSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly interactionsContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get interactionsContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} defaultInteractions\n     */\n    initDefaultInteractions (defaultInteractions) {\n      this.getInteractions().forEach(interaction => {\n        if (interaction.get('vl_default')) {\n          this.removeInteraction(interaction)\n        }\n      })\n\n      let interactions\n      if (isArray(defaultInteractions) || defaultInteractions instanceof Collection) {\n        interactions = defaultInteractions\n      } else if (defaultInteractions !== false) {\n        interactions = createDefaultInteractions(\n          isPlainObject(defaultInteractions)\n            ? this.defaultInteractions\n            : undefined,\n        )\n      }\n      if (interactions) {\n        interactions.forEach(interaction => interaction.set('vl_default', true))\n        this.addInteractions(interactions)\n      }\n    },\n    /**\n     * @param {InteractionLike} interaction\n     * @return {Interaction}\n     */\n    initializeInteraction (interaction) {\n      interaction = interaction?.$interaction || interaction\n      instanceOf(interaction, Interaction)\n\n      return initializeInteraction(interaction)\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} interactions\n     */\n    addInteractions (interactions) {\n      forEach(interactions, ::this.addInteraction)\n    },\n    /**\n     * @param {InteractionLike} interaction\n     */\n    addInteraction (interaction) {\n      interaction = this.initializeInteraction(interaction)\n\n      if (this.getInteractionById(getInteractionId(interaction))) return\n\n      this.$interactionsCollection.push(interaction)\n      this.sortInteractions()\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} interactions\n     */\n    removeInteractions (interactions) {\n      forEach(interactions, ::this.removeInteraction)\n    },\n    /**\n     * @param {InteractionLike} interaction\n     */\n    removeInteraction (interaction) {\n      interaction = this.getInteractionById(getInteractionId(interaction?.$interaction || interaction))\n      if (!interaction) return\n\n      this.$interactionsCollection.remove(interaction)\n      this.sortInteractions()\n    },\n    /**\n     * @return {void}\n     */\n    clearInteractions () {\n      this.$interactionsCollection.clear()\n    },\n    /**\n     * @return {module:ol/interaction/Interaction~Interaction[]}\n     */\n    getInteractions () {\n      return this.$interactionsCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/interaction/Interaction~Interaction>}\n     */\n    getInteractionsCollection () {\n      return this._interactionsCollection\n    },\n    /**\n     * @param {string|number} interactionId\n     * @return {module:ol/interaction/Interaction~Interaction|undefined}\n     */\n    getInteractionById (interactionId) {\n      return find(this.getInteractions(), interaction => getInteractionId(interaction) === interactionId)\n    },\n    /**\n     * @param {function} [sorter]\n     */\n    sortInteractions (sorter) {\n      sorter || (sorter = this.getDefaultInteractionsSorter())\n\n      this.$interactionsCollection.getArray().sort(sorter)\n    },\n    /**\n     * @return {function(): number}\n     * @protected\n     */\n    getDefaultInteractionsSorter () {\n      // sort interactions by priority in asc order\n      // the higher the priority, the earlier the interaction handles the event\n      return (a, b) => {\n        const ap = getInteractionPriority(a) || 0\n        const bp = getInteractionPriority(b) || 0\n        return ap === bp ? 0 : ap - bp\n      }\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    interactionsCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$interactionsCollection) {\n        this.setInstance(value, this.$interactionsCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $interactionsCollection: {\n      enumerable: true,\n      get: this.getInteractionsCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$interactionsCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeInteraction(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._interactionSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$interactionsCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._interactionSubs[uid]) {\n        this.unsubscribe(this._interactionSubs[uid])\n        delete this._interactionSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'interaction', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':interaction', element)\n    })\n  })\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport BaseLayer from 'ol/layer/Base'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getLayerId, initializeLayer } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/layer/Base~BaseLayer|Object} LayerLike\n */\n\n/**\n * Layers container mixin.\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    layersCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'layers_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'layersCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/layer/Base~BaseLayer>}\n     * @private\n     */\n    this._layersCollection = this.instanceFactoryCall(this.layersCollectionIdent, () => new Collection())\n    this._layerSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly layersContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get layersContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {LayerLike} layer\n     * @return {BaseLayer}\n     */\n    initializeLayer (layer) {\n      layer = layer?.$layer || layer\n      instanceOf(layer, BaseLayer)\n\n      return initializeLayer(layer)\n    },\n    /**\n     * @param {LayerLike[]|module:ol/Collection~Collection<LayerLike>} layers\n     */\n    addLayers (layers) {\n      forEach(layers, ::this.addLayer)\n    },\n    /**\n     * @param {LayerLike} layer\n     */\n    addLayer (layer) {\n      layer = this.initializeLayer(layer)\n\n      if (this.getLayerById(getLayerId(layer))) return\n\n      this.$layersCollection.push(layer)\n    },\n    /**\n     * @param {LayerLike[]|module:ol/Collection~Collection<LayerLike>} layers\n     */\n    removeLayers (layers) {\n      forEach(layers, ::this.removeLayer)\n    },\n    /**\n     * @param {LayerLike} layer\n     */\n    removeLayer (layer) {\n      layer = this.getLayerById(getLayerId(layer?.$layer || layer))\n      if (!layer) return\n\n      this.$layersCollection.remove(layer)\n    },\n    /**\n     * @return {void}\n     */\n    clearLayers () {\n      this.$layersCollection.clear()\n    },\n    /**\n     * @return {Array<module:ol/layer/Base~BaseLayer>}\n     */\n    getLayers () {\n      return this.$layersCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/layer/Base~BaseLayer>}\n     */\n    getLayersCollection () {\n      return this._layersCollection\n    },\n    /**\n     * @param {string|number} layerId\n     * @return {module:ol/layer/Base~BaseLayer|undefined}\n     */\n    getLayerById (layerId) {\n      return find(this.getLayers(), layer => getLayerId(layer) === layerId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    layersCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$layersCollection) {\n        this.setInstance(value, this.$layersCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $layersCollection: {\n      enumerable: true,\n      get: this.getLayersCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$layersCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeLayer(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._layerSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$layersCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._layerSubs[uid]) {\n        this.unsubscribe(this._layerSubs[uid])\n        delete this._layerSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'layer', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':layer', element)\n    })\n  })\n}\n","import { Collection, Overlay } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getOverlayId, initializeOverlay } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/Overlay~Overlay|Object} OverlayLike\n */\n\n/**\n * Overlays container mixin.\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    overlaysCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'overlays_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'overlaysCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/Overlay~Overlay>}\n     * @private\n     */\n    this._overlaysCollection = this.instanceFactoryCall(this.overlaysCollectionIdent, () => new Collection())\n    this._overlaySubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {readonly overlaysContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get overlaysContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {OverlayLike} overlay\n     * @return {Overlay}\n     */\n    initializeOverlay (overlay) {\n      overlay = overlay?.$overlay || overlay\n      instanceOf(overlay, Overlay)\n\n      return initializeOverlay(overlay)\n    },\n    /**\n     * @param {OverlayLike[]|module:ol/Collection~Collection<OverlayLike>} overlays\n     */\n    addOverlays (overlays) {\n      forEach(overlays, ::this.addOverlay)\n    },\n    /**\n     * @param {OverlayLike} overlay\n     */\n    addOverlay (overlay) {\n      overlay = this.initializeOverlay(overlay)\n\n      if (this.getOverlayById(getOverlayId(overlay))) return\n\n      this.$overlaysCollection.push(overlay)\n    },\n    /**\n     * @param {OverlayLike[]|module:ol/Collection~Collection<OverlayLike>} overlays\n     */\n    removeOverlays (overlays) {\n      forEach(overlays, ::this.removeOverlay)\n    },\n    /**\n     * @param {OverlayLike} overlay\n     */\n    removeOverlay (overlay) {\n      overlay = this.getOverlayById(getOverlayId(overlay?.$overlay || overlay))\n      if (!overlay) return\n\n      this.$overlaysCollection.remove(overlay)\n    },\n    /**\n     * @return {void}\n     */\n    clearOverlays () {\n      this.$overlaysCollection.clear()\n    },\n    /**\n     * @return {Array<module:ol/Overlay~Overlay>}\n     */\n    getOverlays () {\n      return this.$overlaysCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/Overlay~Overlay>}\n     */\n    getOverlaysCollection () {\n      return this._overlaysCollection\n    },\n    /**\n     * @param {string|number} overlayId\n     * @return {module:ol/Overlay~Overlay|undefined}\n     */\n    getOverlayById (overlayId) {\n      return find(this.getOverlays(), overlay => getOverlayId(overlay) === overlayId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    overlaysCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$overlaysCollection) {\n        this.setInstance(value, this.$overlaysCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $overlaysCollection: {\n      enumerable: true,\n      get: this.getOverlaysCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$overlaysCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeOverlay(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._overlaySubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$overlaysCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._overlaySubs[uid]) {\n        this.unsubscribe(this._overlaySubs[uid])\n        delete this._overlaySubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'overlay', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':overlay', element)\n    })\n  })\n}\n","import { Stroke } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Stroke~Stroke|Object|undefined} StrokeStyleLike\n */\n\n/**\n * @typedef {Object} StrokeStyleTarget\n * @property {function(): module:ol/style/Stroke~Stroke|undefined} getStroke\n * @property {function(module:ol/style/Stroke~Stroke|undefined): void} setStroke\n */\n\n/**\n * Stroke style container.\n */\nexport default {\n  created () {\n    this._stroke = undefined\n    this._strokeVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly strokeStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get strokeStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {StrokeStyleTarget}\n     */\n    getStrokeStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getStrokeStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Stroke~Stroke|undefined}\n     */\n    getStroke () {\n      return coalesce(this.getStrokeStyleTarget()?.getStroke(), this._stroke)\n    },\n    /**\n     * @return {Object}\n     */\n    getStrokeVm () {\n      return this._strokeVm\n    },\n    /**\n     * @param {module:ol/style/Stroke~Stroke|undefined} stroke\n     */\n    setStroke (stroke) {\n      stroke = stroke?.$style || stroke\n      stroke || (stroke = undefined)\n      assert(!stroke || stroke instanceof Stroke, 'Invalid stroke')\n\n      const strokeTarget = this.getStrokeStyleTarget()\n      if (strokeTarget && stroke !== strokeTarget.getStroke()) {\n        strokeTarget.setStroke(stroke)\n        this.scheduleRefresh()\n      }\n      if (stroke !== this._stroke) {\n        this._stroke = stroke\n        this._strokeVm = stroke?.vm && stroke.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $stroke: {\n      enumerable: true,\n      get: this.getStroke,\n    },\n    $strokeVm: {\n      enumerable: true,\n      get: this.getStrokeVm,\n    },\n  })\n}\n","import { dumpFillStyle, dumpStrokeStyle } from '../ol-ext'\nimport { clonePlainObject, coalesce, isEqual, mergeDescriptors } from '../utils'\nimport fillStyleContainer from './fill-style-container'\nimport imageStyle from './image-style'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport strokeStyleContainer from './stroke-style-container'\nimport style from './style'\n\nexport default {\n  mixins: [\n    fillStyleContainer,\n    strokeStyleContainer,\n    imageStyle,\n  ],\n  props: {\n    // ol/style/RegularShape\n    points: Number,\n    radius: Number,\n    radius1: Number,\n    radius2: Number,\n    angle: {\n      type: Number,\n      default: 0,\n    },\n  },\n  computed: {\n    stroke () {\n      if (!(this.rev && this.$stroke)) return\n\n      return dumpStrokeStyle(this.$stroke)\n    },\n    fill () {\n      if (!(this.rev && this.$fill)) return\n\n      return dumpFillStyle(this.$fill)\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'points',\n      'radius',\n      'radius1',\n      'radius2',\n      'angle',\n      'stroke',\n      'fill',\n    ], [\n      'stroke',\n      'fill',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::style.methods.getServices(),\n        this::fillStyleContainer.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::imageStyle.methods.syncNonObservable()\n    },\n    /**\n     * @return {FillStyleTarget}\n     * @protected\n     */\n    getFillStyleTarget () {\n      return {\n        getFill: () => this.$style?.getFill(),\n        setFill: () => {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log('fill changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    /**\n     * @return {StrokeStyleTarget}\n     * @protected\n     */\n    getStrokeStyleTarget () {\n      return {\n        getStroke: () => this.$style?.getStroke(),\n        setStroke: () => {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log('stroke changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    getAnchor () {\n      return this.$style?.getAnchor()\n    },\n    getAngle () {\n      return coalesce(this.$style?.getAngle(), this.angle)\n    },\n    getImage () {\n      return this.$style?.getImage()\n    },\n    getOrigin () {\n      return this.$style?.getOrigin()\n    },\n    getPoints () {\n      return coalesce(this.$style?.getPoints(), this.points)\n    },\n    getRadius () {\n      return coalesce(this.$style?.getRadius(), this.radius)\n    },\n    getRadius2 () {\n      return coalesce(this.$style?.getRadius2(), this.radius2)\n    },\n    getSize () {\n      return this.$style?.getSize()\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    strokeChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:stroke', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    fillChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:fill', value && clonePlainObject(value))\n    },\n  },\n}\n","import { boundingExtent as baseBoundingExtent } from 'ol/extent'\nimport GeometryLayout from 'ol/geom/GeometryLayout'\nimport { findPointOnSurface, isEqualCoord, roundCoords, roundPointCoords, transforms, GeometryType } from '../ol-ext'\nimport { assert, clonePlainObject, coalesce, isArray, isEmpty, isEqual, negate } from '../utils'\nimport geometry from './geometry'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\n/**\n * Base simple geometry with coordinates mixin.\n */\nexport default {\n  mixins: [\n    geometry,\n  ],\n  props: {\n    // ol/geom/SimpleGeometry\n    /**\n     * @type {number[]} Coordinates in map data projection\n     */\n    coordinates: {\n      type: Array,\n      required: true,\n      validator: /*#__PURE__*/negate(isEmpty),\n    },\n    // todo add support of coord layout\n    // /**\n    //  * @type {string}\n    //  */\n    // layout: {\n    //   type: String,\n    //   default: GeometryLayout.XY,\n    //   validator: value => Object.values(GeometryLayout).includes(value.toUpperCase()),\n    // },\n  },\n  data () {\n    return {\n      currentCoordinatesViewProj: clonePlainObject(this.coordinates),\n    }\n  },\n  computed: {\n    coordinatesDataProj () {\n      return roundCoords(this.type, this.coordinates)\n    },\n    coordinatesViewProj () {\n      return this.coordinatesToViewProj(this.coordinates)\n    },\n    currentCoordinatesDataProj () {\n      return this.coordinatesToDataProj(this.currentCoordinatesViewProj)\n    },\n    pointDataProj () {\n      return this.rev ? this.findPointOnSurface() : findPointOnSurface({\n        type: this.type,\n        coordinates: this.coordinatesDataProj,\n      })\n    },\n    pointViewProj () {\n      return this.rev ? this.findPointOnSurface(true) : findPointOnSurface({\n        type: this.type,\n        coordinates: this.coordinatesViewProj,\n      })\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geometry) return\n\n      if (!isEqualCoord({\n        coordinates: this.currentCoordinatesViewProj,\n        extent: boundingExtent(this.currentCoordinatesViewProj),\n      }, {\n        coordinates: this.$geometry.getCoordinates(),\n        extent: this.$geometry.getExtent(),\n      })) {\n        this.currentCoordinatesViewProj = this.$geometry.getCoordinates()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'coordinatesViewProj',\n      'currentCoordinatesDataProj',\n      'pointDataProj',\n    ], [\n      'coordinatesViewProj',\n      'currentCoordinatesDataProj',\n      'pointDataProj',\n    ]),\n  },\n  created () {\n    this.currentCoordinatesViewProj = clonePlainObject(this.coordinatesViewProj)\n    this.extentViewProj = boundingExtent(this.currentCoordinatesViewProj)\n  },\n  methods: {\n    /**\n     * @returns {function}\n     */\n    getCoordinatesTransformFunction () {\n      return transforms[this.getType()].transform\n    },\n    /**\n     * @param {number[]} coordinates\n     * @returns {Promise<number[]>}\n     */\n    coordinatesToDataProj (coordinates) {\n      const transform = this.getCoordinatesTransformFunction()\n\n      return transform(coordinates, this.resolvedViewProjection, this.resolvedDataProjection)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @returns {Promise<number[]>}\n     */\n    coordinatesToViewProj (coordinates) {\n      const transform = this.getCoordinatesTransformFunction()\n\n      return transform(coordinates, this.resolvedDataProjection, this.resolvedViewProjection)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]}\n     */\n    getCoordinates (viewProj = false) {\n      const coordinates = coalesce(this.$geometry?.getCoordinates(), this.currentCoordinatesViewProj)\n\n      return viewProj ? roundCoords(this.getType(), coordinates) : this.coordinatesToDataProj(coordinates)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isArray(coordinates), 'Invalid coordinates')\n      coordinates = viewProj ? roundCoords(this.getType(), coordinates) : this.coordinatesToViewProj(coordinates)\n      const extent = boundingExtent(coordinates)\n\n      if (!isEqualCoord({\n        coordinates,\n        extent,\n      }, {\n        coordinates: this.currentCoordinatesViewProj,\n        extent: this.extentViewProj,\n      })) {\n        this.currentCoordinatesViewProj = coordinates\n      }\n      if (this.$geometry && !isEqualCoord({\n        coordinates,\n        extent,\n      }, {\n        coordinates: this.$geometry.getCoordinates(),\n        extent: this.$geometry.getExtent(),\n      })) {\n        this.$geometry.setCoordinates(coordinates)\n      }\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]>}\n     */\n    getFirstCoordinate (viewProj = false) {\n      let coordinate\n      if (this.$geometry) {\n        coordinate = this.$geometry.getFirstCoordinate()\n      } else {\n        switch (this.getType()) {\n          case GeometryType.POINT:\n          case GeometryType.CIRCLE:\n            coordinate = this.currentCoordinatesViewProj\n            break\n          case GeometryType.LINE_STRING:\n          case GeometryType.MULTI_POINT:\n            coordinate = this.currentCoordinatesViewProj[0]\n            break\n          case GeometryType.POLYGON:\n          case GeometryType.MULTI_LINE_STRING:\n            coordinate = this.currentCoordinatesViewProj[0][0]\n            break\n          case GeometryType.MULTI_POLYGON:\n            coordinate = this.currentCoordinatesViewProj[0][0][0]\n            break\n        }\n      }\n\n      return viewProj ? roundPointCoords(coordinate) : this.pointToDataProj(coordinate)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getLastCoordinate (viewProj = false) {\n      let coordinate\n      if (this.$geometry) {\n        coordinate = this.$geometry.getLastCoordinate()\n      } else {\n        let arr\n        switch (this.getType()) {\n          case GeometryType.POINT:\n          case GeometryType.CIRCLE:\n            coordinate = this.currentCoordinatesViewProj\n            break\n          case GeometryType.LINE_STRING:\n          case GeometryType.MULTI_POINT:\n            coordinate = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            break\n          case GeometryType.POLYGON:\n          case GeometryType.MULTI_LINE_STRING:\n            arr = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            coordinate = arr[arr.length - 1]\n            break\n          case GeometryType.MULTI_POLYGON:\n            arr = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            arr = arr[arr.length - 1]\n            coordinate = arr[arr.length - 1]\n            break\n        }\n      }\n\n      return viewProj ? roundPointCoords(coordinate) : this.pointToDataProj(coordinate)\n    },\n    /**\n     * @returns {string}\n     */\n    getLayout () {\n      return coalesce(this.$geometry?.getLayout(), GeometryLayout.XY)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]|undefined}\n     */\n    findPointOnSurface (viewProj = false) {\n      return findPointOnSurface({\n        type: this.getType(),\n        coordinates: this.getCoordinates(viewProj),\n      })\n    },\n    /**\n     * @param {number[]} value\n     * @protected\n     */\n    coordinatesViewProjChanged (value) {\n      this.setCoordinates(value, true)\n    },\n    /**\n     * @param {number[]} value\n     * @protected\n     */\n    currentCoordinatesDataProjChanged (value) {\n      if (isEqual(value, this.coordinatesDataProj)) return\n\n      this.$emit('update:coordinates', clonePlainObject(value))\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    pointDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:point', value?.slice())\n    },\n  },\n}\n\nfunction boundingExtent (coordinates) {\n  if (!coordinates) return\n  if (!isArray(coordinates[0])) {\n    coordinates = [coordinates]\n  }\n  return baseBoundingExtent(coordinates)\n}\n","import { Text } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Text~Text|Object|undefined} TextStyleLike\n */\n\n/**\n * @typedef {Object} TextStyleTarget\n * @property {function(): module:ol/style/Text~Text|undefined} getText\n * @property {function(module:ol/style/Text~Text|undefined): void} setText\n */\n\n/**\n * Text style container.\n */\nexport default {\n  created () {\n    this._text = undefined\n    this._textVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly textStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get textStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {TextStyleTarget|undefined}\n     */\n    getTextStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getTextStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Text~Text|null}\n     */\n    getText () {\n      return coalesce(this.getTextStyleTarget()?.getText(), this._text)\n    },\n    /**\n     * @return {Object}\n     */\n    getTextVm () {\n      return this._textVm\n    },\n    /**\n     * @param {module:ol/style/Text~Text|undefined} text\n     */\n    setText (text) {\n      text = text?.$style || text\n      text || (text = undefined)\n      assert(!text || text instanceof Text, 'Invalid text style')\n\n      const textTarget = this.getTextStyleTarget()\n      if (textTarget && text !== textTarget.getText()) {\n        textTarget.setText(text)\n        this.scheduleRefresh()\n      }\n      if (text !== this._text) {\n        this._text = text\n        this._textVm = text?.vm && text.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $text: {\n      enumerable: true,\n      get: this.getText,\n    },\n    $textVm: {\n      enumerable: true,\n      get: this.getTextVm,\n    },\n  })\n}\n","import { coalesce, isFunction, sealFactory } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nexport default {\n  mixins: [\n    source,\n  ],\n  props: {\n    // ol/source/Tile\n    /**\n     * @type {number|undefined}\n     */\n    cacheSize: Number,\n    /**\n     * @type {boolean|undefined}\n     */\n    opaque: Boolean,\n    /**\n     * @type {number}\n     */\n    tilePixelRatio: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {function|undefined}\n     */\n    tileGridFactory: Function,\n    /**\n     * @type {number}\n     */\n    transition: Number,\n    /**\n     * @type {string|undefined}\n     */\n    tileKey: String,\n    /**\n     * @type {number}\n     */\n    zDirection: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      tileGrid: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @type {string|undefined}\n     */\n    tileGridIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'tile_grid')\n    },\n    /**\n     * @returns {function|undefined}\n     */\n    derivedTileGridFactory () {\n      return this.tileGridFactory\n    },\n    /**\n     * @returns {function|undefined}\n     */\n    inputTileGridFactory () {\n      if (!isFunction(this.derivedTileGridFactory)) return\n\n      return sealFactory(::this.derivedTileGridFactory)\n    },\n    /**\n     * @returns {string}\n     */\n    resolvedDataProjection () {\n      return coalesce(\n        this.projection,\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.tileGrid !== this.$source.getTileGrid()) {\n        this.tileGrid = this.$source.getTileGrid()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'tileGridIdent',\n      'inputTileGridFactory',\n      'tileGrid',\n      'tileKey',\n      'opaque',\n      'tilePixelRatio',\n      'cacheSize',\n      'transition',\n      'zDirection',\n    ]),\n  },\n  created () {\n    if (isFunction(this.inputTileGridFactory)) {\n      this.tileGrid = this.instanceFactoryCall(this.tileGridIdent, ::this.inputTileGridFactory)\n    }\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n    },\n    /**\n     * @returns {module:ol/tilegrid/TileGrid~TileGrid|undefined}\n     */\n    getTileGrid () {\n      return coalesce(this.$source?.getTileGrid(), this.tileGrid)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    tileGridIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.tileGrid) {\n        this.setInstance(value, this.tileGrid)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @param {function|undefined} value\n     * @return {Promise<void>}\n     * @protected\n     */\n    inputTileGridFactoryChanged (value) {\n      while (this.hasInstance(this.tileGridIdent)) {\n        this.unsetInstance(this.tileGridIdent)\n      }\n\n      if (isFunction(value)) {\n        this.tileGrid = this.instanceFactoryCall(this.tileGridIdent, this::value)\n      } else {\n        this.tileGrid = null\n      }\n    },\n  },\n}\n","import { v4 as uuid } from 'uuid'\nimport TileEventType from 'ol/source/TileEventType'\nimport { expandUrl } from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport {\n  and,\n  assert,\n  coalesce,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isString,\n  negate,\n  pick,\n  replaceTokens,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport tileSource from './tile-source'\n\nconst isNotEmptyString = /*#__PURE__*/and(isString, negate(isEmpty))\nconst isArrayOfNotEmptyStrings = /*#__PURE__*/and(isArray, value => value.every(isNotEmptyString))\n\nexport default {\n  mixins: [\n    tileSource,\n  ],\n  props: {\n    // ol/source/UrlTile\n    /**\n     * @type {function|undefined}\n     */\n    tileLoadFunction: Function,\n    /**\n     * @type {function|undefined}\n     * @deprecated\n     * @todo remove in v0.13.x\n     */\n    tileUrlFunc: Function,\n    /**\n     * @type {function|undefined}\n     */\n    tileUrlFunction: Function,\n    /**\n     * @type {string|undefined}\n     */\n    url: {\n      type: String,\n      validator: isNotEmptyString,\n    },\n    /**\n     * @type {string[]|undefined}\n     */\n    urls: {\n      type: Array,\n      validator: isArrayOfNotEmptyStrings,\n    },\n  },\n  data () {\n    return {\n      currentTileLoadFunction: undefined,\n      currentTileUrlFunction: undefined,\n      currentUrls: [],\n    }\n  },\n  computed: {\n    urlTokens () {\n      return []\n    },\n    inputUrl () {\n      if (!this.url) return\n\n      return replaceTokens(this.url, pick(this, this.urlTokens))\n    },\n    parsedUrls () {\n      const urls = []\n\n      if (this.urls && this.urls.length > 0) {\n        urls.push(...this.urls)\n      } else if (this.url) {\n        urls.push(this.url)\n      }\n\n      const tokens = pick(this, this.urlTokens)\n\n      return urls.map(url => replaceTokens(url, tokens))\n    },\n    inputUrls () {\n      return this.parsedUrls.reduce((urls, url) => urls.concat(...expandUrl(url)), [])\n    },\n    inputTileUrlFunction () {\n      return coalesce(this.tileUrlFunction, this.tileUrlFunc)\n    },\n    inputTileLoadFunction () {\n      return this.tileLoadFunction\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentTileLoadFunction !== this.$source.getTileLoadFunction()) {\n        this.currentTileLoadFunction = this.$source.getTileLoadFunction()\n      }\n      if (this.currentTileUrlFunction !== this.$source.getTileUrlFunction()) {\n        this.currentTileUrlFunction = this.$source.getTileUrlFunction()\n      }\n      if (!isEqual(this.currentUrls, this.$source.getUrls()) && !this.inputTileUrlFunction) {\n        this.currentUrls = this.$source.getUrls()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputUrls',\n      'currentUrls',\n      'inputTileUrlFunction',\n      'currentTileUrlFunction',\n      'inputTileLoadFunction',\n      'currentTileLoadFunction',\n    ], [\n      'inputUrls',\n      'currentUrls',\n    ]),\n  },\n  created () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.tileUrlFunc) {\n        this.$logger.warn(\"'tileUrlFunc' prop is deprecated. Use 'tileUrlFunction' prop instead.\")\n      }\n    }\n\n    this.currentUrls = this.inputUrls?.slice()\n    this.currentTileUrlFunction = this.inputTileUrlFunction\n    this.currentTileLoadFunction = this.inputTileLoadFunction\n  },\n  updated () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.tileUrlFunc) {\n        this.$logger.warn(\"'tileUrlFunc' prop is deprecated. Use 'tileUrlFunction' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::tileSource.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @returns {module:ol/Tile.LoadFunction}\n     */\n    getTileLoadFunction () {\n      return coalesce(this.$source?.getTileLoadFunction(), this.currentTileLoadFunction)\n    },\n    /**\n     * @param {module:ol/Tile.LoadFunction} tileLoadFunction\n     */\n    setTileLoadFunction (tileLoadFunction) {\n      assert(isFunction(tileLoadFunction), 'Invalid tile load function')\n\n      if (tileLoadFunction !== this.currentTileLoadFunction) {\n        this.currentTileLoadFunction = tileLoadFunction\n      }\n      if (this.$source && tileLoadFunction !== this.$source.getTileLoadFunction()) {\n        this.$source.setTileLoadFunction(tileLoadFunction)\n      }\n    },\n    /**\n     * @returns {module:ol/Tile.UrlFunction}\n     */\n    getTileUrlFunction () {\n      return coalesce(this.$source?.getTileUrlFunction(), this.currentTileUrlFunction)\n    },\n    /**\n     * @param {module:ol/Tile.UrlFunction} tileUrlFunction\n     * @param {number} [tileKey]\n     */\n    setTileUrlFunction (tileUrlFunction, tileKey) {\n      assert(isFunction(tileUrlFunction), 'Invalid tile url function')\n      tileKey || (tileKey = coalesce(this.inputUrls?.join('\\n'), uuid()))\n\n      if (tileUrlFunction !== this.currentTileUrlFunction) {\n        this.currentTileUrlFunction = tileUrlFunction\n      }\n      if (this.$source && tileUrlFunction !== this.$source.getTileUrlFunction()) {\n        this.$source.setTileUrlFunction(tileUrlFunction, tileKey)\n      }\n    },\n    /**\n     * @returns {string[]|undefined}\n     */\n    getUrls () {\n      return coalesce(this.$source?.getUrls(), this.currentUrls)\n    },\n    /**\n     * @param {string[]} urls\n     */\n    setUrls (urls) {\n      assert(isArrayOfNotEmptyStrings(urls), 'Invalid urls')\n      urls = urls.slice()\n\n      if (!isEqual(urls, this.currentUrls)) {\n        this.currentUrls = urls\n      }\n      if (this.$source) {\n        if (this.inputTileUrlFunction) {\n          this.$source.setTileUrlFunction(this.inputTileUrlFunction, urls.join('\\n'))\n        } else if (!isEqual(urls, this.$source.getUrls())) {\n          this.$source.setUrls(urls)\n        }\n      }\n    },\n    /**\n     * @param {string} url\n     */\n    setUrl (url) {\n      assert(isNotEmptyString(url), 'Invalid url')\n\n      this.setUrls(expandUrl(url))\n    },\n    /**\n     * @param {string[]} value\n     * @protected\n     */\n    inputUrlsChanged (value) {\n      this.setUrls(value)\n    },\n    /**\n     * @param {string[]} value\n     * @protected\n     */\n    currentUrlsChanged (value) {\n      if (isEqual(value, this.urls)) return\n\n      this.$emit('update:urls', value?.slice())\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputTileUrlFunctionChanged (value) {\n      this.setTileUrlFunction(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentTileUrlFunctionChanged (value) {\n      if (value === this.inputTileUrlFunction) return\n\n      this.$emit('update:tileUrlFunction', value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputTileLoadFunctionChanged (value) {\n      this.setTileLoadFunction(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentTileLoadFunctionChanged (value) {\n      if (value === this.inputTileLoadFunction) return\n\n      this.$emit('update:tileLoadFunction', value)\n    },\n  },\n}\n\nasync function subscribeToSourceEvents () {\n  const events = obsFromOlEvent(this.$source, [\n    TileEventType.TILELOADSTART,\n    TileEventType.TILELOADEND,\n    TileEventType.TILELOADERROR,\n  ])\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","import { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport urlTileSource from './url-tile-source'\n\n/**\n * Base tile image source mixin.\n */\nexport default {\n  mixins: [\n    urlTileSource,\n  ],\n  props: {\n    // ol/source/TileImage\n    /**\n     * @type {string|undefined}\n     */\n    crossOrigin: String,\n    /**\n     * @type {number|undefined}\n     */\n    reprojectionErrorThreshold: Number,\n    /**\n     * @type {string|undefined}\n     */\n    tileClass: String,\n    /**\n     * @type {boolean}\n     */\n    imageSmoothing: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'crossOrigin',\n      'reprojectionErrorThreshold',\n      'tileClass',\n      'imageSmoothing',\n    ]),\n  },\n  methods: {\n    async setRenderReprojectionEdges (render) {\n      (await this.resolveSource()).setRenderReprojectionEdges(render)\n    },\n  },\n}\n","import { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isNumber } from '../utils'\nimport layer from './layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\n/**\n * Base tile layer mixin.\n */\nexport default {\n  mixins: [\n    layer,\n  ],\n  props: {\n    // ol/layer/BaseTile\n    /**\n     * @type {number}\n     */\n    preload: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {boolean}\n     */\n    useInterimTilesOnError: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      currentPreload: this.preload,\n      currentUseInterimTilesOnError: this.useInterimTilesOnError,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (this.currentPreload !== this.$layer.getPreload()) {\n        this.currentPreload = this.$layer.getPreload()\n      }\n      if (this.currentUseInterimTilesOnError !== this.$layer.getUseInterimTilesOnError()) {\n        this.currentUseInterimTilesOnError = this.$layer.getUseInterimTilesOnError()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'preload',\n      'currentPreload',\n      'useInterimTilesOnError',\n      'currentUseInterimTilesOnError',\n    ]),\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::layer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @returns {number}\n     */\n    getPreload () {\n      return coalesce(this.$layer?.getPreload(), this.currentPreload)\n    },\n    /**\n     * @param {number} preload\n     */\n    setPreload (preload) {\n      preload = Number(preload)\n      assert(isNumber(preload), 'Invalid preload')\n\n      if (preload !== this.currentPreload) {\n        this.currentPreload = preload\n      }\n      if (this.$layer && preload !== this.$layer.getPreload()) {\n        this.$layer.setPreload(preload)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getUseInterimTilesOnError () {\n      return coalesce(this.$layer?.getUseInterimTilesOnError(), this.currentUseInterimTilesOnError)\n    },\n    /**\n     * @param {boolean} useInterimTilesOnError\n     */\n    setUseInterimTilesOnError (useInterimTilesOnError) {\n      useInterimTilesOnError = !!useInterimTilesOnError\n\n      if (useInterimTilesOnError !== this.currentUseInterimTilesOnError) {\n        this.currentUseInterimTilesOnError = useInterimTilesOnError\n      }\n      if (this.$layer && useInterimTilesOnError !== this.$layer.getUseInterimTilesOnError()) {\n        this.$layer.setUseInterimTilesOnError(useInterimTilesOnError)\n      }\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    preloadChanged (value) {\n      this.setPreload(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentPreloadChanged (value) {\n      if (value === this.preload) return\n\n      this.$emit('update:preload', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    useInterimTilesOnErrorChanged (value) {\n      this.setUseInterimTilesOnError(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentUseInterimTilesOnErrorChanged (value) {\n      if (value === this.useInterimTilesOnError) return\n\n      this.$emit('update:useInterimTilesOnError', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('current')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'preload',\n    'useInterimTilesOnError',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { dumpStyle } from '../ol-ext'\nimport { clonePlainObject, isArray, isEqual, isFunction, isPlainObject, mergeDescriptors } from '../utils'\nimport layer from './layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport styleContainer from './style-container'\n\nexport default {\n  mixins: [\n    styleContainer,\n    layer,\n  ],\n  props: {\n    // ol/layer/BaseVector\n    /**\n     * @type {function|undefined}\n     */\n    renderOrder: Function,\n    /**\n     * @type {number}\n     */\n    renderBuffer: {\n      type: Number,\n      default: 100,\n    },\n    /**\n     * @type {boolean}\n     */\n    declutter: Boolean,\n    /**\n     * When set to `true`, feature batches will be recreated during animations.\n     * @type {boolean}\n     */\n    updateWhileAnimating: Boolean,\n    /**\n     * When set to `true`, feature batches will be recreated during interactions.\n     * @type {boolean}\n     */\n    updateWhileInteracting: Boolean,\n  },\n  computed: {\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'renderOrder',\n      'renderBuffer',\n      'declutter',\n      'updateWhileAnimating',\n      'updateWhileInteracting',\n      'style',\n    ], [\n      'style',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::layer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::layer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @return {StyleTarget|undefined}\n     */\n    getStyleTarget () {\n      return this.$layer\n    },\n    /**\n     * @param {number[]} pixel\n     * @return {Promise<Array<module:ol/Feature~Feature>>}\n     */\n    async getFeatures (pixel) {\n      return (await this.resolveLayer()).getFeatures(pixel)\n    },\n    /**\n     * @param {Object|Function|Array|undefined} value\n     * @param {Object|Function|Array|undefined} prev\n     * @protected\n     */\n    styleChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      if (isPlainObject(value) || isArray(value)) {\n        value = clonePlainObject(value)\n      }\n      this.$emit('update:style', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n}\n","import { Feature } from 'ol'\nimport { getUid } from 'ol/util'\nimport { all as loadAll } from 'ol/loadingstrategy'\nimport { Vector as VectorSource } from 'ol/source'\nimport {\n  getFeatureId,\n  getGeoJsonFmt,\n  initializeFeature,\n  isGeoJSONFeature,\n  roundExtent,\n  roundPointCoords,\n  transform,\n} from '../ol-ext'\nimport {\n  and,\n  clonePlainObject,\n  coalesce,\n  constant,\n  every,\n  forEach,\n  reduce,\n  identity,\n  instanceOf,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isString,\n  map,\n  mergeDescriptors,\n  negate,\n  noop,\n  sealFactory,\n  stubArray,\n} from '../utils'\nimport featureHelper from './feature-helper'\nimport featuresContainer from './features-container'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nconst isNotEmptyString = /*#__PURE__*/and(isString, negate(isEmpty))\n\n/**\n * Basic vector source mixin.\n */\nexport default {\n  mixins: [\n    featureHelper,\n    featuresContainer,\n    source,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/source/Vector\n    /**\n     * @type {Object[]}\n     */\n    features: {\n      type: Array,\n      default: stubArray,\n      validator: value => every(value, isGeoJSONFeature),\n    },\n    /**\n     * Source format factory\n     * @type {function} formatFactory\n     */\n    formatFactory: {\n      type: Function,\n      default: getGeoJsonFmt,\n    },\n    /**\n     * Feature loader.\n     * Feature loader should load features from some remote service, decode them and pass to `features` prop to render.\n     * @type {module:ol/featureloader~FeatureLoader|undefined} loader\n     */\n    loader: Function,\n    /**\n     * @deprecated Use `loader` prop instead\n     * @todo remove in v0.13.x\n     */\n    loaderFactory: Function,\n    /**\n     * Loading strategy.\n     * Extent here in map view projection.\n     * @type {function} loadingStrategy\n     */\n    loadingStrategy: {\n      type: Function,\n      // default: loadAll,\n    },\n    /**\n     * @deprecated Use `loadingStrategy` prop instead\n     * @todo remove in v0.13.x\n     */\n    strategyFactory: Function,\n    /**\n     * String or url factory\n     * @type {string|function} url\n     */\n    url: {\n      type: [String, Function],\n      validator: value => isFunction(value) || isNotEmptyString(value),\n    },\n    /**\n     * @type {boolean}\n     */\n    overlaps: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {boolean}\n     */\n    useSpatialIndex: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      /**\n       * @returns {module:ol/format/Feature~FeatureFormat|undefined}\n       */\n      format: undefined,\n      currentUrl: undefined,\n      currentLoader: undefined,\n    }\n  },\n  computed: {\n    featuresDataProj () {\n      return map(this.features, feature => initializeFeature(clonePlainObject(feature)))\n    },\n    featuresViewProj () {\n      return map(this.features, feature => initializeFeature(this.writeFeatureInViewProj(this.readFeatureInDataProj(feature))))\n    },\n    featuresHash () {\n      return reduce(this.features, (hash, feature) => {\n        hash[getFeatureId(feature)] = true\n        return hash\n      }, {})\n    },\n    currentFeaturesDataProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n    },\n    currentFeaturesViewProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n    },\n    currentFeaturesHash () {\n      if (!this.rev) return {}\n\n      return reduce(this.getFeatures(), (hash, feature) => {\n        hash[getFeatureId(feature)] = true\n        return hash\n      }, {})\n    },\n    extentDataProj () {\n      return this.rev ? this.getExtent() : undefined\n    },\n    extentViewProj () {\n      return this.rev ? this.getExtent(true) : undefined\n    },\n    inputUrl () {\n      return this.createUrlFunc(this.url)\n    },\n    inputLoader () {\n      let loader = this.loader\n      if (!loader && this.loaderFactory) {\n        loader = this.loaderFactory()\n      }\n\n      return this.createLoaderFunc(loader)\n    },\n    inputLoadingStrategy () {\n      let loadingStrategy = this.loadingStrategy\n      if (!loadingStrategy && this.strategyFactory) {\n        loadingStrategy = this.strategyFactory()\n      }\n\n      return loadingStrategy || loadAll\n    },\n    formatIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'format')\n    },\n    inputFormatFactory () {\n      return sealFactory(::this.formatFactory)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentUrl !== this.$source.getUrl()) {\n        this.currentUrl = this.$source.getUrl()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'featuresViewProj',\n      'currentFeaturesDataProj',\n      'extentDataProj',\n      'inputUrl',\n      'currentUrl',\n      'inputLoader',\n      'currentLoader',\n      'inputLoadingStrategy',\n      'inputFormatFactory',\n      'formatIdent',\n      'format',\n      'overlaps',\n      'useSpatialIndex',\n    ], [\n      'featuresViewProj',\n      'currentFeaturesDataProj',\n      'extentDataProj',\n    ]),\n  },\n  created () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.loaderFactory) {\n        this.$logger.warn(\"'loaderFactory' prop is deprecated. Use 'loader' prop instead.\")\n      }\n      if (this.strategyFactory) {\n        this.$logger.warn(\"'strategyFactory' prop is deprecated. Use 'loadingStrategy' prop instead.\")\n      }\n    }\n\n    if (isFunction(this.inputFormatFactory)) {\n      this.format = this.instanceFactoryCall(this.formatIdent, ::this.inputFormatFactory)\n    }\n    this.currentUrl = this.inputUrl\n    this.currentLoader = this.inputLoader\n  },\n  updated () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.loaderFactory) {\n        this.$logger.warn(\"'loaderFactory' prop is deprecated. Use 'loader' prop instead.\")\n      }\n      if (this.strategyFactory) {\n        this.$logger.warn(\"'strategyFactory' prop is deprecated. Use 'loadingStrategy' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/Vector~VectorSource}\n     * @protected\n     */\n    createSource () {\n      return new VectorSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Vector\n        format: this.format,\n        loader: this.currentLoader,\n        strategy: this.inputLoadingStrategy,\n        url: this.currentUrl,\n        overlaps: this.overlaps,\n        useSpatialIndex: this.useSpatialIndex,\n        features: this.$featuresCollection,\n      })\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::source.methods.getServices(),\n        {\n          get featuresContainer () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n      this::featuresContainer.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     * @param {boolean} [viewProj=false]\n     */\n    addFeatures (features, viewProj = false) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.addFeatures(features, viewProj)\n      }\n\n      const newFeatures = []\n      forEach(features || [], feature => {\n        feature = this.initializeFeature(feature, viewProj)\n        instanceOf(feature, Feature)\n\n        const foundFeature = this.$source.getFeatureById(getFeatureId(feature))\n        if (foundFeature) {\n          this.updateFeature(foundFeature, feature)\n        } else {\n          newFeatures.push(feature)\n        }\n      })\n\n      if (!newFeatures.length) return\n\n      this.$source.addFeatures(newFeatures)\n    },\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     */\n    addFeature (feature, viewProj = false) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.addFeature(feature, viewProj)\n      }\n\n      feature = this.initializeFeature(feature, viewProj)\n      const foundFeature = this.$source.getFeatureById(getFeatureId(feature))\n      if (foundFeature == null) {\n        this.$source.addFeature(feature)\n      } else {\n        this.updateFeature(foundFeature, feature)\n      }\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     */\n    removeFeatures (features) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.removeFeatures(features)\n      }\n\n      let changed = false\n      forEach(features, feature => {\n        changed = this.removeFeatureInternal(feature)\n      })\n\n      if (!changed) return\n\n      this.$source.changed()\n    },\n    removeFeatureInternal (feature) {\n      feature = this.getFeatureById(getFeatureId(feature))\n      if (!feature) return false\n      const featureKey = getUid(feature)\n      if (featureKey in this.$source.nullGeometryFeatures_) {\n        delete this.$source.nullGeometryFeatures_[featureKey]\n      } else {\n        if (this.$source.featuresRtree_) {\n          this.$source.featuresRtree_.remove(feature)\n        }\n      }\n      this.$source.removeFeatureInternal(feature)\n      return true\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    removeFeature (feature) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.removeFeature(feature)\n      }\n\n      feature = this.$source.getFeatureById(getFeatureId(feature?.$feature || feature))\n      if (!feature) return\n\n      this.$source.removeFeature(feature)\n    },\n    /**\n     * @param {string} featureId\n     * @return {module:ol/Feature~Feature|undefined}\n     */\n    getFeatureById (featureId) {\n      if (this.$source) {\n        return this.$source.getFeatureById(featureId)\n      }\n\n      return this::featuresContainer.methods.getFeatureById(featureId)\n    },\n    /**\n     * @return {Array<module:ol/Feature~Feature>}\n     */\n    getFeatures () {\n      return coalesce(this.$source?.getFeatures(), this::featuresContainer.methods.getFeatures())\n    },\n    /**\n     * @return {module:ol/Collection~Collection|undefined}\n     */\n    getFeaturesCollection () {\n      return coalesce(this.$source?.getFeaturesCollection(), this._featuresCollection)\n    },\n    /**\n     * @return {boolean}\n     */\n    isEmpty () {\n      return coalesce(this.$source?.isEmpty(), this.$featuresCollection.getLength() === 0)\n    },\n    /**\n     * @param {boolean} [fast]\n     * @return {Promise<void>}\n     */\n    async clear (fast) {\n      if (!this.$source) return this.clearFeatures()\n\n      const source = await this.resolveSource()\n\n      return new Promise(resolve => {\n        source.once('change', () => resolve())\n        source.clear()\n      })\n    },\n    /**\n     * @param {function} callback\n     * @returns {*}\n     */\n    forEachFeature (callback) {\n      if (this.$source) {\n        return this.$source.forEachFeature(callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeature(callback)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureInExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.forEachFeatureInExtent(extent, callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeatureInExtent(extent, callback, true)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureIntersectingExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.forEachFeatureIntersectingExtent(extent, callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeatureIntersectingExtent(extent, callback, true)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesAtCoordinate (coordinate, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      if (this.$source) {\n        return this.$source.getFeaturesAtCoordinate(coordinate)\n      }\n\n      return this::featuresContainer.methods.getFeaturesAtCoordinate(coordinate, true)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesInExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.getFeaturesInExtent(extent)\n      }\n\n      return this::featuresContainer.methods.getFeaturesInExtent(extent, true)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {function} [filter]\n     * @param {boolean} [viewProj=false]\n     * @returns {module:ol/Feature~Feature}\n     */\n    getClosestFeatureToCoordinate (coordinate, filter = identity, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      if (this.$source) {\n        return this.$source.getClosestFeatureToCoordinate(coordinate, filter)\n      }\n\n      return this::featuresContainer.methods.getClosestFeatureToCoordinate(coordinate, filter, true)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getExtent (viewProj = false) {\n      let extent\n      if (this.$source) {\n        extent = this.$source.getExtent()\n      } else {\n        extent = this::featuresContainer.methods.getFeaturesExtent(true)\n      }\n\n      return viewProj ? extent : this.extentToDataProj(extent)\n    },\n    /**\n     * @returns {module:ol/format/Feature~FeatureFormat|undefined}\n     */\n    getFormat () {\n      return coalesce(this.$source?.getFormat(), this.format)\n    },\n    /**\n     * @returns {Promise<string|function|undefined>}\n     */\n    getUrl () {\n      return coalesce(this.$source?.getUrl(), this.currentUrl)\n    },\n    /**\n     * @param {string|function} url\n     */\n    setUrl (url) {\n      url = this.createUrlFunc(url)\n\n      if (url !== this.currentUrl) {\n        this.currentUrl = url\n      }\n\n      if (this.$source && url !== this.$source.getUrl()) {\n        this.$source.setUrl(url)\n        this.refresh()\n      }\n    },\n    /**\n     * @param {function} loader\n     */\n    setLoader (loader) {\n      loader = this.createLoaderFunc(loader)\n\n      if (loader !== this.currentLoader) {\n        this.currentLoader = loader\n        this.$source?.setLoader(loader)\n        this.refresh()\n      }\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     */\n    removeLoadedExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n      this.$source?.removeLoadedExtent(extent)\n    },\n    /**\n     * @param {string|function|undefined} url\n     * @return {function|undefined}\n     * @protected\n     */\n    createUrlFunc (url) {\n      if (!url) return\n\n      if (!isFunction(url)) {\n        url = constant(url)\n      }\n\n      return this.wrapUrlFunc(url)\n    },\n    /**\n     * @param {function} urlFunc\n     * @returns {function}\n     * @protected\n     */\n    wrapUrlFunc (urlFunc) {\n      let fn = urlFunc\n\n      if (!fn.wrapped) {\n        fn = (extent, resolution, projection) => {\n          extent = transformExtent(extent, projection, this.resolvedDataProjection)\n          projection = this.resolvedDataProjection\n\n          return urlFunc(extent, resolution, projection)\n        }\n        fn.wrapped = true\n      }\n\n      return fn\n    },\n    /**\n     * @param {function|undefined} loader\n     * @return {function|undefined}\n     * @protected\n     */\n    createLoaderFunc (loader) {\n      if (!isFunction(loader)) return\n\n      return this.wrapLoaderFunc(loader)\n    },\n    /**\n     * @param {function} loaderFunc\n     * @returns {Function}\n     * @protected\n     */\n    wrapLoaderFunc (loaderFunc) {\n      let fn = loaderFunc\n\n      if (!fn.wrapped) {\n        fn = async (extent, resolution, projection) => {\n          let features = await loaderFunc(\n            transformExtent(extent, projection, this.resolvedDataProjection),\n            resolution,\n            this.resolvedDataProjection,\n          )\n          if (!features) return\n          if (!(isArray(features) && features[0] instanceof Feature)) {\n            features = this.readSource(features)\n          }\n          if (isArray(features)) {\n            this.addFeatures(features)\n          }\n        }\n        fn.wrapped = true\n      }\n\n      return fn\n    },\n    /**\n     * @param {*} data\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    readSource (data) {\n      return this.getFormat().readFeatures(data, {\n        featureProjection: this.resolvedViewProjection,\n        dataProjection: this.resolvedDataProjection,\n      })\n    },\n    /**\n     * @param {GeoJSONFeature[]} value\n     * @param {GeoJSONFeature[]} prevValue\n     * @protected\n     */\n    async featuresViewProjChanged (value, prevValue) {\n      if (isEqual(value, prevValue)) return\n      // remove non-matched features\n      forEach(this.getFeatures(), feature => {\n        if (!this.featuresHash[getFeatureId(feature)]) {\n          this.removeFeatureInternal(feature)\n        }\n      })\n      // add new features\n      this.addFeatures(value, true)\n      await this.debounceChanged()\n    },\n    /**\n     * @param {GeoJSONFeature[]} value\n     * @protected\n     */\n    currentFeaturesDataProjChanged (value) {\n      if (isEqual(value, this.featuresDataProj)) return\n\n      this.$emit('update:features', clonePlainObject(value))\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @param {number[]|undefined} prev\n     * @protected\n     */\n    extentDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:extent', value?.slice())\n    },\n    /**\n     * @param {string|function|undefined} value\n     * @protected\n     */\n    inputUrlChanged (value) {\n      this.setUrl(value)\n    },\n    /**\n     * @param {string|function|undefined} value\n     * @protected\n     */\n    currentUrlChanged (value) {\n      if (value === this.inputUrl) return\n\n      this.$emit('update:url', value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputLoaderChanged (value) {\n      this.setLoader(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentLoaderChanged (value) {\n      if (value === this.inputLoader) return\n\n      this.$emit('update:loader', value)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    formatIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.format) {\n        this.setInstance(value, this.format)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @param {function} value\n     * @protected\n     */\n    inputFormatFactoryChanged (value) {\n      while (this.hasInstance(this.formatIdent)) {\n        this.unsetInstance(this.formatIdent)\n      }\n\n      if (isFunction(value)) {\n        this.format = this.instanceFactoryCall(this.formatIdent, this::value)\n      } else {\n        this.format = undefined\n      }\n    },\n    // skip not used watchers\n    attributionsCollapsibleChanged: noop,\n    stateChanged: noop,\n  },\n}\n\nfunction subscribeToSourceEvents () {\n}\n\nfunction transformExtent (extent, sourceProj, destProj) {\n  extent = extent.slice()\n  if (isFinite(extent[0]) && isFinite(extent[1])) {\n    [extent[0], extent[1]] = transform([extent[0], extent[1]], sourceProj, destProj)\n  }\n  if (isFinite(extent[2]) && isFinite(extent[3])) {\n    [extent[2], extent[3]] = transform([extent[2], extent[3]], sourceProj, destProj)\n  }\n  return extent\n}\n","import { cleanSourceParams, WMSServerType } from '../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEqual, isObjectLike,\n  lowerFirst,\n  makeWatchers,\n  reduce,\n  upperFirst,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\nconst cleanWmsSourceParams = params => cleanSourceParams(params, [\n  'LAYERS',\n  'VERSION',\n  'STYLES',\n  'FORMAT',\n  'TRANSPARENT',\n  'BGCOLOR',\n  'TIME',\n])\n\n/**\n * Basic WMS params and methods mixin.\n */\nexport default {\n  props: {\n    /**\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    serverType: {\n      type: String,\n      validator: value => Object.values(WMSServerType).includes(value),\n    },\n    /**\n     * @type {string|string[]}\n     */\n    layers: {\n      type: String,\n      required: true,\n    },\n    /**\n     * WMS Request styles\n     * @type {string|string[]|undefined}\n     */\n    styles: String,\n    /**\n     * @type {string}\n     */\n    version: {\n      type: String,\n      default: '1.3.0',\n    },\n    /**\n     * @type {boolean}\n     */\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string}\n     */\n    format: {\n      type: String,\n      default: 'image/png',\n    },\n    /**\n     * @type {string|undefined}\n     */\n    bgColor: String,\n    /**\n     * @type {string|undefined}\n     */\n    time: String,\n    /**\n     * Additional WMS request parameters\n     * @type {Object|undefined}\n     */\n    params: Object,\n  },\n  data () {\n    return {\n      currentParams: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @returns {string}\n     */\n    inputLayers () {\n      return isArray(this.layers) ? this.layers.join(',') : this.layers\n    },\n    /**\n     * @returns {string|undefined}\n     */\n    inputStyles () {\n      return isArray(this.styles) ? this.styles.join(',') : this.styles\n    },\n    /**\n     * @returns {Object|null}\n     */\n    customParams () {\n      return this.params ? cleanWmsSourceParams(this.params) : undefined\n    },\n    /**\n     * @returns {Object}\n     */\n    inputParams () {\n      return {\n        ...this.customParams || {},\n        LAYERS: this.inputLayers,\n        STYLES: this.inputStyles,\n        VERSION: this.version,\n        FORMAT: this.format,\n        TRANSPARENT: this.transparent,\n        BGCOLOR: this.bgColor,\n        TIME: this.time,\n      }\n    },\n    .../*#__PURE__*/reduce([\n      'inputLayers',\n      'inputStyles',\n      'version',\n      'format',\n      'transparent',\n      'bgColor',\n      'time',\n    ], (props, inProp) => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const curProp = 'current' + upperFirst(prop)\n      props[curProp] = function () {\n        return coalesce((this.currentParams || {})[prop.toUpperCase()], (this.inputParams || {})[prop.toUpperCase()])\n      }\n\n      return props\n    }, {}),\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (!isEqual(this.currentParams, this.$source.getParams())) {\n        this.currentParams = this.$source.getParams()\n      }\n    },\n    .../*#__PURE__*/makeWatchers([\n      'currentLayers',\n      'currentStyles',\n      'currentVersion',\n      'currentFormat',\n      'currentTransparent',\n      'currentBgColor',\n      'currentTime',\n    ], curProp => function (value) {\n      const prop = lowerFirst(curProp.slice(7))\n      const inProp = hasProp(this, 'input' + upperFirst(prop)) ? 'input' + upperFirst(prop) : prop\n\n      if (isEqual(value, this[inProp])) return\n\n      this.$emit('update:' + prop, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'serverType',\n      'inputParams',\n      'currentParams',\n    ], [\n      'inputParams',\n      'currentParams',\n    ]),\n  },\n  created () {\n    this.currentParams = this.inputParams && clonePlainObject(this.inputParams)\n  },\n  methods: {\n    /**\n     * @param {number[]} coordinate\n     * @param {number} [resolution]\n     * @param {string} [projection]\n     * @param {Object|undefined} [params] GetFeatureInfo params. `info_format` at least should be provided.\n     *                          If `query_layers` is not provided then the layers specified in the `layers` prop will be used.\n     *                          `version` should not be specified here (value from `version` prop will be used).\n     * @return {Promise<string|undefined>}\n     */\n    async getFeatureInfoUrl (coordinate, resolution, projection, params = {}) {\n      resolution || (resolution = this.$viewVm?.getResolution())\n      projection || (projection = this.resolvedDataProjection)\n\n      return (await this.resolveSource()).getFeatureInfoUrl(coordinate, resolution, projection, params)\n    },\n    /**\n     * @param {number} resolution\n     * @param {Object|undefined} [params]\n     * @return {Promise<string|undefined>}\n     */\n    async getLegendUrl (resolution, params = {}) {\n      return (await this.resolveSource()).getLegendUrl(resolution, params)\n    },\n    /**\n     * @returns {Object}\n     */\n    getParams () {\n      return coalesce(this.$source?.getParams(), this.currentParams)\n    },\n    /**\n     * @param {Object} params\n     */\n    updateParams (params) {\n      params = reduce({ ...this.currentParams, ...params }, (params, value, name) => ({\n        ...params,\n        [name.toUpperCase()]: value,\n      }), {})\n\n      if (!isEqual(params, this.currentParams)) {\n        this.currentParams = params\n      }\n      if (this.$source && !isEqual(params, this.$source.getParams())) {\n        this.$source.updateParams(params)\n      }\n    },\n    /**\n     * @param {string} param\n     * @param {*} value\n     */\n    updateParam (param, value) {\n      this.updateParams({ [param.toUpperCase()]: value })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    inputParamsChanged (value) {\n      this.updateParams(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentParamsChanged (value) {\n      value = value ? cleanWmsSourceParams(value) : undefined\n      if (isEqual(value, this.customParams)) return\n\n      this.$emit('update:params', value && clonePlainObject(value))\n    },\n  },\n}\n","import { createTileUrlFunctionFromTemplates } from 'ol-tilecache'\nimport { XYZ as XYZSource } from 'ol/source'\nimport { createXYZ } from 'ol/tilegrid'\nimport { EPSG_3857, extentFromProjection } from '../ol-ext'\nimport { and, coalesce, isArray, isFunction, isNumber, noop, or } from '../utils'\nimport source from './source'\nimport tileImageSource from './tile-image-source'\n\nconst validateMinZoom = value => value >= 0\nconst validateTileSize = /*#__PURE__*/or(isNumber, and(isArray, value => value.length === 2 && value.every(isNumber)))\n/**\n * Base XYZ source mixin.\n */\nexport default {\n  mixins: [\n    tileImageSource,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Source\n    projection: {\n      ...source.props.projection,\n      default: EPSG_3857,\n    },\n    /* eslint-enable vue/require-prop-types */\n    // ol/source/XYZ\n    maxZoom: {\n      type: Number,\n      default: 42,\n    },\n    minZoom: {\n      type: Number,\n      default: 0,\n      validator: validateMinZoom,\n    },\n    maxResolution: Number,\n    tileSize: {\n      type: [Number, Array],\n      default: () => [256, 256],\n      validator: validateTileSize,\n    },\n  },\n  computed: {\n    inputTileSize () {\n      return isArray(this.tileSize) ? this.tileSize.slice() : [this.tileSize, this.tileSize]\n    },\n    derivedTileGridFactory () {\n      if (isFunction(this.tileGridFactory)) {\n        return this.tileGridFactory\n      }\n\n      const extent = extentFromProjection(this.resolvedDataProjection)\n      const maxZoom = this.maxZoom\n      const minZoom = this.minZoom\n      const maxResolution = this.maxResolution\n      const tileSize = this.inputTileSize\n\n      return () => createXYZ({ extent, maxZoom, minZoom, maxResolution, tileSize })\n    },\n    inputTileUrlFunction () {\n      const urlFunc = coalesce(this.tileUrlFunction, this.tileUrlFunc)\n      if (isFunction(urlFunc)) return urlFunc\n      if (this.currentUrls.length === 0) return\n\n      return createTileUrlFunctionFromTemplates(this.currentUrls, this.tileGrid)\n    },\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/XYZ~XYZSource}\n     * @protected\n     */\n    createSource () {\n      return new XYZSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        attributionsCollapsible: this.attributionsCollapsible,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        opaque: this.opaque,\n        tilePixelRatio: this.tilePixelRatio,\n        transition: this.transition,\n        zDirection: this.zDirection,\n        tileGrid: this.tileGrid,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        tileUrlFunction: this.currentTileUrlFunction,\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        tileClass: this.tileClass,\n        imageSmoothing: this.imageSmoothing,\n      })\n    },\n    tileKeyChanged: noop, // input tileKey is not allowed in XYZ constructor\n    stateChanged: noop, // input state is not allowed in XYZ constructor\n  },\n}\n"],"names":["EVENT_BUS_PROP","beforeCreate","initEventBus","Object","defineProperties","$eventBus","enumerable","get","hasProp","Vue","prototype","bus","IDENTITY_MAP_PROP","INSTANCES_POOL","data","idents","stubObject","initIdentityMap","$identityMap","destroyed","unsetInstances","methods","makeIdent","parts","filter","identity","join","instanceFactoryCall","ident","factory","hasInstance","getInstance","inst","setInstance","set","has","unsetInstance","unset","keys","forEach","moveInstance","fromIdent","toIdent","move","imap","IdentityMap","_rxSubs","unsubscribeAll","subscribeAll","subs","unsubscribe","subscribeTo","observable","next","noop","error","complete","errorWrap","err","process","env","NODE_ENV","$logger","stack","newLogger","vmName","pipe","retry","subscribe","push","idx","indexOf","splice","SERVICES_PROP","inject","$services","provide","getServices","mergeDescriptors","source","$parent","_provided","$options","VM_PROP","FRAME_TIME","OlObjectState","UNDEF","CREATING","CREATED","MOUNTING","MOUNTED","UNMOUNTING","UNMOUNTED","DESTROYING","DESTROYED","OlObjectEvent","ERROR","OlObjectAction","CREATE","MOUNT","UNMOUNT","DESTROY","mixins","identMap","rxSubs","services","eventBus","props","id","type","String","Number","default","uuid","validator","value","rev","currentId","computed","vmClass","kebabCase","name","vmId","olObjIdent","watch","$olObject","getIdInternal","makeChangeOrRecreateWatchers","created","_logger","_olObjectState","_olObject","undefined","_olObjectEvents","newOlObjectEventsObs","defineDebounceMethods","defineServices","execInit","mounted","execMount","beforeDestroy","execUnmount","execDeinit","beforeInit","init","createOlObject","includes","changed","Error","deinit","vm","beforeMount","mount","unmount","refresh","olObj","resolveOlObject","Observable","Promise","resolve","once","scheduleRefresh","debounceRefresh","remount","$olObjectState","VUELAYERS_DEBUG","log","scheduleRemount","debounceRemount","recreate","scheduleRecreate","debounceRecreate","subscribeToOlObjectEvents","$createPromise","OLObjectNotInitializedError","$nextTickPromise","$nextTick","getId","coalesce","OlObject","setId","assert","setIdInternal","idChanged","currentIdChanged","$emit","olObjIdentChanged","prevValue","syncNonObservable","debounce","debounceChanged","$olObjectEvents","newLifecyclePromise","$mountPromise","then","$unmountPromise","$destroyPromise","mergeObs","values","map","fromVueEvent","args","isArray","filterObs","publishReplay","refCount","action","endEvent","startStates","newFinishObs","raceObs","LifecycleError","CanceledError","firstObs","mergeMap","evt","obs","obsOf","delayWhen","throwErrorObs","mapObs","length","toPromise","resetEventsObs","prevState","canceled","race","lcErr","fireCancel","setterKey","addPrefix","propChanges","obsFromOlChangeEvent","setter","prop","obsFromOlEvent","EventType","CHANGE","ObjectEventType","PROPERTYCHANGE","interval","constructor","baseMessage","message","isFunction","captureStackTrace","isCreateError","isMountError","isUnmountError","isDestroyError","deepProps","makeWatchers","deep","handler","isEqual","serialize","JSON","stringify","cleanArcGisSourceParams","params","cleanSourceParams","hidpi","Boolean","format","layers","Array","layerDefs","dynamicLayers","dpi","transparent","time","layerTimeOptions","gdbVersion","mapScale","rotation","datumTransformations","mapRangeValues","layerRangeValues","layerParameterValues","historicMoment","currentParams","inputLayers","inputTime","inputLayerDefs","inputDynamicLayers","inputLayerTimeOptions","inputDatumTransformations","inputMapRangeValues","inputLayerRangeValues","inputLayerParameterValues","inputHistoricMoment","customParams","inputParams","LAYERS","FORMAT","LAYERDEFS","DYNAMICLAYERS","DPI","TRANSPARENT","TIME","LAYERTIMEOPTIONS","GDBVERSION","MAPSCALE","ROTATION","DATUMTRANSFORMATIONS","MAPRANGEVALUES","LAYERRANGEVALUES","LAYERPARAMETERVALUES","HISTORICMOMENT","reduce","inProp","slice","lowerFirst","curProp","upperFirst","toUpperCase","$source","getParams","isObjectLike","clonePlainObject","updateParams","updateParam","param","inputParamsChanged","currentParamsChanged","resolvedViewProjection","viewProjection","EPSG_3857","resolvedDataProjection","dataProjection","resolvedViewProjectionChanged","resolvedDataProjectionChanged","pointToViewProj","point","precision","COORD_PRECISION","transformPoint","pointToDataProj","lineToViewProj","line","transformLine","lineToDataProj","polygonToViewProj","polygon","transformPolygon","polygonToDataProj","multiPointToViewProj","multiPoint","transformMultiPoint","multiPointToDataProj","multiLineToViewProj","multiLine","transformMultiLine","multiLineToDataProj","multiPolygonToViewProj","multiPolygon","transformMultiPolygon","multiPolygonToDataProj","extentToViewProj","extent","transformExtent","extentToDataProj","writeGeometryInDataProj","geometry","writeGeoJsonGeometry","writeGeometryInViewProj","readGeometryInDataProj","readGeoJsonGeometry","readGeometryInViewProj","writeFeatureInDataProj","feature","writeGeoJsonFeature","writeFeatureInViewProj","readFeatureInDataProj","readGeoJsonFeature","readFeatureInViewProj","prev","render","h","options","stubVNode","empty","vnode","text","children","slots","extractChildren","$slots","attrs","style","display","tag","waitFor","$mapVm","obsFromVueEvent","hasAncestorVm","mapTo","stubTrue","obsFromVueWatcher","olCmp","projTransforms","waitForMap","class","className","opacity","visible","every","isNumber","extentProjection","getProj","zIndex","minResolution","maxResolution","minZoom","maxZoom","currentExtentViewProj","roundExtent","currentMaxResolution","currentMinResolution","currentMaxZoom","currentMinZoom","currentOpacity","currentVisible","currentZIndex","resolvedExtentProjection","extentDataProj","extentViewProj","currentExtentDataProj","$layer","getExtent","getMaxResolution","getMinResolution","getMaxZoom","getMinZoom","getOpacity","getVisible","getZIndex","all","initializeLayer","createLayer","$layersContainer","addLayer","removeLayer","layerVm","subscribeToLayerEvents","getLayerId","setLayerId","resolveLayer","viewProj","setExtent","setMaxResolution","resolution","setMinResolution","setMaxZoom","zoom","setMinZoom","setOpacity","setVisible","setZIndex","isAtPixel","pixel","layer","forEachLayerAtPixel","mapLayer","opacityChanged","currentOpacityChanged","visibleChanged","currentVisibleChanged","extentViewProjChanged","currentExtentDataProjChanged","zIndexChanged","currentZIndexChanged","minResolutionChanged","currentMinResolutionChanged","maxResolutionChanged","currentMaxResolutionChanged","minZoomChanged","currentMinZoomChanged","maxZoomChanged","currentMaxZoomChanged","mapVm","$viewVm","viewVm","layersContainer","val","controlsCollectionIdent","_controlsCollection","Collection","_controlSubs","controlsContainer","subscribeToCollectionEvents","initDefaultControls","defaultControls","getControls","control","removeControl","controls","createDefaultControls","isPlainObject","addControls","initializeControl","$control","instanceOf","Control","addControl","getControlById","getControlId","$controlsCollection","removeControls","remove","clearControls","clear","getArray","getControlsCollection","controlId","find","controlsCollectionIdentChanged","adds","CollectionEventType","ADD","element","tap","uid","getUid","removes","REMOVE","events","bufferDebounceTime","_geometry","_geometryVm","defineService","geometryContainer","getGeometryTarget","getGeometry","getGeometryVm","setGeometry","geom","$geometry","isGeoJSONGeometry","Geometry","geomTarget","$geometryVm","_style","styleContainer","getDefaultStyle","getStyleTarget","getStyle","addStyle","olStyle","$style","currentStyle","warn","setStyle","removeStyle","s","$styleFunction","createStyleFunc","styleTarget","defaultStyle","__styleFunc","compiledStyle","Style","properties","currentProperties","currentGeometryName","geometryDataProj","geometryViewProj","pointDataProj","pointViewProj","findPointOnSurface","dumpStyle","$feature","getFeatureProperties","getGeometryName","initializeFeature","createFeature","setGeometryName","Feature","$featuresContainer","addFeature","removeFeature","subscribeToEvents","featureVm","getFeatureId","setFeatureId","resolveFeature","geometryName","isString","isEmpty","getProperties","setProperties","setFeatureProperties","selfFeature","layerFilter","$layerVm","selfLayer","forEachFeatureAtPixel","propertiesChanged","currentPropertiesChanged","currentGeometryNameChanged","geometryDataProjChanged","pointDataProjChanged","styleChanged","featuresContainer","key","distinctUntilChanged","updateFeature","newFeature","isInteracting","featureJson","newFeatureJson","geomJson","CIRCLE_SERIALIZE_PROP","currentGeomJson","styleJson","STYLE_SERIALIZE_PROP","currentStyleJson","featureHelper","featuresCollectionIdent","_featuresCollection","_featureSubs","addFeatures","features","foundFeature","getFeatureById","$featuresCollection","removeFeatures","clearFeatures","featureId","getFeatures","getFeaturesCollection","forEachFeature","callback","res","forEachFeatureInExtent","intersectsExtent","result","forEachFeatureIntersectingExtent","getFeaturesAtCoordinate","coordinate","getFeaturesInExtent","getClosestFeatureToCoordinate","roundPointCoords","closestFeature","minSquaredDistance","Infinity","closestPoint","getClosestPoint","prevSquaredDistance","Math","pow","getFeaturesExtent","geomExtent","featuresCollectionIdentChanged","changes","dataProj","json","_json","_fill","_fillVm","fillStyleContainer","getFillStyleTarget","getFill","getFillVm","setFill","fill","Fill","fillTarget","$fill","$fillVm","getType","initializeGeometry","createGeometry","$geometryContainer","geometryVm","subscribeToGeometryEvents","getGeometryId","setGeometryId","resolveGeometry","intersectsCoordinate","rotate","angle","anchor","scale","sx","sy","simplify","tolerance","translate","dx","dy","extentDataProjChanged","_source","_sourceVm","sourceContainer","getSourceTarget","getSource","getSourceVm","setSource","Source","sourceTarget","$sourceVm","baseLayer","Function","overlay","getSourceId","setMap","getRenderer","$map","sourceChanged","sourceChanges","_sourceSubs","renderEvents","RenderEventType","PRERENDER","POSTRENDER","validateAttributions","or","attributions","attributionsCollapsible","projection","wrapX","state","SourceState","READY","currentAttributions","adaptAttributions","currentState","inputAttributions","currentResolutions","getResolutions","getAttributions","getState","initializeSource","createSource","$sourceContainer","resolveSource","sourceVm","subscribeToSourceEvents","setSourceId","setAttributions","getAttributionsCollapsible","getProjection","getWrapX","inputAttributionsChanged","currentAttributionsChanged","stateChanged","currentStateChanged","currentResolutionsChanged","ImageSourceEventType","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","resolutions","inputResolutions","attributionsCollapsibleChanged","wrapXChanged","initializeStyle","createStyle","styleVm","getStyleId","setStyleId","resolveStyle","$styleContainer","rotateWithView","displacement","currentRotateWithView","currentRotation","currentScale","inputDisplacement","setRotateWithView","getRotateWithView","setRotation","getRotation","setScale","getScale","$imageStyleContainer","setImage","getImageVm","getDisplacement","rotateWithViewChanged","currentRotateWithViewChanged","rotationChanged","currentRotationChanged","scaleChanged","currentScaleChanged","imageStyleContainer","_image","_imageVm","getImageStyleTarget","getImage","image","Image","imageTarget","$image","$imageVm","active","priority","currentActive","currentPriority","interacting","$interaction","getActive","getInteractionPriority","interaction","initializeInteraction","createInteraction","setActive","$interactionsContainer","addInteraction","removeInteraction","interactionVm","subscribeToInteractionEvents","resolveInteraction","getInteractionId","setInteractionId","getPriority","setPriority","setInteractionPriority","sortInteractions","getMap","setInteracting","flag","activeChanged","currentActiveChanged","priorityChanged","currentPriorityChanged","interactionsContainer","interactionsCollectionIdent","_interactionsCollection","_interactionSubs","initDefaultInteractions","defaultInteractions","getInteractions","interactions","createDefaultInteractions","addInteractions","Interaction","getInteractionById","$interactionsCollection","removeInteractions","clearInteractions","getInteractionsCollection","interactionId","sorter","getDefaultInteractionsSorter","sort","a","b","ap","bp","interactionsCollectionIdentChanged","layersCollectionIdent","_layersCollection","_layerSubs","BaseLayer","addLayers","getLayerById","$layersCollection","removeLayers","clearLayers","getLayers","getLayersCollection","layerId","layersCollectionIdentChanged","overlaysCollectionIdent","_overlaysCollection","_overlaySubs","overlaysContainer","initializeOverlay","$overlay","Overlay","addOverlays","overlays","addOverlay","getOverlayById","getOverlayId","$overlaysCollection","removeOverlays","removeOverlay","clearOverlays","getOverlays","getOverlaysCollection","overlayId","overlaysCollectionIdentChanged","_stroke","_strokeVm","strokeStyleContainer","getStrokeStyleTarget","getStroke","getStrokeVm","setStroke","stroke","Stroke","strokeTarget","$stroke","$strokeVm","imageStyle","points","radius","radius1","radius2","dumpStrokeStyle","dumpFillStyle","getAnchor","getAngle","getOrigin","getPoints","getRadius","getRadius2","getSize","strokeChanged","fillChanged","coordinates","required","negate","currentCoordinatesViewProj","coordinatesDataProj","roundCoords","coordinatesViewProj","coordinatesToViewProj","currentCoordinatesDataProj","coordinatesToDataProj","isEqualCoord","boundingExtent","getCoordinates","getCoordinatesTransformFunction","transforms","transform","setCoordinates","getFirstCoordinate","GeometryType","POINT","CIRCLE","LINE_STRING","MULTI_POINT","POLYGON","MULTI_LINE_STRING","MULTI_POLYGON","getLastCoordinate","arr","getLayout","GeometryLayout","XY","coordinatesViewProjChanged","currentCoordinatesDataProjChanged","baseBoundingExtent","_text","_textVm","textStyleContainer","getTextStyleTarget","getText","getTextVm","setText","Text","textTarget","$text","$textVm","cacheSize","opaque","tilePixelRatio","tileGridFactory","transition","tileKey","zDirection","tileGrid","tileGridIdent","derivedTileGridFactory","inputTileGridFactory","sealFactory","getTileGrid","tileGridIdentChanged","inputTileGridFactoryChanged","isNotEmptyString","and","isArrayOfNotEmptyStrings","tileSource","tileLoadFunction","tileUrlFunc","tileUrlFunction","url","urls","currentTileLoadFunction","currentTileUrlFunction","currentUrls","urlTokens","inputUrl","replaceTokens","pick","parsedUrls","tokens","inputUrls","concat","expandUrl","inputTileUrlFunction","inputTileLoadFunction","getTileLoadFunction","getTileUrlFunction","getUrls","updated","setTileLoadFunction","setTileUrlFunction","setUrls","setUrl","inputUrlsChanged","currentUrlsChanged","inputTileUrlFunctionChanged","currentTileUrlFunctionChanged","inputTileLoadFunctionChanged","currentTileLoadFunctionChanged","TileEventType","TILELOADSTART","TILELOADEND","TILELOADERROR","urlTileSource","crossOrigin","reprojectionErrorThreshold","tileClass","imageSmoothing","setRenderReprojectionEdges","preload","useInterimTilesOnError","currentPreload","currentUseInterimTilesOnError","getPreload","getUseInterimTilesOnError","setPreload","setUseInterimTilesOnError","preloadChanged","currentPreloadChanged","useInterimTilesOnErrorChanged","currentUseInterimTilesOnErrorChanged","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","stubArray","isGeoJSONFeature","formatFactory","getGeoJsonFmt","loader","loaderFactory","loadingStrategy","strategyFactory","overlaps","useSpatialIndex","currentUrl","currentLoader","featuresDataProj","featuresViewProj","featuresHash","hash","currentFeaturesDataProj","currentFeaturesViewProj","currentFeaturesHash","createUrlFunc","inputLoader","createLoaderFunc","inputLoadingStrategy","loadAll","formatIdent","inputFormatFactory","getUrl","VectorSource","strategy","newFeatures","removeFeatureInternal","featureKey","nullGeometryFeatures_","featuresRtree_","getLength","fast","getFormat","setLoader","removeLoadedExtent","constant","wrapUrlFunc","urlFunc","fn","wrapped","wrapLoaderFunc","loaderFunc","readSource","readFeatures","featureProjection","featuresViewProjChanged","currentFeaturesDataProjChanged","inputUrlChanged","currentUrlChanged","inputLoaderChanged","currentLoaderChanged","formatIdentChanged","inputFormatFactoryChanged","sourceProj","destProj","isFinite","cleanWmsSourceParams","serverType","WMSServerType","styles","version","bgColor","inputStyles","STYLES","VERSION","BGCOLOR","getFeatureInfoUrl","getResolution","getLegendUrl","validateMinZoom","validateTileSize","tileImageSource","tileSize","inputTileSize","extentFromProjection","createXYZ","createTileUrlFunctionFromTemplates","XYZSource","tileKeyChanged"],"mappings":"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"}